{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getFileListByPath } from '@/api/file';\nexport default {\n  name: 'BreadCrumb',\n  props: {\n    // 文件类型\n    fileType: {\n      required: true,\n      type: Number\n    },\n    // 文件路径\n    filePath: {\n      require: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      fileTypeMap: {\n        1: '全部图片',\n        2: '全部文档',\n        3: '全部视频',\n        4: '全部音乐',\n        5: '其他',\n        6: '回收站'\n      },\n      pageData: {\n        currentPage: 1,\n        pageCount: 50,\n        total: 0\n      },\n      isShowInput: false,\n      //  是否展示路径输入框\n      inputFilePath: '' //  路径输入\n    };\n  },\n  computed: {\n    /**\r\n     * 面包屑导航栏数组\r\n     */\n    breadCrumbList: {\n      get() {\n        let filePath = this.$route.query.filePath;\n        let filePathList = filePath ? filePath.split('/') : [];\n        let res = []; //  返回结果数组\n        let _path = []; //  存放祖先路径\n        for (let i = 0; i < filePathList.length; i++) {\n          if (filePathList[i]) {\n            _path.push(filePathList[i]);\n            res.push({\n              path: _path.join('/'),\n              name: filePathList[i]\n            });\n          } else if (i === 0) {\n            //  根目录\n            filePathList[i] = '';\n            _path.push(filePathList[i]);\n            res.push({\n              path: '/',\n              name: this.fileType === 0 ? '全部文件' : this.fileType === 8 ? '我的分享' : this.$route.name === 'Share' ? '全部分享' : ''\n            });\n          }\n        }\n        return res;\n      },\n      set() {\n        return [];\n      }\n    }\n  },\n  watch: {\n    '$route.query': {\n      immediate: true,\n      handler(newQuery) {\n        console.log('watch 路由跳转');\n        console.log(newQuery);\n        this.$emit('getTableDataByType');\n      }\n    }\n  },\n  methods: {\n    /**\r\n     * 点击面包屑导航栏空白处\r\n     */\n    handleClickBreadCrumbSelf() {\n      if (this.fileType === 0) {\n        this.inputFilePath = this.filePath;\n        this.isShowInput = true;\n        this.$nextTick(() => {\n          this.$refs.filePathInputRef.focus();\n        });\n      }\n    },\n    /**\r\n     * 路径输入框失去焦点或用户按下回车时触发\r\n     */\n    handleInputBlurEnter() {\n      this.isShowInput = false;\n      if (this.inputFilePath !== this.filePath) {\n        const fixInputFilePath = this.inputFilePath.endsWith('/') ? this.inputFilePath.slice(0, -1) : this.inputFilePath;\n        this.$router.push({\n          query: {\n            filePath: `${fixInputFilePath}`,\n            fileType: 0\n          }\n        });\n      }\n    },\n    // 获取文件参数\n    getRouteQuery(item) {\n      let routeName = this.$route.name;\n      if (routeName === 'Share') {\n        // 当前是查看他人分享列表的页面\n        return {\n          query: {\n            filePath: item.path\n          }\n        };\n      } else if (this.fileType === 8) {\n        // 当前是我的已分享列表页面\n        return {\n          query: {\n            fileType: 8,\n            filePath: item.path,\n            shareBatchNum: item.path === '/' ? undefined : this.$route.query.shareBatchNum //  当查看的是根目录，批次号置空\n          }\n        };\n      } else {\n        // 网盘页面\n        return {\n          query: {\n            filePath: item.path,\n            fileType: 0\n          }\n        };\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}