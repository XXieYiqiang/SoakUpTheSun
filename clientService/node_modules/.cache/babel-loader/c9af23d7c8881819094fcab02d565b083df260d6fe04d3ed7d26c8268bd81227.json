{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nvar _file = require(\"_r/file.js\");\nvar _default = exports.default = {\n  name: 'DeleteFileDialog',\n  data() {\n    return {\n      visible: false,\n      //  对话框是否可见\n      sureBtnLoading: false\n    };\n  },\n  methods: {\n    /**\r\n     * 删除文件对话框 | 对话框关闭的回调\r\n     * @description 关闭对话框，重置表单\r\n     */\n    handleDialogClose() {\n      this.visible = false;\n      this.callback('cancel');\n    },\n    /**\r\n     * 删除文件对话框 | 确定按钮点击事件\r\n     * @description 区分 删除到回收站中 | 在回收站中彻底删除，调用相应的删除文件接口\r\n     */\n    async handleDialogSure() {\n      this.sureBtnLoading = true;\n      let res = null;\n      // 批量删除模式\n      if (this.isBatchOperation) {\n        // 区分删除类型\n        switch (this.deleteMode) {\n          // 删除文件到回收站\n          case 1:\n            {\n              res = await (0, _file.batchDeleteFile)({\n                userFileIds: this.fileInfo.map(item => {\n                  return item.userFileId;\n                }).join(',')\n              });\n              break;\n            }\n          // 回收站中彻底删除\n          case 2:\n            {\n              res = await (0, _file.batchDeleteRecoveryFile)({\n                userFileIds: this.fileInfo.map(item => {\n                  return item.userFileId;\n                }).join(',')\n              });\n              break;\n            }\n        }\n      } else {\n        // 单文件删除模式\n        // 区分删除类型\n        switch (this.deleteMode) {\n          // 删除文件到回收站\n          case 1:\n            {\n              res = await (0, _file.deleteFile)({\n                userFileId: this.fileInfo.userFileId\n              });\n              break;\n            }\n          // 回收站中彻底删除\n          case 2:\n            {\n              res = await (0, _file.deleteRecoveryFile)({\n                userFileId: this.fileInfo.userFileId\n              });\n              break;\n            }\n        }\n      }\n      if (res.data.code === 200) {\n        this.sureBtnLoading = false;\n        this.$message.success('删除成功');\n        this.visible = false;\n        this.callback('confirm');\n      } else {\n        this.sureBtnLoading = false;\n        this.$message.error('删除失败，' + res.message);\n      }\n    }\n  }\n};","map":{"version":3,"names":["_file","require","_default","exports","default","name","data","visible","sureBtnLoading","methods","handleDialogClose","callback","handleDialogSure","res","isBatchOperation","deleteMode","batchDeleteFile","userFileIds","fileInfo","map","item","userFileId","join","batchDeleteRecoveryFile","deleteFile","deleteRecoveryFile","code","$message","success","error","message"],"sources":["src/components/file/dialog/deleteFile/Dialog.vue"],"sourcesContent":["<template>\r\n\t<!-- 删除文件对话框 -->\r\n\t<el-dialog\r\n\t\ttitle=\"删除文件\"\r\n\t\t:visible.sync=\"visible\"\r\n\t\t:close-on-click-modal=\"false\"\r\n\t\twidth=\"550px\"\r\n\t\t@close=\"handleDialogClose\"\r\n\t>\r\n\t\t<div v-if=\"deleteMode === 1\">删除后可在回收站查看, 是否继续删除？</div>\r\n\t\t<div v-else-if=\"deleteMode === 2\">此操作将永久删除该文件, 是否继续？</div>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"handleDialogClose\">取 消</el-button>\r\n\t\t\t<el-button\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\t:loading=\"sureBtnLoading\"\r\n\t\t\t\t@click=\"handleDialogSure\"\r\n\t\t\t\t>确 定</el-button\r\n\t\t\t>\r\n\t\t</div>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n\tbatchDeleteFile,\r\n\tbatchDeleteRecoveryFile,\r\n\tdeleteFile,\r\n\tdeleteRecoveryFile\r\n} from '_r/file.js'\r\n\r\nexport default {\r\n\tname: 'DeleteFileDialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvisible: false, //  对话框是否可见\r\n\t\t\tsureBtnLoading: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 删除文件对话框 | 对话框关闭的回调\r\n\t\t * @description 关闭对话框，重置表单\r\n\t\t */\r\n\t\thandleDialogClose() {\r\n\t\t\tthis.visible = false\r\n\t\t\tthis.callback('cancel')\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除文件对话框 | 确定按钮点击事件\r\n\t\t * @description 区分 删除到回收站中 | 在回收站中彻底删除，调用相应的删除文件接口\r\n\t\t */\r\n\t\tasync handleDialogSure() {\r\n\t\t\tthis.sureBtnLoading = true\r\n\t\t\tlet res = null\r\n\t\t\t// 批量删除模式\r\n\t\t\tif (this.isBatchOperation) {\r\n\t\t\t\t// 区分删除类型\r\n\t\t\t\tswitch (this.deleteMode) {\r\n\t\t\t\t\t// 删除文件到回收站\r\n\t\t\t\t\tcase 1: {\r\n\t\t\t\t\t\tres = await batchDeleteFile({\r\n\t\t\t\t\t\t\tuserFileIds: this.fileInfo\r\n\t\t\t\t\t\t\t\t.map((item) => {\r\n\t\t\t\t\t\t\t\t\treturn item.userFileId\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.join(',')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 回收站中彻底删除\r\n\t\t\t\t\tcase 2: {\r\n\t\t\t\t\t\tres = await batchDeleteRecoveryFile({\r\n\t\t\t\t\t\t\tuserFileIds: this.fileInfo\r\n\t\t\t\t\t\t\t\t.map((item) => {\r\n\t\t\t\t\t\t\t\t\treturn item.userFileId\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.join(',')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// 单文件删除模式\r\n\t\t\t\t// 区分删除类型\r\n\t\t\t\tswitch (this.deleteMode) {\r\n\t\t\t\t\t// 删除文件到回收站\r\n\t\t\t\t\tcase 1: {\r\n\t\t\t\t\t\tres = await deleteFile({\r\n\t\t\t\t\t\t\tuserFileId: this.fileInfo.userFileId\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 回收站中彻底删除\r\n\t\t\t\t\tcase 2: {\r\n\t\t\t\t\t\tres = await deleteRecoveryFile({\r\n\t\t\t\t\t\t\tuserFileId: this.fileInfo.userFileId\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (res.data.code === 200) {\r\n\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\tthis.$message.success('删除成功')\r\n\t\t\t\tthis.visible = false\r\n\t\t\t\tthis.callback('confirm')\r\n\t\t\t} else {\r\n\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\tthis.$message.error('删除失败，' + res.message)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;AAwBA,IAAAA,KAAA,GAAAC,OAAA;AAKA,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACA;AACA;AACA;AACA;IACAC,kBAAA;MACA,KAAAH,OAAA;MACA,KAAAI,QAAA;IACA;IACA;AACA;AACA;AACA;IACA,MAAAC,iBAAA;MACA,KAAAJ,cAAA;MACA,IAAAK,GAAA;MACA;MACA,SAAAC,gBAAA;QACA;QACA,aAAAC,UAAA;UACA;UACA;YAAA;cACAF,GAAA,aAAAG,qBAAA;gBACAC,WAAA,OAAAC,QAAA,CACAC,GAAA,CAAAC,IAAA;kBACA,OAAAA,IAAA,CAAAC,UAAA;gBACA,GACAC,IAAA;cACA;cACA;YACA;UACA;UACA;YAAA;cACAT,GAAA,aAAAU,6BAAA;gBACAN,WAAA,OAAAC,QAAA,CACAC,GAAA,CAAAC,IAAA;kBACA,OAAAA,IAAA,CAAAC,UAAA;gBACA,GACAC,IAAA;cACA;cACA;YACA;QACA;MACA;QACA;QACA;QACA,aAAAP,UAAA;UACA;UACA;YAAA;cACAF,GAAA,aAAAW,gBAAA;gBACAH,UAAA,OAAAH,QAAA,CAAAG;cACA;cACA;YACA;UACA;UACA;YAAA;cACAR,GAAA,aAAAY,wBAAA;gBACAJ,UAAA,OAAAH,QAAA,CAAAG;cACA;cACA;YACA;QACA;MACA;MACA,IAAAR,GAAA,CAAAP,IAAA,CAAAoB,IAAA;QACA,KAAAlB,cAAA;QACA,KAAAmB,QAAA,CAAAC,OAAA;QACA,KAAArB,OAAA;QACA,KAAAI,QAAA;MACA;QACA,KAAAH,cAAA;QACA,KAAAmB,QAAA,CAAAE,KAAA,WAAAhB,GAAA,CAAAiB,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}