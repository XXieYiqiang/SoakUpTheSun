{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { batchDeleteFile, batchDeleteRecoveryFile, deleteFile, deleteRecoveryFile } from '_r/file.js';\nexport default {\n  name: 'DeleteFileDialog',\n  data() {\n    return {\n      visible: false,\n      //  对话框是否可见\n      sureBtnLoading: false\n    };\n  },\n  methods: {\n    /**\r\n     * 删除文件对话框 | 对话框关闭的回调\r\n     * @description 关闭对话框，重置表单\r\n     */\n    handleDialogClose() {\n      this.visible = false;\n      this.callback('cancel');\n    },\n    /**\r\n     * 删除文件对话框 | 确定按钮点击事件\r\n     * @description 区分 删除到回收站中 | 在回收站中彻底删除，调用相应的删除文件接口\r\n     */\n    async handleDialogSure() {\n      this.sureBtnLoading = true;\n      let res = null;\n      // 批量删除模式\n      if (this.isBatchOperation) {\n        // 区分删除类型\n        switch (this.deleteMode) {\n          // 删除文件到回收站\n          case 1:\n            {\n              res = await batchDeleteFile({\n                userFileIds: this.fileInfo.map(item => {\n                  return item.userFileId;\n                }).join(',')\n              });\n              break;\n            }\n          // 回收站中彻底删除\n          case 2:\n            {\n              res = await batchDeleteRecoveryFile({\n                userFileIds: this.fileInfo.map(item => {\n                  return item.userFileId;\n                }).join(',')\n              });\n              break;\n            }\n        }\n      } else {\n        // 单文件删除模式\n        // 区分删除类型\n        switch (this.deleteMode) {\n          // 删除文件到回收站\n          case 1:\n            {\n              res = await deleteFile({\n                userFileId: this.fileInfo.userFileId\n              });\n              break;\n            }\n          // 回收站中彻底删除\n          case 2:\n            {\n              res = await deleteRecoveryFile({\n                userFileId: this.fileInfo.userFileId\n              });\n              break;\n            }\n        }\n      }\n      if (res.data.code === 200) {\n        this.sureBtnLoading = false;\n        this.$message.success('删除成功');\n        this.visible = false;\n        this.callback('confirm');\n      } else {\n        this.sureBtnLoading = false;\n        this.$message.error('删除失败，' + res.message);\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}