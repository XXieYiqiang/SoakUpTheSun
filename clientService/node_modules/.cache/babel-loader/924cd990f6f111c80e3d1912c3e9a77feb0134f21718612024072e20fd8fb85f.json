{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/front/gim-chat/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _vueCodemirror = require(\"vue-codemirror\");\nrequire(\"codemirror/lib/codemirror.css\");\nrequire(\"./theme.js\");\nrequire(\"./mode.js\");\nrequire(\"./fold.js\");\nvar _map = require(\"@/libs/map.js\");\nvar _index = _interopRequireDefault(require(\"@/store/index.js\"));\nvar _file = require(\"@/api/file.js\");\n// vue-codemirror 相关，官网地址：https://github.com/surmon-china/vue-codemirror\n// codemirror 样式\n//  codemirror 高亮代码主题\n// codemirror 的解析语言模式\n//  codemirror 的代码折叠功能相关\n// 文件修改相关\nvar _default = exports.default = {\n  name: 'ImgPreview',\n  components: {\n    codemirror: _vueCodemirror.codemirror\n  },\n  data() {\n    return {\n      fontSizeList: _map.fontSizeList,\n      fileSuffixCodeModeMap: _map.fileSuffixCodeModeMap,\n      codeMirrorThemeList: _map.codeMirrorThemeList,\n      visible: false,\n      // 代码预览遮罩层组件是否显示\n      originalCodeText: '',\n      // 代码原本的文本\n      codeMirrorText: '',\n      // 代码实时修改的文本\n      codeMirrorLoading: false,\n      // 代码内容是否加载中\n      // codemirror 配置项，参考 https://codemirror.net/doc/manual.html#config\n      codeMirrorOptions: {\n        tabSize: 4,\n        //  制表符的宽度。默认为 4。\n        mode: 'text/html',\n        //  解析当前代码的模式，参考 https://codemirror.net/mode/ 每种语言的示例页面的底部都有对应的 MIME 类型，如果当前文件后缀没有匹配的语言，按照 html 来解析\n        theme: 'default',\n        //  代码高亮主题色，其他主题色参考 https://codemirror.net/theme/\n        readOnly: true,\n        //  true 只读不可编辑 | false 可编辑 | \"nocursor\"（而不是简单的 true ），不允许编辑器聚焦。\n        lineNumbers: true,\n        //  是否在编辑器左侧显示行号\n        line: true,\n        autoCloseBrackets: true,\n        //  自动补全括号\n        foldGutter: true,\n        //  创建带有指示可折叠块的标记的装订线\n        lineWrapping: true,\n        //  长行处理：false 滚动 | true 换行\n        // 额外的装订线\n        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers']\n      },\n      isShow: true,\n      //  codemirror 是否展示\n      // codemirror 自定义配置项\n      codeMirrorCustomOptions: {\n        fontSize: 14\n      }\n    };\n  },\n  computed: {\n    // 屏幕宽度\n    screenWidth() {\n      return _index.default.state.common.screenWidth;\n    },\n    // 是否修改\n    isModify() {\n      return this.originalCodeText !== this.codeMirrorText;\n    }\n  },\n  watch: {\n    // 监听代码查看组件 显隐状态变化\n    visible(val) {\n      if (val) {\n        // codemirror 解析模式设置\n        let fileSuffix = this.fileInfo.extendName.toLowerCase();\n        if (fileSuffix === 'yaml') {\n          fileSuffix = 'yml';\n        }\n        if (this.fileSuffixCodeModeMap.has(fileSuffix)) {\n          this.codeMirrorOptions.mode = this.fileSuffixCodeModeMap.get(fileSuffix).mime;\n        }\n        this.codeMirrorOptions.readOnly = !this.isEdit; //  设置编辑器是否只读\n        // codemirror 主题获取\n        this.codeMirrorOptions.theme = localStorage.getItem('qiwen_file_codemirror_theme') || 'default';\n        this.getCodeText();\n        // 添加键盘 Esc 事件\n        this.$nextTick(() => {\n          document.addEventListener('keyup', e => {\n            if (e.keyCode === 27) {\n              this.closeCodePreview();\n            }\n          });\n        });\n      } else {\n        document.removeEventListener('keyup', e => {\n          if (e.keyCode === 27) {\n            this.closeCodePreview();\n          }\n        });\n      }\n    },\n    // 监听主题变化\n    'codeMirrorOptions.theme'(val) {\n      localStorage.setItem('qiwen_file_codemirror_theme', val);\n    }\n  },\n  methods: {\n    /**\r\n     * 获取代码文本内容\r\n     */\n    getCodeText() {\n      this.codeMirrorLoading = true;\n      (0, _file.getFilePreview)({\n        userFileId: this.fileInfo.userFileId,\n        isMin: false,\n        shareBatchNum: this.fileInfo.shareBatchNum,\n        extractionCode: this.fileInfo.extractionCode,\n        token: this.$common.getCookies(this.$config.tokenKeyName)\n      }).then(res => {\n        this.codeMirrorLoading = false;\n        this.originalCodeText = typeof res.data === 'object' ? JSON.stringify(res.data) : res.data;\n        this.codeMirrorText = this.originalCodeText + '';\n      });\n    },\n    /**\r\n     * 修改代码文本内容\r\n     */\n    handleModifyFileContent() {\n      // 如果没有修改，或当前为只读状态\n      if (!this.isModify || this.codeMirrorOptions.readOnly) {\n        return false;\n      }\n      this.codeMirrorLoading = true;\n      (0, _file.modifyFileContent)({\n        userFileId: this.fileInfo.userFileId,\n        fileContent: this.codeMirrorText\n      }).then(res => {\n        this.codeMirrorLoading = false;\n        console.log('res====== handleModifyFileContent ===');\n        console.log(res);\n        if (res.success) {\n          this.$message.success('已保存');\n          this.getCodeText();\n        } else {\n          this.$message.error(res.message);\n        }\n      }).catch(err => {\n        this.codeMirrorLoading = false;\n        this.$message.error(err.message);\n      });\n    },\n    /**\r\n     * codemirror 配置项改变时触发\r\n     */\n    handleChangeCodeMirrorOption() {\n      this.isShow = false;\n      this.isShow = true;\n    },\n    /**\r\n     * 关闭代码预览\r\n     */\n    closeCodePreview() {\n      this.visible = false;\n      this.callback('cancel');\n    }\n  }\n};","map":{"version":3,"names":["_vueCodemirror","require","_map","_index","_interopRequireDefault","_file","_default","exports","default","name","components","codemirror","data","fontSizeList","fileSuffixCodeModeMap","codeMirrorThemeList","visible","originalCodeText","codeMirrorText","codeMirrorLoading","codeMirrorOptions","tabSize","mode","theme","readOnly","lineNumbers","line","autoCloseBrackets","foldGutter","lineWrapping","gutters","isShow","codeMirrorCustomOptions","fontSize","computed","screenWidth","store","state","common","isModify","watch","val","fileSuffix","fileInfo","extendName","toLowerCase","has","get","mime","isEdit","localStorage","getItem","getCodeText","$nextTick","document","addEventListener","e","keyCode","closeCodePreview","removeEventListener","codeMirrorOptions.theme","setItem","methods","getFilePreview","userFileId","isMin","shareBatchNum","extractionCode","token","$common","getCookies","$config","tokenKeyName","then","res","JSON","stringify","handleModifyFileContent","modifyFileContent","fileContent","console","log","success","$message","error","message","catch","err","handleChangeCodeMirrorOption","callback"],"sources":["src/components/file/box/codePreview/BoxMask.vue"],"sourcesContent":["<template>\r\n\t<transition name=\"el-fade-in-linear el-fade-in\">\r\n\t\t<div\r\n\t\t\tclass=\"code-preview-wrapper\"\r\n\t\t\tv-show=\"visible\"\r\n\t\t\t@keydown.s.ctrl.prevent=\"handleModifyFileContent\"\r\n\t\t>\r\n\t\t\t<!-- 顶部信息栏 & 工具栏 -->\r\n\t\t\t<div class=\"tip-wrapper\" v-if=\"visible\">\r\n\t\t\t\t<div class=\"name\" :title=\"$file.getFileNameComplete(fileInfo)\">\r\n\t\t\t\t\t{{ $file.getFileNameComplete(fileInfo) }}\r\n\t\t\t\t\t<span class=\"un-save\" v-show=\"isModify && !codeMirrorOptions.readOnly\"\r\n\t\t\t\t\t\t>（未保存）</span\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"editor-preveiw\">\r\n\t\t\t\t\t在线预览{{ codeMirrorOptions.readOnly ? '' : ' & 编辑' }}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"tool-wrapper\">\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclass=\"item download-link\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t:href=\"$file.getDownloadFilePath(fileInfo)\"\r\n\t\t\t\t\t\t:download=\"$file.getFileNameComplete(fileInfo)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<i class=\"el-icon-download\" title=\"下载\"></i>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<el-tooltip effect=\"dark\" placement=\"bottom\">\r\n\t\t\t\t\t\t<div slot=\"content\">\r\n\t\t\t\t\t\t\t操作提示: <br />\r\n\t\t\t\t\t\t\t1. 按 Esc 键可退出查看；<br />\r\n\t\t\t\t\t\t\t2. 支持在线编辑、保存、下载\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"item text-wrapper\">\r\n\t\t\t\t\t\t\t<span class=\"text\">操作提示</span>\r\n\t\t\t\t\t\t\t<i class=\"el-icon-s-opportunity\"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tclass=\"item el-icon-close\"\r\n\t\t\t\t\t\ttitle=\"关闭预览\"\r\n\t\t\t\t\t\t@click=\"closeCodePreview\"\r\n\t\t\t\t\t></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 代码编辑区域 -->\r\n\t\t\t<div class=\"code-editor-wrapper\">\r\n\t\t\t\t<div class=\"operate-wrapper\">\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tclass=\"save-icon iconfont icon-baocun\"\r\n\t\t\t\t\t\ttitle=\"保存（ctrl+s）\"\r\n\t\t\t\t\t\tv-show=\"isModify && !codeMirrorOptions.readOnly\"\r\n\t\t\t\t\t\t@click=\"handleModifyFileContent\"\r\n\t\t\t\t\t></i>\r\n\t\t\t\t\t<el-form\r\n\t\t\t\t\t\tclass=\"editor-set-form\"\r\n\t\t\t\t\t\t:model=\"codeMirrorOptions\"\r\n\t\t\t\t\t\t:inline=\"true\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tlabel-position=\"right\"\r\n\t\t\t\t\t\tlabel-suffix=\":\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<el-form-item label-width=\"0px\" class=\"line-wrapper\">\r\n\t\t\t\t\t\t\t<el-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"codeMirrorOptions.lineWrapping\"\r\n\t\t\t\t\t\t\t\t@change=\"handleChangeCodeMirrorOption\"\r\n\t\t\t\t\t\t\t\t>自动换行</el-checkbox\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t<el-form-item label-width=\"0px\" class=\"font-size\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"codeMirrorCustomOptions.fontSize\" filterable>\r\n\t\t\t\t\t\t\t\t<el-option\r\n\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in fontSizeList\"\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t:value=\"item\"\r\n\t\t\t\t\t\t\t\t\t:label=\"`${item} px`\"\r\n\t\t\t\t\t\t\t\t></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t<el-form-item label-width=\"80px\" label=\"代码语言\" class=\"lanaguage\">\r\n\t\t\t\t\t\t\t<el-select\r\n\t\t\t\t\t\t\t\tv-model=\"codeMirrorOptions.mode\"\r\n\t\t\t\t\t\t\t\tfilterable\r\n\t\t\t\t\t\t\t\t@change=\"handleChangeCodeMirrorOption\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<el-option\r\n\t\t\t\t\t\t\t\t\tv-for=\"(value, key, index) in fileSuffixCodeModeMap\"\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t:value=\"value[1].mime\"\r\n\t\t\t\t\t\t\t\t\t:label=\"value[1].language\"\r\n\t\t\t\t\t\t\t\t></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t<el-form-item label=\"主题\" label-width=\"56px\" class=\"theme\">\r\n\t\t\t\t\t\t\t<el-select\r\n\t\t\t\t\t\t\t\tv-model=\"codeMirrorOptions.theme\"\r\n\t\t\t\t\t\t\t\tfilterable\r\n\t\t\t\t\t\t\t\t@change=\"handleChangeCodeMirrorOption\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<el-option value=\"default\" label=\"default\"></el-option>\r\n\t\t\t\t\t\t\t\t<el-option\r\n\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in codeMirrorThemeList\"\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t:label=\"item\"\r\n\t\t\t\t\t\t\t\t\t:value=\"item\"\r\n\t\t\t\t\t\t\t\t></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<codemirror\r\n\t\t\t\t\tclass=\"code-editor\"\r\n\t\t\t\t\tref=\"codemirrorRef\"\r\n\t\t\t\t\tv-model=\"codeMirrorText\"\r\n\t\t\t\t\t:options=\"codeMirrorOptions\"\r\n\t\t\t\t\tv-loading=\"codeMirrorLoading\"\r\n\t\t\t\t\tv-if=\"isShow\"\r\n\t\t\t\t\t:style=\"`font-size: ${codeMirrorCustomOptions.fontSize}px;`\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\n// vue-codemirror 相关，官网地址：https://github.com/surmon-china/vue-codemirror\r\nimport { codemirror } from 'vue-codemirror'\r\nimport 'codemirror/lib/codemirror.css' // codemirror 样式\r\nimport './theme.js' //  codemirror 高亮代码主题\r\nimport './mode.js' // codemirror 的解析语言模式\r\nimport './fold.js' //  codemirror 的代码折叠功能相关\r\nimport {\r\n\tfontSizeList,\r\n\tfileSuffixCodeModeMap,\r\n\tcodeMirrorThemeList\r\n} from '@/libs/map.js'\r\n// 文件修改相关\r\nimport store from '@/store/index.js'\r\nimport { getFilePreview, modifyFileContent } from '@/api/file.js'\r\n\r\nexport default {\r\n\tname: 'ImgPreview',\r\n\tcomponents: {\r\n\t\tcodemirror\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfontSizeList,\r\n\t\t\tfileSuffixCodeModeMap,\r\n\t\t\tcodeMirrorThemeList,\r\n\t\t\tvisible: false, // 代码预览遮罩层组件是否显示\r\n\t\t\toriginalCodeText: '', // 代码原本的文本\r\n\t\t\tcodeMirrorText: '', // 代码实时修改的文本\r\n\t\t\tcodeMirrorLoading: false, // 代码内容是否加载中\r\n\t\t\t// codemirror 配置项，参考 https://codemirror.net/doc/manual.html#config\r\n\t\t\tcodeMirrorOptions: {\r\n\t\t\t\ttabSize: 4, //  制表符的宽度。默认为 4。\r\n\t\t\t\tmode: 'text/html', //  解析当前代码的模式，参考 https://codemirror.net/mode/ 每种语言的示例页面的底部都有对应的 MIME 类型，如果当前文件后缀没有匹配的语言，按照 html 来解析\r\n\t\t\t\ttheme: 'default', //  代码高亮主题色，其他主题色参考 https://codemirror.net/theme/\r\n\t\t\t\treadOnly: true, //  true 只读不可编辑 | false 可编辑 | \"nocursor\"（而不是简单的 true ），不允许编辑器聚焦。\r\n\t\t\t\tlineNumbers: true, //  是否在编辑器左侧显示行号\r\n\t\t\t\tline: true,\r\n\t\t\t\tautoCloseBrackets: true, //  自动补全括号\r\n\t\t\t\tfoldGutter: true, //  创建带有指示可折叠块的标记的装订线\r\n\t\t\t\tlineWrapping: true, //  长行处理：false 滚动 | true 换行\r\n\t\t\t\t// 额外的装订线\r\n\t\t\t\tgutters: [\r\n\t\t\t\t\t'CodeMirror-linenumbers',\r\n\t\t\t\t\t'CodeMirror-foldgutter',\r\n\t\t\t\t\t'CodeMirror-lint-markers'\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tisShow: true, //  codemirror 是否展示\r\n\t\t\t// codemirror 自定义配置项\r\n\t\t\tcodeMirrorCustomOptions: {\r\n\t\t\t\tfontSize: 14\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 屏幕宽度\r\n\t\tscreenWidth() {\r\n\t\t\treturn store.state.common.screenWidth\r\n\t\t},\r\n\t\t// 是否修改\r\n\t\tisModify() {\r\n\t\t\treturn this.originalCodeText !== this.codeMirrorText\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\t// 监听代码查看组件 显隐状态变化\r\n\t\tvisible(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\t// codemirror 解析模式设置\r\n\t\t\t\tlet fileSuffix = this.fileInfo.extendName.toLowerCase()\r\n\t\t\t\tif (fileSuffix === 'yaml') {\r\n\t\t\t\t\tfileSuffix = 'yml'\r\n\t\t\t\t}\r\n\t\t\t\tif (this.fileSuffixCodeModeMap.has(fileSuffix)) {\r\n\t\t\t\t\tthis.codeMirrorOptions.mode =\r\n\t\t\t\t\t\tthis.fileSuffixCodeModeMap.get(fileSuffix).mime\r\n\t\t\t\t}\r\n\t\t\t\tthis.codeMirrorOptions.readOnly = !this.isEdit //  设置编辑器是否只读\r\n\t\t\t\t// codemirror 主题获取\r\n\t\t\t\tthis.codeMirrorOptions.theme =\r\n\t\t\t\t\tlocalStorage.getItem('qiwen_file_codemirror_theme') || 'default'\r\n\t\t\t\tthis.getCodeText()\r\n\t\t\t\t// 添加键盘 Esc 事件\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tdocument.addEventListener('keyup', (e) => {\r\n\t\t\t\t\t\tif (e.keyCode === 27) {\r\n\t\t\t\t\t\t\tthis.closeCodePreview()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tdocument.removeEventListener('keyup', (e) => {\r\n\t\t\t\t\tif (e.keyCode === 27) {\r\n\t\t\t\t\t\tthis.closeCodePreview()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 监听主题变化\r\n\t\t'codeMirrorOptions.theme'(val) {\r\n\t\t\tlocalStorage.setItem('qiwen_file_codemirror_theme', val)\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 获取代码文本内容\r\n\t\t */\r\n\t\tgetCodeText() {\r\n\t\t\tthis.codeMirrorLoading = true\r\n\t\t\tgetFilePreview({\r\n\t\t\t\tuserFileId: this.fileInfo.userFileId,\r\n\t\t\t\tisMin: false,\r\n\t\t\t\tshareBatchNum: this.fileInfo.shareBatchNum,\r\n\t\t\t\textractionCode: this.fileInfo.extractionCode,\r\n\t\t\t\ttoken: this.$common.getCookies(this.$config.tokenKeyName)\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tthis.codeMirrorLoading = false\r\n\t\t\t\tthis.originalCodeText =\r\n\t\t\t\t\ttypeof res.data === 'object' ? JSON.stringify(res.data) : res.data\r\n\t\t\t\tthis.codeMirrorText = this.originalCodeText + ''\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 修改代码文本内容\r\n\t\t */\r\n\t\thandleModifyFileContent() {\r\n\t\t\t// 如果没有修改，或当前为只读状态\r\n\t\t\tif (!this.isModify || this.codeMirrorOptions.readOnly) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tthis.codeMirrorLoading = true\r\n\t\t\tmodifyFileContent({\r\n\t\t\t\tuserFileId: this.fileInfo.userFileId,\r\n\t\t\t\tfileContent: this.codeMirrorText\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.codeMirrorLoading = false\r\n\t\t\t\t\tconsole.log('res====== handleModifyFileContent ===')\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\tthis.$message.success('已保存')\r\n\t\t\t\t\t\tthis.getCodeText()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.codeMirrorLoading = false\r\n\t\t\t\t\tthis.$message.error(err.message)\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * codemirror 配置项改变时触发\r\n\t\t */\r\n\t\thandleChangeCodeMirrorOption() {\r\n\t\t\tthis.isShow = false\r\n\t\t\tthis.isShow = true\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭代码预览\r\n\t\t */\r\n\t\tcloseCodePreview() {\r\n\t\t\tthis.visible = false\r\n\t\t\tthis.callback('cancel')\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~_a/styles/varibles.styl';\r\n@import '~_a/styles/mixins.styl';\r\n\r\n.code-preview-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  overflow: auto;\r\n  width: 100%;\r\n  height: 100vh;\r\n  z-index: 2;\r\n  display: flex;\r\n  align-items: center;\r\n  animation: imgPreviewAnimation 0.3s;\r\n  -webkit-animation: imgPreviewAnimation 0.3s; /* Safari and Chrome */\r\n  animation-iteration-count: 0.3;\r\n  -webkit-animation-iteration-count: 0.3;\r\n  animation-fill-mode: forwards;\r\n  -webkit-animation-fill-mode: forwards; /* Safari 和 Chrome */\r\n  @keyframes imgPreviewAnimation {\r\n    0% {\r\n      background: transparent;\r\n    }\r\n    100% {\r\n      background: rgba(0, 0, 0, 0.8);\r\n    }\r\n  }\r\n  @keyframes imgPreviewAnimation {\r\n    0% {\r\n      background: transparent;\r\n    }\r\n    100% {\r\n      background: rgba(0, 0, 0, 0.8);\r\n    }\r\n  }\r\n  .tip-wrapper {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 2;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    padding: 0 48px;\r\n    width: 100%;\r\n    height: 48px;\r\n    line-height: 48px;\r\n    color: #fff;\r\n    font-size: 16px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .name {\r\n      flex: 1;\r\n      padding-right: 16px;\r\n      text-align: left;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      .un-save {\r\n        color: $Warning;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .tool-wrapper {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      .item {\r\n        margin-left: 16px;\r\n        height: 48px;\r\n        line-height: 48px;\r\n        cursor: pointer;\r\n        &:hover {\r\n          opacity: 0.7;\r\n        }\r\n      }\r\n      .download-link {\r\n        color: inherit;\r\n        font-size: 18px;\r\n      }\r\n      .text-wrapper {\r\n        .text {\r\n          margin-right: 8px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .code-editor-wrapper {\r\n    margin: 56px auto 0 auto;\r\n    width: 90vw;\r\n    height: calc(100vh - 80px);\r\n    .operate-wrapper {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      border-radius: 8px 8px 0 0;\r\n      border-bottom: 1px solid $BorderBase;\r\n      padding: 8px 16px;\r\n      background: #fff;\r\n      .save-icon {\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        color: $Info;\r\n        font-weight: 550;\r\n        &:hover {\r\n          opacity: 0.5;\r\n        }\r\n      }\r\n      .editor-set-form {\r\n        flex: 1;\r\n        text-align: right;\r\n        >>> .el-form-item {\r\n          margin-bottom: 0;\r\n          &.font-size {\r\n            .el-form-item__content {\r\n              .el-select {\r\n                width: 96px;\r\n              }\r\n            }\r\n          }\r\n          &.lanaguage {\r\n            .el-form-item__content {\r\n              .el-select {\r\n                width: 120px;\r\n              }\r\n            }\r\n          }\r\n          &.theme {\r\n            .el-form-item__content {\r\n              .el-select {\r\n                width: 190px;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n     }\r\n    .code-editor {\r\n      height: calc(100vh - 129px);\r\n      >>> .CodeMirror {\r\n        border-radius: 0 0 8px 8px;\r\n        height: inherit;\r\n        font-size: inherit;\r\n        * {\r\n          font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace !important;\r\n        }\r\n        .CodeMirror-vscrollbar,\r\n        .CodeMirror-hscrollbar {\r\n          display: none !important;\r\n        }\r\n        .CodeMirror-scroll {\r\n          width: 100%;\r\n          padding: 8px 0 0 0;\r\n          line-height: 1.5;\r\n          font-size: inherit;\r\n          setScrollbar(12px, transparent, #C0C4CC);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}