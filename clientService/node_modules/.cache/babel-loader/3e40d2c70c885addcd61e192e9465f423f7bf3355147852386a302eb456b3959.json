{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nvar _marked = require(\"marked\");\nvar _highlight = _interopRequireDefault(require(\"highlight.js\"));\nrequire(\"highlight.js/styles/github.css\");\n// 导入 marked 库\n// 导入 highlight.js\n// 导入一个代码高亮主题（例如 GitHub 样式）\nvar _default = exports.default = {\n  name: 'MarkdownEditor',\n  data() {\n    return {\n      markdownInput: `# Hello Markdown\\n\\n这是一个 Vue 2 Markdown 编辑器。\\n\\n### 支持代码高亮\\n\\n\\`\\`\\`javascript\\nconst vue2 = 'V2';\\nconsole.log(vue2);\\n\\`\\`\\`\\n`\n    };\n  },\n  computed: {\n    // 计算属性：将 Markdown 文本转换为 HTML\n    renderedHtml() {\n      // 使用 marked.parse() 进行转换\n      return _marked.marked.parse(this.markdownInput);\n    }\n  },\n  mounted() {\n    // 初始化 marked 的配置\n    _marked.marked.setOptions({\n      // 启用 GitHub Flavored Markdown (GFM)\n      gfm: true,\n      // 自定义代码块渲染：使用 highlight.js 进行高亮\n      highlight: (code, lang) => {\n        const language = _highlight.default.getLanguage(lang) ? lang : 'plaintext';\n        return _highlight.default.highlight(code, {\n          language\n        }).value;\n      }\n    });\n\n    // 首次渲染后执行一次高亮（因为初始数据可能包含代码）\n    this.highlightCode();\n  },\n  watch: {\n    // 监听渲染后的 HTML 变化，在 DOM 更新后执行代码高亮\n    renderedHtml() {\n      // 使用 Vue 的 nextTick 确保 DOM 已经更新\n      this.$nextTick(() => {\n        this.highlightCode();\n      });\n    }\n  },\n  methods: {\n    // 确保所有代码块被正确高亮\n    highlightCode() {\n      // 获取预览区域中的所有 pre > code 元素\n      const blocks = this.$el.querySelectorAll('.preview-pane pre code');\n      blocks.forEach(block => {\n        // 告诉 highlight.js 再次扫描和高亮这个元素\n        _highlight.default.highlightElement(block);\n      });\n    }\n  }\n};","map":{"version":3,"names":["_marked","require","_highlight","_interopRequireDefault","_default","exports","default","name","data","markdownInput","computed","renderedHtml","marked","parse","mounted","setOptions","gfm","highlight","code","lang","language","hljs","getLanguage","value","highlightCode","watch","$nextTick","methods","blocks","$el","querySelectorAll","forEach","block","highlightElement"],"sources":["src/views/utils/EditText.vue"],"sourcesContent":["<template>\r\n  <div class=\"markdown-container\">\r\n    <div class=\"editor-pane\">\r\n      <textarea v-model=\"markdownInput\" placeholder=\"在此输入 Markdown...\"></textarea>\r\n    </div>\r\n    \r\n    <div class=\"preview-pane\">\r\n      <div v-html=\"renderedHtml\" class=\"markdown-body\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { marked } from 'marked'; // 导入 marked 库\r\nimport hljs from 'highlight.js'; // 导入 highlight.js\r\nimport 'highlight.js/styles/github.css'; // 导入一个代码高亮主题（例如 GitHub 样式）\r\n\r\nexport default {\r\n  name: 'MarkdownEditor',\r\n  data() {\r\n    return {\r\n      markdownInput: `# Hello Markdown\\n\\n这是一个 Vue 2 Markdown 编辑器。\\n\\n### 支持代码高亮\\n\\n\\`\\`\\`javascript\\nconst vue2 = 'V2';\\nconsole.log(vue2);\\n\\`\\`\\`\\n`\r\n    };\r\n  },\r\n  computed: {\r\n    // 计算属性：将 Markdown 文本转换为 HTML\r\n    renderedHtml() {\r\n      // 使用 marked.parse() 进行转换\r\n      return marked.parse(this.markdownInput);\r\n    }\r\n  },\r\n  mounted() {\r\n    // 初始化 marked 的配置\r\n    marked.setOptions({\r\n      // 启用 GitHub Flavored Markdown (GFM)\r\n      gfm: true,\r\n      // 自定义代码块渲染：使用 highlight.js 进行高亮\r\n      highlight: (code, lang) => {\r\n        const language = hljs.getLanguage(lang) ? lang : 'plaintext';\r\n        return hljs.highlight(code, { language }).value;\r\n      }\r\n    });\r\n    \r\n    // 首次渲染后执行一次高亮（因为初始数据可能包含代码）\r\n    this.highlightCode();\r\n  },\r\n  watch: {\r\n    // 监听渲染后的 HTML 变化，在 DOM 更新后执行代码高亮\r\n    renderedHtml() {\r\n      // 使用 Vue 的 nextTick 确保 DOM 已经更新\r\n      this.$nextTick(() => {\r\n        this.highlightCode();\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    // 确保所有代码块被正确高亮\r\n    highlightCode() {\r\n      // 获取预览区域中的所有 pre > code 元素\r\n      const blocks = this.$el.querySelectorAll('.preview-pane pre code');\r\n      blocks.forEach((block) => {\r\n        // 告诉 highlight.js 再次扫描和高亮这个元素\r\n        hljs.highlightElement(block);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.markdown-container {\r\n  display: flex;\r\n  height: 500px; /* 设置固定高度 */\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.editor-pane, .preview-pane {\r\n  flex: 1;\r\n  padding: 10px;\r\n  overflow: auto; /* 确保内容溢出时可以滚动 */\r\n}\r\n\r\n.editor-pane {\r\n  border-right: 1px solid #ccc;\r\n}\r\n\r\n.editor-pane textarea {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  resize: none;\r\n  font-family: monospace;\r\n  font-size: 14px;\r\n}\r\n\r\n.preview-pane {\r\n  /* 确保预览区域的 Markdown 样式生效 */\r\n  font-size: 16px;\r\n}\r\n\r\n/* 可以添加更多样式来美化 .markdown-body 中的内容 */\r\n</style>"],"mappings":";;;;;;;;;AAaA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACAA,OAAA;AAFA;AACA;AACA;AAAA,IAAAG,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA;IACAC,aAAA;MACA;MACA,OAAAC,cAAA,CAAAC,KAAA,MAAAJ,aAAA;IACA;EACA;EACAK,QAAA;IACA;IACAF,cAAA,CAAAG,UAAA;MACA;MACAC,GAAA;MACA;MACAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,IAAA;QACA,MAAAC,QAAA,GAAAC,kBAAA,CAAAC,WAAA,CAAAH,IAAA,IAAAA,IAAA;QACA,OAAAE,kBAAA,CAAAJ,SAAA,CAAAC,IAAA;UAAAE;QAAA,GAAAG,KAAA;MACA;IACA;;IAEA;IACA,KAAAC,aAAA;EACA;EACAC,KAAA;IACA;IACAd,aAAA;MACA;MACA,KAAAe,SAAA;QACA,KAAAF,aAAA;MACA;IACA;EACA;EACAG,OAAA;IACA;IACAH,cAAA;MACA;MACA,MAAAI,MAAA,QAAAC,GAAA,CAAAC,gBAAA;MACAF,MAAA,CAAAG,OAAA,CAAAC,KAAA;QACA;QACAX,kBAAA,CAAAY,gBAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}