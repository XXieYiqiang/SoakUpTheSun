{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nvar _marked = require(\"marked\");\nvar _highlight = _interopRequireDefault(require(\"highlight.js\"));\nrequire(\"highlight.js/styles/github.css\");\n// 1. å¯¼å…¥æ ¸å¿ƒåº“\n// 2. å¯¼å…¥é«˜äº®ä¸»é¢˜æ ·å¼ (è¿™é‡Œä½¿ç”¨ GitHub é£æ ¼ï¼Œæ‚¨å¯ä»¥æ›´æ¢)\nvar _default = exports.default = {\n  name: 'MarkdownEditor',\n  data() {\n    return {\n      // é»˜è®¤çš„ Markdown å†…å®¹ï¼ŒåŒ…å«ä»£ç å—ç¤ºä¾‹\n      markdownInput: `# ğŸ“ Vue 2 å®æ—¶ Markdown æ¸²æŸ“\n\nè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ç¼–è¾‘å™¨ç»„ä»¶ã€‚\n\n## å®æ—¶é¢„è§ˆåŠŸèƒ½\n\næ‚¨åœ¨æ­¤å¤„è¾“å…¥çš„å†…å®¹ä¼šç«‹å³åœ¨å³ä¾§æ¸²æŸ“ã€‚\n\n### åˆ—è¡¨ç¤ºä¾‹\n* åˆ—è¡¨é¡¹ A\n* åˆ—è¡¨é¡¹ B\n\n### ä»£ç é«˜äº®æ”¯æŒ\n\\`\\`\\`javascript\nfunction calculateArea(radius) {\n  const PI = 3.14159;\n  return PI * radius * radius;\n}\n\n// è°ƒç”¨å‡½æ•°\nconsole.log(calculateArea(5)); \n\\`\\`\\`\n\n---\n> è¯·æ³¨æ„ï¼šä½¿ç”¨ v-html æ¸²æŸ“ç”¨æˆ·è¾“å…¥å†…å®¹å­˜åœ¨ XSS é£é™©ï¼Œå®é™…åº”ç”¨ä¸­è¯·åšå¥½å®‰å…¨è¿‡æ»¤ã€‚\n`\n    };\n  },\n  computed: {\n    // æ ¸å¿ƒï¼šè®¡ç®—å±æ€§å®æ—¶å°† Markdown è½¬æ¢ä¸º HTML\n    renderedHtml() {\n      // marked.parse() æ‰§è¡Œè§£æï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æˆ‘ä»¬é…ç½®çš„ highlight å‡½æ•°\n      return _marked.marked.parse(this.markdownInput);\n    }\n  },\n  mounted() {\n    // é¦–æ¬¡åŠ è½½æ—¶é…ç½® marked çš„è§£æè§„åˆ™\n    this.setupMarked();\n  },\n  watch: {\n    // ç›‘å¬æ¸²æŸ“åçš„ HTML å˜åŒ–\n    renderedHtml() {\n      // åœ¨ DOM æ›´æ–°åæ‰§è¡Œä»£ç é«˜äº®ï¼Œç¡®ä¿æ–°æ¸²æŸ“çš„ä»£ç å—è¢«å¤„ç†\n      this.$nextTick(() => {\n        this.highlightCode();\n      });\n    }\n  },\n  methods: {\n    setupMarked() {\n      // é…ç½® marked é€‰é¡¹ï¼Œå°¤å…¶æ˜¯å¦‚ä½•å¤„ç†ä»£ç å—\n      _marked.marked.setOptions({\n        gfm: true,\n        // å¯ç”¨ GitHub Flavored Markdown\n        breaks: true,\n        // å¯ç”¨è‡ªåŠ¨æ¢è¡Œ\n        // è‡ªå®šä¹‰ä»£ç é«˜äº®å‡½æ•°\n        highlight: (code, lang) => {\n          const language = _highlight.default.getLanguage(lang) ? lang : 'plaintext';\n          try {\n            // ä½¿ç”¨ highlight.js è¿›è¡Œè¯­æ³•é«˜äº®\n            return _highlight.default.highlight(code, {\n              language\n            }).value;\n          } catch (error) {\n            console.error('Highlight error:', error);\n            return code; // å‡ºé”™æ—¶è¿”å›åŸå§‹å†…å®¹\n          }\n        }\n      });\n    },\n    highlightCode() {\n      // æ‰¾åˆ°é¢„è§ˆåŒºåŸŸä¸­æ‰€æœ‰æœªè¢« hljs å¤„ç†è¿‡çš„ä»£ç å…ƒç´ \n      // æ³¨æ„ï¼šç”±äºæˆ‘ä»¬åœ¨ marked é…ç½®ä¸­å·²ç»è°ƒç”¨äº† hljs.highlightï¼Œ\n      // ç†è®ºä¸Šå¤§éƒ¨åˆ†ä»£ç å—å·²è¢«å¤„ç†ã€‚è¿™é‡Œå¯ä»¥ä½œä¸ºä¿é™©æªæ–½ã€‚\n      const blocks = this.$el.querySelectorAll('.preview-pane pre code');\n      blocks.forEach(block => {\n        // å¦‚æœå…ƒç´ æ²¡æœ‰é«˜äº®ç±»ï¼Œæ‰‹åŠ¨è°ƒç”¨ highlighElement\n        if (!block.classList.contains('hljs')) {\n          _highlight.default.highlightElement(block);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["_marked","require","_highlight","_interopRequireDefault","_default","exports","default","name","data","markdownInput","computed","renderedHtml","marked","parse","mounted","setupMarked","watch","$nextTick","highlightCode","methods","setOptions","gfm","breaks","highlight","code","lang","language","hljs","getLanguage","value","error","console","blocks","$el","querySelectorAll","forEach","block","classList","contains","highlightElement"],"sources":["src/views/utils/EditText.vue"],"sourcesContent":["<template>\r\n  <div class=\"markdown-container\">\r\n    <header class=\"editor-header\">\r\n      <h3>Markdown Editor & Preview</h3>\r\n    </header>\r\n    \r\n    <div class=\"content-wrapper\">\r\n      <div class=\"editor-pane\">\r\n        <textarea \r\n          v-model=\"markdownInput\" \r\n          placeholder=\"åœ¨æ­¤è¾“å…¥ Markdown...\"\r\n          spellcheck=\"false\"\r\n        ></textarea>\r\n      </div>\r\n      \r\n      <div class=\"divider\"></div>\r\n\r\n      <div class=\"preview-pane\">\r\n        <div v-html=\"renderedHtml\" class=\"markdown-body\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 1. å¯¼å…¥æ ¸å¿ƒåº“\r\nimport { marked } from 'marked';\r\nimport hljs from 'highlight.js';\r\n// 2. å¯¼å…¥é«˜äº®ä¸»é¢˜æ ·å¼ (è¿™é‡Œä½¿ç”¨ GitHub é£æ ¼ï¼Œæ‚¨å¯ä»¥æ›´æ¢)\r\nimport 'highlight.js/styles/github.css'; \r\n\r\nexport default {\r\n  name: 'MarkdownEditor',\r\n  data() {\r\n    return {\r\n      // é»˜è®¤çš„ Markdown å†…å®¹ï¼ŒåŒ…å«ä»£ç å—ç¤ºä¾‹\r\n      markdownInput: \r\n`# ğŸ“ Vue 2 å®æ—¶ Markdown æ¸²æŸ“\r\n\r\nè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ç¼–è¾‘å™¨ç»„ä»¶ã€‚\r\n\r\n## å®æ—¶é¢„è§ˆåŠŸèƒ½\r\n\r\næ‚¨åœ¨æ­¤å¤„è¾“å…¥çš„å†…å®¹ä¼šç«‹å³åœ¨å³ä¾§æ¸²æŸ“ã€‚\r\n\r\n### åˆ—è¡¨ç¤ºä¾‹\r\n* åˆ—è¡¨é¡¹ A\r\n* åˆ—è¡¨é¡¹ B\r\n\r\n### ä»£ç é«˜äº®æ”¯æŒ\r\n\\`\\`\\`javascript\r\nfunction calculateArea(radius) {\r\n  const PI = 3.14159;\r\n  return PI * radius * radius;\r\n}\r\n\r\n// è°ƒç”¨å‡½æ•°\r\nconsole.log(calculateArea(5)); \r\n\\`\\`\\`\r\n\r\n---\r\n> è¯·æ³¨æ„ï¼šä½¿ç”¨ v-html æ¸²æŸ“ç”¨æˆ·è¾“å…¥å†…å®¹å­˜åœ¨ XSS é£é™©ï¼Œå®é™…åº”ç”¨ä¸­è¯·åšå¥½å®‰å…¨è¿‡æ»¤ã€‚\r\n`\r\n    };\r\n  },\r\n  computed: {\r\n    // æ ¸å¿ƒï¼šè®¡ç®—å±æ€§å®æ—¶å°† Markdown è½¬æ¢ä¸º HTML\r\n    renderedHtml() {\r\n      // marked.parse() æ‰§è¡Œè§£æï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æˆ‘ä»¬é…ç½®çš„ highlight å‡½æ•°\r\n      return marked.parse(this.markdownInput);\r\n    }\r\n  },\r\n  mounted() {\r\n    // é¦–æ¬¡åŠ è½½æ—¶é…ç½® marked çš„è§£æè§„åˆ™\r\n    this.setupMarked();\r\n  },\r\n  watch: {\r\n    // ç›‘å¬æ¸²æŸ“åçš„ HTML å˜åŒ–\r\n    renderedHtml() {\r\n      // åœ¨ DOM æ›´æ–°åæ‰§è¡Œä»£ç é«˜äº®ï¼Œç¡®ä¿æ–°æ¸²æŸ“çš„ä»£ç å—è¢«å¤„ç†\r\n      this.$nextTick(() => {\r\n        this.highlightCode();\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    setupMarked() {\r\n      // é…ç½® marked é€‰é¡¹ï¼Œå°¤å…¶æ˜¯å¦‚ä½•å¤„ç†ä»£ç å—\r\n      marked.setOptions({\r\n        gfm: true, // å¯ç”¨ GitHub Flavored Markdown\r\n        breaks: true, // å¯ç”¨è‡ªåŠ¨æ¢è¡Œ\r\n        // è‡ªå®šä¹‰ä»£ç é«˜äº®å‡½æ•°\r\n        highlight: (code, lang) => {\r\n          const language = hljs.getLanguage(lang) ? lang : 'plaintext';\r\n          try {\r\n            // ä½¿ç”¨ highlight.js è¿›è¡Œè¯­æ³•é«˜äº®\r\n            return hljs.highlight(code, { language }).value;\r\n          } catch (error) {\r\n            console.error('Highlight error:', error);\r\n            return code; // å‡ºé”™æ—¶è¿”å›åŸå§‹å†…å®¹\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    highlightCode() {\r\n      // æ‰¾åˆ°é¢„è§ˆåŒºåŸŸä¸­æ‰€æœ‰æœªè¢« hljs å¤„ç†è¿‡çš„ä»£ç å…ƒç´ \r\n      // æ³¨æ„ï¼šç”±äºæˆ‘ä»¬åœ¨ marked é…ç½®ä¸­å·²ç»è°ƒç”¨äº† hljs.highlightï¼Œ\r\n      // ç†è®ºä¸Šå¤§éƒ¨åˆ†ä»£ç å—å·²è¢«å¤„ç†ã€‚è¿™é‡Œå¯ä»¥ä½œä¸ºä¿é™©æªæ–½ã€‚\r\n      const blocks = this.$el.querySelectorAll('.preview-pane pre code');\r\n      blocks.forEach((block) => {\r\n        // å¦‚æœå…ƒç´ æ²¡æœ‰é«˜äº®ç±»ï¼Œæ‰‹åŠ¨è°ƒç”¨ highlighElement\r\n        if (!block.classList.contains('hljs')) {\r\n           hljs.highlightElement(block);\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* å®¹å™¨å’Œå¸ƒå±€æ ·å¼ */\r\n.markdown-container {\r\n  max-width: 1200px;\r\n  margin: 20px auto;\r\n  border: 1px solid #ddd;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.editor-header {\r\n  padding: 10px 20px;\r\n  background-color: #f8f8f8;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.content-wrapper {\r\n  display: flex;\r\n  height: 70vh; /* è®¾ç½®é«˜åº¦ï¼Œæ–¹ä¾¿ç¼–è¾‘å’Œé¢„è§ˆ */\r\n  min-height: 500px;\r\n}\r\n\r\n/* ç¼–è¾‘å’Œé¢„è§ˆé¢æ¿é€šç”¨æ ·å¼ */\r\n.editor-pane, .preview-pane {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto; /* å‚ç›´æ»šåŠ¨æ¡ */\r\n  font-size: 16px;\r\n}\r\n\r\n/* ç¼–è¾‘å™¨æ ·å¼ */\r\n.editor-pane textarea {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  outline: none;\r\n  resize: none;\r\n  font-family: 'Consolas', 'Courier New', monospace; /* ä»£ç å­—ä½“ */\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  color: #333;\r\n}\r\n\r\n/* åˆ†éš”çº¿ */\r\n.divider {\r\n  width: 1px;\r\n  background-color: #ddd;\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* é¢„è§ˆåŒºåŸŸæ ·å¼ */\r\n.preview-pane {\r\n  background-color: #fff;\r\n}\r\n\r\n/* å¼ºåˆ¶é¢„è§ˆåŒºåŸŸå†…çš„å…ƒç´ æ ·å¼ (æ¨¡æ‹Ÿ GitHub æ ·å¼ï¼Œä¿æŒæ’ç‰ˆä¸€è‡´æ€§) */\r\n.markdown-body {\r\n  /* H1 æ ·å¼ */\r\n  /* h1, h2 { border-bottom: 1px solid #eee; padding-bottom: 0.3em; } */\r\n  \r\n  /* åˆ—è¡¨æ ·å¼ */\r\n  ul, ol { padding-left: 2em; }\r\n\r\n  /* å¼•ç”¨å—æ ·å¼ */\r\n  blockquote {\r\n    margin: 0;\r\n    padding: 0 1em;\r\n    color: #6a737d;\r\n    border-left: 0.25em solid #dfe2e5;\r\n  }\r\n  \r\n  /* ä»£ç å—å®¹å™¨æ ·å¼ (ä¼šç»“åˆ highlight.js çš„ä¸»é¢˜æ ·å¼) */\r\n  pre {\r\n    background-color: #f6f8fa; /* ä»£ç å—èƒŒæ™¯ */\r\n    padding: 16px;\r\n    overflow: auto;\r\n    line-height: 1.45;\r\n    border-radius: 6px;\r\n  }\r\n  \r\n  /* è¡Œå†…ä»£ç æ ·å¼ */\r\n  code {\r\n    padding: 0.2em 0.4em;\r\n    margin: 0;\r\n    font-size: 85%;\r\n    background-color: rgba(27,31,35,.05);\r\n    border-radius: 6px;\r\n    font-family: 'Consolas', 'Courier New', monospace;\r\n  }\r\n  \r\n  pre code {\r\n    background-color: transparent;\r\n    padding: 0;\r\n  }\r\n}\r\n</style>"],"mappings":";;;;;;;;;AA0BA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEAA,OAAA;AAJA;AAGA;AAAA,IAAAG,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,aAAA,EACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;IACA;EACA;EACAC,QAAA;IACA;IACAC,aAAA;MACA;MACA,OAAAC,cAAA,CAAAC,KAAA,MAAAJ,aAAA;IACA;EACA;EACAK,QAAA;IACA;IACA,KAAAC,WAAA;EACA;EACAC,KAAA;IACA;IACAL,aAAA;MACA;MACA,KAAAM,SAAA;QACA,KAAAC,aAAA;MACA;IACA;EACA;EACAC,OAAA;IACAJ,YAAA;MACA;MACAH,cAAA,CAAAQ,UAAA;QACAC,GAAA;QAAA;QACAC,MAAA;QAAA;QACA;QACAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,IAAA;UACA,MAAAC,QAAA,GAAAC,kBAAA,CAAAC,WAAA,CAAAH,IAAA,IAAAA,IAAA;UACA;YACA;YACA,OAAAE,kBAAA,CAAAJ,SAAA,CAAAC,IAAA;cAAAE;YAAA,GAAAG,KAAA;UACA,SAAAC,KAAA;YACAC,OAAA,CAAAD,KAAA,qBAAAA,KAAA;YACA,OAAAN,IAAA;UACA;QACA;MACA;IACA;IAEAN,cAAA;MACA;MACA;MACA;MACA,MAAAc,MAAA,QAAAC,GAAA,CAAAC,gBAAA;MACAF,MAAA,CAAAG,OAAA,CAAAC,KAAA;QACA;QACA,KAAAA,KAAA,CAAAC,SAAA,CAAAC,QAAA;UACAX,kBAAA,CAAAY,gBAAA,CAAAH,KAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}