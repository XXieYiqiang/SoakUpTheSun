{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nvar _default = exports.default = {\n  name: \"SFURoom\",\n  data() {\n    return {\n      wsUrl: \"ws://192.168.43.143:8080/room/join\",\n      roomID: \"KLnUfpX8miP5T7EzvrBEEB\",\n      uid: \"user_\" + Math.floor(Math.random() * 10000),\n      tokenInfo: 'tokenInfo',\n      joined: false,\n      loading: false,\n      ws: null,\n      logs: [],\n      focusId: 'local',\n      // 当前大屏显示的ID\n\n      // 推流\n      localStream: null,\n      upPC: null,\n      // 拉流核心逻辑 (保持不变)\n      downPC: null,\n      negotiating: false,\n      offerQueue: [],\n      pendingCandidates: [],\n      // 远端流\n      remoteStreams: {}\n    };\n  },\n  watch: {\n    // 确保本地流在 DOM 更新后挂载到所有本地 video 标签\n    joined(val) {\n      if (val) {\n        this.$nextTick(() => {\n          this.updateLocalVideos();\n        });\n      }\n    }\n  },\n  mounted() {\n    // 获取跳转时传入的 roomID 和 token\n    const roomID = this.$route.params.roomID;\n    const tokenInfo = this.$route.params.token;\n    console.log('当前房间ID:', roomID);\n    console.log('当前Token:', tokenInfo);\n    if (roomID && tokenInfo) {\n      this.roomID = roomID;\n      this.tokenInfo = tokenInfo;\n    } else {\n      console.error('参数丢失，无法进入聊天室');\n    }\n  },\n  methods: {\n    log(msg) {\n      const t = new Date().toLocaleTimeString();\n      this.logs.unshift(`[${t}] ${msg}`);\n      if (this.logs.length > 20) this.logs.pop();\n    },\n    updateLocalVideos() {\n      if (this.localStream) {\n        if (this.$refs.focusLocalVideo) this.$refs.focusLocalVideo.srcObject = this.localStream;\n        if (this.$refs.miniLocalVideo) this.$refs.miniLocalVideo.srcObject = this.localStream;\n      }\n    },\n    async joinRoom() {\n      this.loading = true;\n      try {\n        this.localStream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n        this.connectWS();\n      } catch (e) {\n        alert(\"获取媒体失败: \" + e.message);\n        this.loading = false;\n      }\n    },\n    connectWS() {\n      const url = `${this.wsUrl}?roomID=${this.roomID}&uid=${this.uid}`;\n      this.ws = new WebSocket(url);\n      this.ws.onopen = () => {\n        this.joined = true;\n        this.loading = false;\n        this.log(\"信令连接成功\");\n        this.createUpPC();\n      };\n      this.ws.onmessage = e => this.handleSignal(JSON.parse(e.data));\n      this.ws.onclose = () => this.leaveRoom(false);\n    },\n    sendSignal(event, data) {\n      if (this.ws?.readyState === WebSocket.OPEN) {\n        this.ws.send(JSON.stringify({\n          event,\n          data\n        }));\n      }\n    },\n    async handleSignal({\n      event,\n      data\n    }) {\n      switch (event) {\n        case \"up_answer\":\n          await this.upPC.setRemoteDescription({\n            type: \"answer\",\n            sdp: data.sdp\n          });\n          this.log(\"推流成功\");\n          break;\n        case \"up_candidate\":\n          this.upPC && this.upPC.addIceCandidate(data.candidate);\n          break;\n        case \"down_offer\":\n          this.offerQueue.push(data);\n          this.tryProcessOffer();\n          break;\n        case \"down_candidate\":\n          this.handleDownCandidate(data.candidate);\n          break;\n        case \"unpublish_stream\":\n        case \"user_leave\":\n          this.removeRemote(data.publisherId || data.uid);\n          break;\n      }\n    },\n    async createUpPC() {\n      this.upPC = new RTCPeerConnection({\n        iceServers: [{\n          urls: \"stun:stun.l.google.com:19302\"\n        }]\n      });\n      this.localStream.getTracks().forEach(t => this.upPC.addTrack(t, this.localStream));\n      this.upPC.onicecandidate = e => {\n        e.candidate && this.sendSignal(\"up_candidate\", {\n          candidate: e.candidate\n        });\n      };\n      const offer = await this.upPC.createOffer();\n      await this.upPC.setLocalDescription(offer);\n      this.sendSignal(\"up_offer\", {\n        uid: this.uid,\n        sdp: offer.sdp\n      });\n    },\n    initDownPC() {\n      if (this.downPC) return;\n      this.downPC = new RTCPeerConnection({\n        iceServers: [{\n          urls: \"stun:stun.l.google.com:19302\"\n        }]\n      });\n      this.downPC.onicecandidate = e => {\n        e.candidate && this.sendSignal(\"down_candidate\", {\n          candidate: e.candidate\n        });\n      };\n      this.downPC.ontrack = e => {\n        const stream = e.streams[0];\n        if (!stream) return;\n        const uid = stream.id;\n        if (!this.remoteStreams[uid]) {\n          this.$set(this.remoteStreams, uid, stream);\n          this.log(`订阅到 ${uid}`);\n        }\n      };\n    },\n    async tryProcessOffer() {\n      if (this.negotiating || this.offerQueue.length === 0) return;\n      this.negotiating = true;\n      const offer = this.offerQueue.shift();\n      try {\n        this.initDownPC();\n        await this.downPC.setRemoteDescription({\n          type: \"offer\",\n          sdp: offer.sdp\n        });\n        while (this.pendingCandidates.length) {\n          await this.downPC.addIceCandidate(new RTCIceCandidate(this.pendingCandidates.shift()));\n        }\n        const answer = await this.downPC.createAnswer();\n        await this.downPC.setLocalDescription(answer);\n        this.sendSignal(\"down_answer\", {\n          sdp: answer.sdp\n        });\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this.negotiating = false;\n        setTimeout(() => this.tryProcessOffer(), 0);\n      }\n    },\n    async handleDownCandidate(cand) {\n      if (!this.downPC || !this.downPC.remoteDescription) {\n        this.pendingCandidates.push(cand);\n        return;\n      }\n      try {\n        await this.downPC.addIceCandidate(new RTCIceCandidate(cand));\n      } catch {}\n    },\n    removeRemote(uid) {\n      if (this.remoteStreams[uid]) {\n        this.$delete(this.remoteStreams, uid);\n        if (this.focusId === uid) this.focusId = 'local';\n        this.log(`用户 ${uid} 离开`);\n      }\n    },\n    leaveRoom(closeWs = true) {\n      this.joined = false;\n      this.focusId = 'local';\n      this.offerQueue = [];\n      this.pendingCandidates = [];\n      this.upPC && this.upPC.close();\n      this.downPC && this.downPC.close();\n      if (this.localStream) {\n        this.localStream.getTracks().forEach(t => t.stop());\n      }\n      if (closeWs && this.ws) this.ws.close();\n      this.upPC = this.downPC = this.ws = this.localStream = null;\n      this.remoteStreams = {};\n      this.log(\"已退出\");\n    }\n  },\n  beforeDestroy() {\n    this.leaveRoom();\n  }\n};","map":{"version":3,"names":["name","data","wsUrl","roomID","uid","Math","floor","random","tokenInfo","joined","loading","ws","logs","focusId","localStream","upPC","downPC","negotiating","offerQueue","pendingCandidates","remoteStreams","watch","val","$nextTick","updateLocalVideos","mounted","$route","params","token","console","log","error","methods","msg","t","Date","toLocaleTimeString","unshift","length","pop","$refs","focusLocalVideo","srcObject","miniLocalVideo","joinRoom","navigator","mediaDevices","getUserMedia","video","audio","connectWS","e","alert","message","url","WebSocket","onopen","createUpPC","onmessage","handleSignal","JSON","parse","onclose","leaveRoom","sendSignal","event","readyState","OPEN","send","stringify","setRemoteDescription","type","sdp","addIceCandidate","candidate","push","tryProcessOffer","handleDownCandidate","removeRemote","publisherId","RTCPeerConnection","iceServers","urls","getTracks","forEach","addTrack","onicecandidate","offer","createOffer","setLocalDescription","initDownPC","ontrack","stream","streams","id","$set","shift","RTCIceCandidate","answer","createAnswer","setTimeout","cand","remoteDescription","$delete","closeWs","close","stop","beforeDestroy"],"sources":["src/views/ChatRoom.vue"],"sourcesContent":["<template>\r\n  <div class=\"sfu-room\">\r\n    <header class=\"glass-card header-bar\">\r\n      <div class=\"brand\">\r\n        <div class=\"live-dot\" :class=\"{ active: joined }\"></div>\r\n        <h2 class=\"title\">SFU Pro <span class=\"subtitle\">Video Meeting</span></h2>\r\n      </div>\r\n      <div v-if=\"joined\" class=\"room-stats\">\r\n        <span class=\"badge\">房间: {{ roomID }}</span>\r\n        <span class=\"badge\">用户: {{ uid }}</span>\r\n        <button class=\"btn-danger\" @click=\"leaveRoom\">离开会议</button>\r\n      </div>\r\n    </header>\r\n\r\n    <div v-if=\"!joined\" class=\"login-container\">\r\n      <div class=\"glass-card login-box\">\r\n        <h3>加入会议</h3>\r\n        <div class=\"input-group\">\r\n          <input v-model=\"roomID\" placeholder=\"房间号\" />\r\n          <input v-model=\"uid\" placeholder=\"您的昵称\" />\r\n          <input v-model=\"tokenInfo\" placeholder=\"TokenInfo\" />\r\n        </div>\r\n        <button class=\"btn-primary\" @click=\"joinRoom\" :disabled=\"loading\">\r\n          {{ loading ? '正在进入...' : '立即加入' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <main v-else class=\"meeting-area\">\r\n      <div class=\"layout-grid\">\r\n\r\n        <section class=\"main-stage glass-card\">\r\n          <div class=\"stage-content\">\r\n            <div class=\"video-wrapper\">\r\n              <video v-show=\"focusId === 'local'\" ref=\"focusLocalVideo\" autoplay muted playsinline class=\"mirror\">\r\n              </video>\r\n              <video v-for=\"(stream, remoteUid) in remoteStreams\" :key=\"'focus-' + remoteUid\"\r\n                v-show=\"focusId === remoteUid\" :src-object.prop=\"stream\" autoplay playsinline>\r\n              </video>\r\n              <div class=\"stage-info\">\r\n                <span class=\"talking-name\">正在观看: {{ focusId === 'local' ? '我' : focusId }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <aside class=\"side-gallery\">\r\n          <div class=\"gallery-grid\">\r\n            <div class=\"mini-card glass-card\" :class=\"{ 'is-focus': focusId === 'local' }\" @click=\"focusId = 'local'\">\r\n              <video ref=\"miniLocalVideo\" autoplay muted playsinline class=\"mirror\"></video>\r\n              <div class=\"mini-label\">我</div>\r\n            </div>\r\n\r\n            <div v-for=\"(stream, remoteUid) in remoteStreams\" :key=\"'mini-' + remoteUid\" class=\"mini-card glass-card\"\r\n              :class=\"{ 'is-focus': focusId === remoteUid }\" @click=\"focusId = remoteUid\">\r\n              <video :src-object.prop=\"stream\" autoplay playsinline></video>\r\n              <div class=\"mini-label\">{{ remoteUid }}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"mini-logs glass-card\">\r\n            <div class=\"log-header\">系统日志</div>\r\n            <div class=\"log-content\">\r\n              <div v-for=\"(l, i) in logs\" :key=\"i\" class=\"log-item\">{{ l }}</div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SFURoom\",\r\n  data() {\r\n    return {\r\n      wsUrl: \"ws://192.168.43.143:8080/room/join\",\r\n      roomID: \"KLnUfpX8miP5T7EzvrBEEB\",\r\n      uid: \"user_\" + Math.floor(Math.random() * 10000),\r\n      tokenInfo: 'tokenInfo',\r\n\r\n      joined: false,\r\n      loading: false,\r\n      ws: null,\r\n      logs: [],\r\n      focusId: 'local', // 当前大屏显示的ID\r\n\r\n      // 推流\r\n      localStream: null,\r\n      upPC: null,\r\n\r\n      // 拉流核心逻辑 (保持不变)\r\n      downPC: null,\r\n      negotiating: false,\r\n      offerQueue: [],\r\n      pendingCandidates: [],\r\n\r\n      // 远端流\r\n      remoteStreams: {}\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    // 确保本地流在 DOM 更新后挂载到所有本地 video 标签\r\n    joined(val) {\r\n      if (val) {\r\n        this.$nextTick(() => {\r\n          this.updateLocalVideos();\r\n        });\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 获取跳转时传入的 roomID 和 token\r\n    const roomID = this.$route.params.roomID;\r\n    const tokenInfo = this.$route.params.token;\r\n\r\n    console.log('当前房间ID:', roomID);\r\n    console.log('当前Token:', tokenInfo);\r\n\r\n    if (roomID && tokenInfo) {\r\n      this.roomID = roomID;\r\n      this.tokenInfo = tokenInfo;\r\n    } else {\r\n      console.error('参数丢失，无法进入聊天室');\r\n    }\r\n  },\r\n  methods: {\r\n    log(msg) {\r\n      const t = new Date().toLocaleTimeString();\r\n      this.logs.unshift(`[${t}] ${msg}`);\r\n      if (this.logs.length > 20) this.logs.pop();\r\n    },\r\n\r\n    updateLocalVideos() {\r\n      if (this.localStream) {\r\n        if (this.$refs.focusLocalVideo) this.$refs.focusLocalVideo.srcObject = this.localStream;\r\n        if (this.$refs.miniLocalVideo) this.$refs.miniLocalVideo.srcObject = this.localStream;\r\n      }\r\n    },\r\n\r\n    async joinRoom() {\r\n      this.loading = true;\r\n      try {\r\n        this.localStream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n          audio: true\r\n        });\r\n        this.connectWS();\r\n      } catch (e) {\r\n        alert(\"获取媒体失败: \" + e.message);\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    connectWS() {\r\n      const url = `${this.wsUrl}?roomID=${this.roomID}&uid=${this.uid}`;\r\n      this.ws = new WebSocket(url);\r\n      this.ws.onopen = () => {\r\n        this.joined = true;\r\n        this.loading = false;\r\n        this.log(\"信令连接成功\");\r\n        this.createUpPC();\r\n      };\r\n      this.ws.onmessage = e => this.handleSignal(JSON.parse(e.data));\r\n      this.ws.onclose = () => this.leaveRoom(false);\r\n    },\r\n\r\n    sendSignal(event, data) {\r\n      if (this.ws?.readyState === WebSocket.OPEN) {\r\n        this.ws.send(JSON.stringify({ event, data }));\r\n      }\r\n    },\r\n\r\n    async handleSignal({ event, data }) {\r\n      switch (event) {\r\n        case \"up_answer\":\r\n          await this.upPC.setRemoteDescription({ type: \"answer\", sdp: data.sdp });\r\n          this.log(\"推流成功\");\r\n          break;\r\n        case \"up_candidate\":\r\n          this.upPC && this.upPC.addIceCandidate(data.candidate);\r\n          break;\r\n        case \"down_offer\":\r\n          this.offerQueue.push(data);\r\n          this.tryProcessOffer();\r\n          break;\r\n        case \"down_candidate\":\r\n          this.handleDownCandidate(data.candidate);\r\n          break;\r\n        case \"unpublish_stream\":\r\n        case \"user_leave\":\r\n          this.removeRemote(data.publisherId || data.uid);\r\n          break;\r\n      }\r\n    },\r\n\r\n    async createUpPC() {\r\n      this.upPC = new RTCPeerConnection({\r\n        iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }]\r\n      });\r\n      this.localStream.getTracks().forEach(t => this.upPC.addTrack(t, this.localStream));\r\n      this.upPC.onicecandidate = e => {\r\n        e.candidate && this.sendSignal(\"up_candidate\", { candidate: e.candidate });\r\n      };\r\n      const offer = await this.upPC.createOffer();\r\n      await this.upPC.setLocalDescription(offer);\r\n      this.sendSignal(\"up_offer\", { uid: this.uid, sdp: offer.sdp });\r\n    },\r\n\r\n    initDownPC() {\r\n      if (this.downPC) return;\r\n      this.downPC = new RTCPeerConnection({\r\n        iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }]\r\n      });\r\n      this.downPC.onicecandidate = e => {\r\n        e.candidate && this.sendSignal(\"down_candidate\", { candidate: e.candidate });\r\n      };\r\n      this.downPC.ontrack = e => {\r\n        const stream = e.streams[0];\r\n        if (!stream) return;\r\n        const uid = stream.id;\r\n        if (!this.remoteStreams[uid]) {\r\n          this.$set(this.remoteStreams, uid, stream);\r\n          this.log(`订阅到 ${uid}`);\r\n        }\r\n      };\r\n    },\r\n\r\n    async tryProcessOffer() {\r\n      if (this.negotiating || this.offerQueue.length === 0) return;\r\n      this.negotiating = true;\r\n      const offer = this.offerQueue.shift();\r\n      try {\r\n        this.initDownPC();\r\n        await this.downPC.setRemoteDescription({ type: \"offer\", sdp: offer.sdp });\r\n        while (this.pendingCandidates.length) {\r\n          await this.downPC.addIceCandidate(new RTCIceCandidate(this.pendingCandidates.shift()));\r\n        }\r\n        const answer = await this.downPC.createAnswer();\r\n        await this.downPC.setLocalDescription(answer);\r\n        this.sendSignal(\"down_answer\", { sdp: answer.sdp });\r\n      } catch (e) {\r\n        console.error(e);\r\n      } finally {\r\n        this.negotiating = false;\r\n        setTimeout(() => this.tryProcessOffer(), 0);\r\n      }\r\n    },\r\n\r\n    async handleDownCandidate(cand) {\r\n      if (!this.downPC || !this.downPC.remoteDescription) {\r\n        this.pendingCandidates.push(cand);\r\n        return;\r\n      }\r\n      try { await this.downPC.addIceCandidate(new RTCIceCandidate(cand)); } catch { }\r\n    },\r\n\r\n    removeRemote(uid) {\r\n      if (this.remoteStreams[uid]) {\r\n        this.$delete(this.remoteStreams, uid);\r\n        if (this.focusId === uid) this.focusId = 'local';\r\n        this.log(`用户 ${uid} 离开`);\r\n      }\r\n    },\r\n\r\n    leaveRoom(closeWs = true) {\r\n      this.joined = false;\r\n      this.focusId = 'local';\r\n      this.offerQueue = [];\r\n      this.pendingCandidates = [];\r\n      this.upPC && this.upPC.close();\r\n      this.downPC && this.downPC.close();\r\n      if (this.localStream) {\r\n        this.localStream.getTracks().forEach(t => t.stop());\r\n      }\r\n      if (closeWs && this.ws) this.ws.close();\r\n      this.upPC = this.downPC = this.ws = this.localStream = null;\r\n      this.remoteStreams = {};\r\n      this.log(\"已退出\");\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.leaveRoom();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 修改和新增的样式 */\r\n\r\n.main-stage {\r\n  position: relative;\r\n  background: #0a0a0a;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px;\r\n  /* 增加内边距，使中间视频不顶格 */\r\n  background: radial-gradient(circle, #2a2a2a 0%, #000000 100%);\r\n}\r\n\r\n.stage-content {\r\n  width: 100%;\r\n  height: 100%;\r\n  max-width: 90%;\r\n  /* 宽度最大占用 90%，留出呼吸感 */\r\n  max-height: 90%;\r\n  /* 高度最大占用 90% */\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.video-wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  box-shadow: 0 20px 50px fff(0, 0, 0, 0.5);\r\n  /* 给大屏增加阴影层级 */\r\n  border-radius: 30px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.main-stage video {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: contain;\r\n  /* 确保画面比例不失真且居中 */\r\n}\r\n\r\n/* 优化右侧缩略图间距 */\r\n.gallery-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 12px;\r\n  /* 稍微加大间距 */\r\n  overflow-y: auto;\r\n  padding: 4px;\r\n}\r\n\r\n.mini-card {\r\n  position: relative;\r\n  aspect-ratio: 16/9;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  border-radius: 20px;\r\n  /* 圆角配合大屏 */\r\n  border: 2px solid transparent;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.mini-card:hover {\r\n  transform: scale(1.02);\r\n}\r\n\r\n.mini-card.is-focus {\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 0 10px rgba(79, 70, 229, 0.3);\r\n}\r\n\r\n/* 基础容器 */\r\n.sfu-room {\r\n  --primary-color: #4f46e5;\r\n  --bg-color: #0f172a;\r\n  --glass-bg: rgba(255, 255, 255, 0.05);\r\n  --glass-border: rgba(255, 255, 255, 0.1);\r\n\r\n  min-height: 100vh;\r\n  background: var(--bg-color);\r\n  color: #f8fafc;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* 玻璃拟态卡片 */\r\n.glass-card {\r\n  background: var(--glass-bg);\r\n  backdrop-filter: blur(12px);\r\n  border: 1px solid var(--glass-border);\r\n  border-radius: 12px;\r\n}\r\n\r\n/* 顶部栏 */\r\n.header-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 20px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.brand {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.live-dot {\r\n  width: 10px;\r\n  height: 10px;\r\n  background: #64748b;\r\n  border-radius: 50%;\r\n}\r\n\r\n.live-dot.active {\r\n  background: #10b981;\r\n  box-shadow: 0 0 10px #10b981;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.title {\r\n  font-size: 1.1rem;\r\n  margin: 0;\r\n}\r\n\r\n.subtitle {\r\n  color: #94a3b8;\r\n  font-weight: normal;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.badge {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  padding: 4px 10px;\r\n  border-radius: 6px;\r\n  font-size: 0.8rem;\r\n  margin-right: 10px;\r\n}\r\n\r\n/* 登录框 */\r\n.login-container {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.login-box {\r\n  width: 320px;\r\n  padding: 30px;\r\n  text-align: center;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  margin: 20px 0;\r\n}\r\n\r\ninput {\r\n  background: rgba(0, 0, 0, 0.2);\r\n  border: 1px solid var(--glass-border);\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  color: white;\r\n  outline: none;\r\n}\r\n\r\nbutton {\r\n  cursor: pointer;\r\n  border: none;\r\n  transition: 0.2s;\r\n}\r\n\r\n.btn-primary {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  width: 100%;\r\n}\r\n\r\n.btn-danger {\r\n  background: #ef4444;\r\n  color: white;\r\n  padding: 6px 14px;\r\n  border-radius: 6px;\r\n}\r\n\r\n/* 布局网格 */\r\n.meeting-area {\r\n  flex: 1;\r\n  min-height: 0;\r\n}\r\n\r\n.layout-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 360px;\r\n  /* 大屏 + 侧边栏宽度 */\r\n  gap: 16px;\r\n  height: 100%;\r\n}\r\n\r\n/* 主舞台 */\r\n.main-stage {\r\n  position: relative;\r\n  /* background: #fff; */\r\n  /* background: radial-gradient(circle, #2a2a2a 0%, #fff 100%); */\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.video-wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.main-stage video {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n}\r\n\r\n.stage-info {\r\n  position: absolute;\r\n  bottom: 16px;\r\n  left: 16px;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  padding: 4px 12px;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* 侧边缩略图网格 */\r\n.side-gallery {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  min-height: 0;\r\n}\r\n\r\n.gallery-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  /* 关键：一行两个 */\r\n  gap: 8px;\r\n  overflow-y: auto;\r\n  padding-right: 4px;\r\n}\r\n\r\n.mini-card {\r\n  position: relative;\r\n  aspect-ratio: 16/9;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.mini-card.is-focus {\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.mini-card video {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.mini-label {\r\n  position: absolute;\r\n  bottom: 4px;\r\n  left: 4px;\r\n  font-size: 10px;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  padding: 1px 4px;\r\n  border-radius: 2px;\r\n}\r\n\r\n/* 日志区 */\r\n.mini-logs {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 120px;\r\n  max-height: 200px;\r\n  font-size: 0.75rem;\r\n}\r\n\r\n.log-header {\r\n  padding: 8px;\r\n  border-bottom: 1px solid var(--glass-border);\r\n  color: #94a3b8;\r\n}\r\n\r\n.log-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 8px;\r\n  font-family: monospace;\r\n}\r\n\r\n.log-item {\r\n  margin-bottom: 4px;\r\n  color: #cbd5e1;\r\n}\r\n\r\n/* 辅助类 */\r\n.mirror {\r\n  transform: scaleX(-1);\r\n  border-radius: 10px;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n\r\n  50% {\r\n    opacity: 0.5;\r\n  }\r\n\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* 响应式：屏幕太小时侧边栏移到下面 */\r\n@media (max-width: 1000px) {\r\n  .layout-grid {\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 1fr 200px;\r\n  }\r\n\r\n  .side-gallery {\r\n    flex-direction: row;\r\n  }\r\n\r\n  .gallery-grid {\r\n    grid-template-columns: repeat(10, 160px);\r\n    display: flex;\r\n  }\r\n\r\n  .mini-logs {\r\n    display: none;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}