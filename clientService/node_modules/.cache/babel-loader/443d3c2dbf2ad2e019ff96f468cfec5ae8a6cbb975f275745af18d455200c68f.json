{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nexport default {\n  name: 'FileTimeLine',\n  props: {\n    // 文件列表\n    fileList: {\n      required: true,\n      type: Array\n    }\n  },\n  data() {\n    return {\n      reverse: true\n    };\n  },\n  computed: {\n    //  按年-月-日分组排序\n    imageTimelineData() {\n      let res = [];\n      //  去重，获取返回的所有日期年-月-日\n      let uploadTimeSet = new Set(this.fileList.map(item => item.uploadTime.split(' ')[0]));\n      let uploadDate = [...uploadTimeSet];\n      //  分组\n      uploadDate.forEach(element => {\n        res.push({\n          uploadDate: element,\n          imageList: this.fileList.filter(item => item.uploadTime.split(' ')[0] === element) //  过滤\n        });\n      });\n      return res;\n    },\n    // 图标大小\n    gridSize() {\n      return this.$store.getters.gridSize;\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return this.$store.state.common.screenWidth;\n    }\n  },\n  methods: {\n    /**\r\n     * 文件鼠标右键事件\r\n     * @param {object} item 文件信息\r\n     * @param {number} index 文件索引\r\n     * @param {object} event 鼠标事件信息\r\n     */\n    handleContextMenu(item, index, event) {\n      // 阻止右键事件冒泡\n      event.cancelBubble = true;\n      // xs 以上的屏幕\n      if (this.screenWidth > 768) {\n        this.selectedFile = item;\n        if (!this.isBatchOperation) {\n          event.preventDefault();\n          this.$openBox.contextMenu({\n            selectedFile: item,\n            domEvent: event\n          }).then(res => {\n            this.selectedFile = {};\n            if (res === 'confirm') {\n              this.$emit('getTableDataByType'); //  刷新文件列表\n              this.$store.dispatch('showStorage'); //  刷新存储容量\n            }\n          });\n        }\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}