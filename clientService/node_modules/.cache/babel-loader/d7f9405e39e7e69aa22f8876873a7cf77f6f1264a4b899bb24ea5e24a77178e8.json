{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/front/gim-chat/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nvar _vue = _interopRequireDefault(require(\"vue\"));\nvar _index = _interopRequireDefault(require(\"@/router/index\"));\nvar _index2 = _interopRequireDefault(require(\"@/config/index.js\"));\nvar _elementUi = require(\"element-ui\");\nvar _map = require(\"@/libs/map.js\");\n// 全局函数 - 文件相关\nconst fileFunction = {\n  /**\r\n   * 格式化文件大小\r\n   * @param {number} size 文件大小\r\n   * @param {boolean} isInteger 是否只显示整数位，默认不截取\r\n   * @returns {string} 文件大小（带单位）\r\n   */\n  calculateFileSize(size, isInteger = false) {\n    const B = 1024;\n    const KB = Math.pow(1024, 2);\n    const MB = Math.pow(1024, 3);\n    const GB = Math.pow(1024, 4);\n    if (isInteger) {\n      // 截取为整数\n      if (size < B) {\n        return `${size}B`;\n      } else if (size < KB) {\n        return `${(size / B).toFixed(0)}KB`;\n      } else if (size < MB) {\n        return `${(size / KB).toFixed(0)}MB`;\n      } else if (size < GB) {\n        return `${(size / MB).toFixed(0)}GB`;\n      } else {\n        return `${(size / GB).toFixed(0)}TB`;\n      }\n    } else {\n      // 保留小数位\n      if (size < B) {\n        return `${size}B`;\n      } else if (size < KB) {\n        return `${(size / B).toFixed(0)}KB`;\n      } else if (size < MB) {\n        return `${(size / KB).toFixed(1)}MB`;\n      } else if (size < GB) {\n        return `${(size / MB).toFixed(2)}GB`;\n      } else {\n        return `${(size / GB).toFixed(3)}TB`;\n      }\n    }\n  },\n  /**\r\n   * 获取流式的缩略图、视频封面图\r\n   * @param {object} row 文件信息\r\n   * @returns {string} 流式图片\r\n   */\n  getMinImgStream(row) {\n    return `${_index2.default.baseContext}/filetransfer/preview?userFileId=${row.userFileId}&isMin=true&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`;\n  },\n  /**\r\n   * 获取文件查看路径\r\n   * @param {object} row 文件信息\r\n   * @returns {string} 文件路径\r\n   */\n  getViewFilePath(row) {\n    if (row.sourceType === undefined || row.sourceType === '' || row.sourceType === null) {\n      row.sourceType = '0';\n    }\n    if (row.sourceType === '0') {\n      return `${_index2.default.baseContext}/filetransfer/preview?userFileId=${row.userFileId}&isMin=false&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`;\n    } else {\n      //兼容知识库文件预览\n      return `${_index2.default.baseContext}/vectorFileInfo/preview?userFileId=${row.userFileId}\n\t\t\t\t&isMin=false&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum}\n\t\t\t\t&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}\n\t\t\t\t&id=${row.id != null && row.id != undefined ? row.id : ''}`; // 条件添加 id 参数\n    }\n  },\n  /**\r\n   * 获取文件下载路径\r\n   * @param {object} row 文件信息\r\n   * @returns {string}  文件下载路径\r\n   */\n  getDownloadFilePath(row) {\n    return `${_index2.default.baseContext}/filetransfer/downloadfile?userFileId=${row.userFileId}&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`;\n  },\n  /**\r\n   * 获取 Onlyoffice 文件创建路径\r\n   * @param {object} row\r\n   * @returns {string} office 文件创建路径\r\n   */\n  createFileOnlineByOffice(data) {\n    let fileUrl = `${location.protocol}//${location.host}${_index2.default.baseContext}`;\n    const {\n      href\n    } = _index.default.resolve({\n      name: 'Onlyoffice',\n      query: {\n        fileUrl: fileUrl,\n        fileName: data.fileName,\n        filePath: data.filePath,\n        extendName: data.extendName,\n        ot: 'add'\n      }\n    });\n    window.open(href, '_blank');\n  },\n  /**\r\n   * 获取 Onlyoffice 文件在线预览路径\r\n   * @param {object} row\r\n   * @returns {string} office 文件在线预览路径\r\n   */\n  getFileOnlineViewPathByOffice(row) {\n    let userFileId = row.userFileId;\n    const {\n      href\n    } = _index.default.resolve({\n      name: 'Onlyoffice',\n      query: {\n        userFileId: userFileId,\n        ot: 'detail'\n      }\n    });\n    window.open(href, '_blank');\n  },\n  /**\r\n   * 获取 Onlyoffice 文件在线编辑路径\r\n   * @param {object} row\r\n   * @returns {string} office 文件在线编辑路径\r\n   */\n  getFileOnlineEditPathByOffice(row) {\n    let userFileId = row.userFileId;\n    const {\n      href\n    } = _index.default.resolve({\n      name: 'Onlyoffice',\n      query: {\n        userFileId: userFileId,\n        ot: 'edit'\n      }\n    });\n    window.open(href, '_blank');\n  },\n  /**\r\n   * 获取分享链接\r\n   * @param {string} shareBatchNum\r\n   * @returns {string} 完整的分享链接\r\n   */\n  getShareLink(shareBatchNum) {\n    return `${location.protocol}//${location.host}/share/${shareBatchNum}`;\n  },\n  /**\r\n   * 复制分享链接\r\n   * @param {string} shareBatchNum\r\n   * @param {string} extractionCode\r\n   */\n  copyShareLink(shareBatchNum, extractionCode) {\n    let input = document.createElement('textarea'); // 直接构建textarea以保持换行\n    input.value = extractionCode === null ? `分享链接：${this.getShareLink(shareBatchNum)}\\n复制链接到浏览器中并输入提取码即可查看文件` : `分享链接：${this.getShareLink(shareBatchNum)}\\n提取码：${extractionCode}\\n复制链接到浏览器中并输入提取码即可查看文件`; // 设置内容\n    document.body.appendChild(input); // 添加临时实例\n    input.select(); // 选择实例内容\n    document.execCommand('Copy'); // 执行复制\n    document.body.removeChild(input); // 删除临时实例\n    _elementUi.Message.success('复制成功');\n  },\n  /**\r\n   * 根据文件扩展名设置文件图片\r\n   * @param {object} file 文件信息\r\n   */\n  setFileImg(file) {\n    if (file.isDir === 1) {\n      //  文件夹\n      return _map.fileImgMap.get('dir');\n    } else if (Number(_index.default.currentRoute.query.fileType) !== 6 && ['jpg', 'png', 'jpeg', 'gif', 'mp4'].includes(file.extendName.toLowerCase())) {\n      // 图片、视频类型，直接显示缩略图\n      return this.getMinImgStream(file);\n    } else if (_map.fileImgMap.has(file.extendName.toLowerCase())) {\n      // 可以识别文件类型的文件\n      return _map.fileImgMap.get(file.extendName.toLowerCase());\n    } else {\n      // 无法识别文件类型的文件\n      return _map.unknownImg;\n    }\n  },\n  /**\r\n   * 判断是否是视频文件\r\n   * @param {object} file 文件信息\r\n   */\n  isVideoFile(file) {\n    if (['avi', 'mp4', 'mpg', 'mov', 'swf'].includes(file.extendName?.toLowerCase())) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  /**\r\n   * 图片预览\r\n   * @param {*} currentIndex 当前图片索引\r\n   * @param {*} imgInfo 单个图片信息\r\n   * @param {*} imgInfoList 多个图片列表\r\n   */\n  handleImgPreview(currentIndex, imgInfo = {}, imgInfoList = []) {\n    // 图片分类下 - 传递整个页面的图片列表；非图片分类下 - 由单个图片构建图片列表\n    console.log('图片预览 handleImgPreview');\n    const imgList = Number(_index.default.currentRoute.query.fileType) === 1 ? imgInfoList.map(item => {\n      return {\n        ...item,\n        fileUrl: this.getViewFilePath(item),\n        downloadLink: this.getDownloadFilePath(item)\n      };\n    }) : [{\n      ...imgInfo,\n      fileUrl: this.getViewFilePath(imgInfo),\n      downloadLink: this.getDownloadFilePath(imgInfo)\n    }];\n    const defaultIndex = Number(_index.default.currentRoute.query.fileType) === 1 ? currentIndex : 0;\n    console.log('imgList==');\n    console.log(imgList);\n    console.log('defaultIndex==' + defaultIndex);\n    _vue.default.prototype.$openBox.imgPreview({\n      imgList,\n      defaultIndex\n    });\n  },\n  /**\r\n   * 视频预览\r\n   * @param {*} currentIndex 当前视频索引\r\n   * @param {*} videoInfo 单个视频信息\r\n   * @param {*} videoInfoList 多个视频列表\r\n   */\n  handleVideoPreview(currentIndex, videoInfo = {}, videoInfoList = []) {\n    // 视频分类下 - 传递整个页面的视频列表；非视频分类下 - 由单个视频构建视频列表\n    const videoList = Number(_index.default.currentRoute.query.fileType) === 3 ? videoInfoList.map(item => {\n      return {\n        ...item,\n        fileUrl: this.getViewFilePath(item),\n        downloadLink: this.getDownloadFilePath(item)\n      };\n    }) : [{\n      ...videoInfo,\n      fileUrl: this.getViewFilePath(videoInfo),\n      downloadLink: this.getDownloadFilePath(videoInfo)\n    }];\n    const defaultIndex = Number(_index.default.currentRoute.query.fileType) === 3 ? currentIndex : 0;\n    _vue.default.prototype.$openBox.videoPreview({\n      videoList,\n      defaultIndex\n    });\n  },\n  /**\r\n   * 音频预览\r\n   * @param {*} currentIndex 当前音频索引\r\n   * @param {*} audioInfo 单个音频信息\r\n   * @param {*} audioInfoList 多个音频列表\r\n   */\n  handleAudioPreview(currentIndex, audioInfo = {}, audioInfoList = []) {\n    // 音频分类下 - 传递整个页面的音频列表；非音频分类下 - 由单个音频构建音频列表\n    const audioList = Number(_index.default.currentRoute.query.fileType) === 4 ? audioInfoList.map(item => {\n      return {\n        ...item,\n        fileUrl: this.getViewFilePath(item),\n        downloadLink: this.getDownloadFilePath(item)\n      };\n    }) : [{\n      ...audioInfo,\n      fileUrl: this.getViewFilePath(audioInfo),\n      downloadLink: this.getDownloadFilePath(audioInfo)\n    }];\n    const defaultIndex = Number(_index.default.currentRoute.query.fileType) === 4 ? currentIndex : 0;\n    _vue.default.prototype.$openBox.audioPreview({\n      audioList,\n      defaultIndex\n    });\n  },\n  /**\r\n   * 文件预览\r\n   * @description 若当前点击的为文件夹，则进入文件夹内部；若是文件，则进行相应的预览。\r\n   * @param {object} row 文件信息\r\n   * @param {number} currentIndex 当前文件索引\r\n   * @param {array} fileList 文件列表\r\n   */\n  handleFileNameClick(row, currentIndex, fileList = []) {\n    console.log('文件预览 ===');\n    console.log(row);\n    // 如果当前文件在回收站中，则不允许预览\n    if (row.deleteFlag !== undefined && row.deleteFlag !== 0) {\n      return false;\n    }\n    // 若是文件夹则进入该文件夹\n    if (row.isDir) {\n      console.log('需要点击进入文件夹');\n      if (_index.default.currentRoute.name === 'Share') {\n        console.log('当前是查看他人分享列表的页面');\n        // 当前是查看他人分享列表的页面\n        _index.default.push({\n          query: {\n            filePath: `${row.shareFilePath === '/' ? '' : row.shareFilePath}/${row.fileName}`\n          }\n        });\n      } else if (Number(_index.default.currentRoute.query.fileType) === 8) {\n        // 当前是我的已分享列表页面\n        console.log('当前是查看他人分享列表的页面');\n        _index.default.push({\n          query: {\n            fileType: 8,\n            filePath: `${row.shareFilePath === '/' ? '' : row.shareFilePath}/${row.fileName}`,\n            shareBatchNum: row.shareBatchNum\n          }\n        });\n      } else if (Number(_index.default.currentRoute.query.fileType) !== 6) {\n        console.log('回收站页面不允许打开文件夹');\n        // 回收站页面不允许打开文件夹\n        // 网盘页面\n        console.log('row====');\n        console.log(row);\n        console.log(`${row.filePath === '/' ? '' : row.filePath}/${row.fileName}`);\n        _index.default.push({\n          query: {\n            filePath: `${row.filePath === '/' ? '' : row.filePath}/${row.fileName}`,\n            fileType: 0\n          }\n        });\n      }\n    }\n    // 若是文件，则进行相应的预览\n    else {\n      console.log('文件扩展名：' + row.extendName.toLowerCase());\n      // 若当前点击项是图片\n      const PIC = ['png', 'jpg', 'jpeg', 'gif', 'svg'];\n      if (PIC.includes(row.extendName.toLowerCase())) {\n        console.log('图片预览操作');\n        this.handleImgPreview(currentIndex, row, fileList);\n        return false;\n      }\n      //  若当前点击项是可以使用office在线预览的\n      if ([..._map.officeFileType].includes(row.extendName.toLowerCase())) {\n        this.getFileOnlineViewPathByOffice(row);\n        return false;\n      }\n      //  若当前点击项是pdf\n      if (row.extendName.toLowerCase() === 'pdf') {\n        window.open(this.getViewFilePath(row), '_blank');\n      }\n      //  若当前点击项是代码或文本文件\n      let codeFileSuffix = row.extendName.toLowerCase();\n      if (codeFileSuffix === 'yaml') {\n        codeFileSuffix = 'yml';\n      }\n      // 无格式文件也可以在线编辑\n      if (_map.fileSuffixCodeModeMap.has(codeFileSuffix) || row.isDir === 0 && row.extendName === '') {\n        _vue.default.prototype.$openBox.codePreview({\n          fileInfo: row,\n          isEdit: false\n        });\n        return false;\n      }\n      //  若当前点击项是 markdown 文档\n      if (_map.markdownFileType.includes(row.extendName.toLowerCase())) {\n        _vue.default.prototype.$openBox.markdownPreview({\n          fileInfo: row,\n          editable: false\n        });\n        return false;\n      }\n      //  若当前点击项是视频mp4格式\n      const VIDEO = ['mp4'];\n      if (VIDEO.includes(row.extendName.toLowerCase())) {\n        this.handleVideoPreview(currentIndex, row, fileList);\n        return false;\n      }\n      //  若当前点击项是音频 mp3、flac 格式\n      const AUDIO = ['mp3', 'flac'];\n      if (AUDIO.includes(row.extendName.toLowerCase())) {\n        this.handleAudioPreview(currentIndex, row, fileList);\n        return false;\n      }\n    }\n  },\n  /**\r\n   * 知识库处理文件预览，暂时不支持处理图片、音视频\r\n   */\n  handleKnowledgeFileNameClick(file) {\n    // 兼容性处理\n    file.extendName = file.fileType; //扩展名\n    file.userFileId = '111';\n    file.sourceType = '1';\n    //\n    // this.$message(`预览文件：${file.fileName}`)\n    console.log(`预览文件：${file.fileName}`);\n    console.log('文件类型：' + file.fileType);\n    const fileSuffix = (file.fileType || '').toLowerCase();\n    console.log('文件后缀：' + fileSuffix);\n\n    // 拦截图片、音频、视频类型，不处理\n    const IMAGE_TYPES = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'xlsx', 'xls'];\n    const VIDEO_TYPES = ['mp4'];\n    const AUDIO_TYPES = ['mp3', 'flac'];\n    if (IMAGE_TYPES.includes(fileSuffix) || VIDEO_TYPES.includes(fileSuffix) || AUDIO_TYPES.includes(fileSuffix)) {\n      console.log('该文件类型不支持预览');\n      _elementUi.Message.error('该文件类型不支持预览');\n      return;\n    }\n\n    // PDF 文件新标签页打开\n    if (fileSuffix === 'pdf') {\n      console.log('PDF文件在线预览');\n      console.log('file');\n      console.log(file);\n      window.open(this.getViewFilePath(file), '_blank');\n      return;\n    }\n\n    // 统一 yaml => yml\n    let codeSuffix = fileSuffix === 'yaml' ? 'yml' : fileSuffix;\n\n    // Markdown 文档\n    if (_map.markdownFileType.includes(codeSuffix)) {\n      console.log('Markdown 文档在线预览');\n      _vue.default.prototype.$openBox.markdownPreview({\n        fileInfo: file,\n        editable: false\n      });\n      return;\n    }\n\n    // 文本/代码类文件 或 无扩展名文件\n    if (_map.fileSuffixCodeModeMap.has(codeSuffix) || !file.extendName) {\n      console.log('文本/代码类文件 或 无扩展名文件 在线预览');\n      _vue.default.prototype.$openBox.codePreview({\n        fileInfo: file,\n        isEdit: false\n      });\n      return;\n    }\n\n    // 其他不支持预览\n    // this.$message.warning('暂不支持该类型文件预览')\n    console.log('暂不支持该类型文件预览');\n  },\n  /**\r\n   * 文件名称拼接，包括文件名称 + 文件后缀\r\n   * @param {object} file 文件信息\r\n   * @param {boolean} isHighlight 是否需要展示高亮效果，默认不需要\r\n   * @returns {string} 完整文件名称\r\n   */\n  getFileNameComplete(file, isHighlight = false) {\n    return isHighlight === true && file.highlightFields ? `${file.highlightFields}${file.isDir === 0 && file.extendName ? `.${file.extendName}` : ''}` : `${file.fileName}${file.isDir === 0 && file.extendName ? `.${file.extendName}` : ''}`;\n  },\n  /**\r\n   * 文件类型\r\n   * @param {object} file 文件信息\r\n   */\n  getFileType(file) {\n    return file.isDir === 1 ? '文件夹' : file.extendName ? file.extendName : '文件';\n  },\n  /**\r\n   * 获取文件分享过期状态\r\n   * @param {string} time 日期\r\n   * @returns {boolean} 是否过期\r\n   */\n  getFileShareStatus(time) {\n    if (new Date(time).getTime() > new Date().getTime()) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n};\nvar _default = exports.default = fileFunction;","map":{"version":3,"names":["_vue","_interopRequireDefault","require","_index","_index2","_elementUi","_map","fileFunction","calculateFileSize","size","isInteger","B","KB","Math","pow","MB","GB","toFixed","getMinImgStream","row","config","baseContext","userFileId","shareBatchNum","extractionCode","getViewFilePath","sourceType","undefined","id","getDownloadFilePath","createFileOnlineByOffice","data","fileUrl","location","protocol","host","href","router","resolve","name","query","fileName","filePath","extendName","ot","window","open","getFileOnlineViewPathByOffice","getFileOnlineEditPathByOffice","getShareLink","copyShareLink","input","document","createElement","value","body","appendChild","select","execCommand","removeChild","Message","success","setFileImg","file","isDir","fileImgMap","get","Number","currentRoute","fileType","includes","toLowerCase","has","unknownImg","isVideoFile","handleImgPreview","currentIndex","imgInfo","imgInfoList","console","log","imgList","map","item","downloadLink","defaultIndex","Vue","prototype","$openBox","imgPreview","handleVideoPreview","videoInfo","videoInfoList","videoList","videoPreview","handleAudioPreview","audioInfo","audioInfoList","audioList","audioPreview","handleFileNameClick","fileList","deleteFlag","push","shareFilePath","PIC","officeFileType","codeFileSuffix","fileSuffixCodeModeMap","codePreview","fileInfo","isEdit","markdownFileType","markdownPreview","editable","VIDEO","AUDIO","handleKnowledgeFileNameClick","fileSuffix","IMAGE_TYPES","VIDEO_TYPES","AUDIO_TYPES","error","codeSuffix","getFileNameComplete","isHighlight","highlightFields","getFileType","getFileShareStatus","time","Date","getTime","_default","exports","default"],"sources":["C:/Users/Administrator/Desktop/GimChat/front/gim-chat/src/libs/globalFunction/file.js"],"sourcesContent":["import Vue from 'vue'\r\nimport router from '@/router/index'\r\nimport config from '@/config/index.js'\r\nimport { Message } from 'element-ui'\r\nimport {\r\n\tfileImgMap,\r\n\tunknownImg,\r\n\tfileSuffixCodeModeMap,\r\n\tmarkdownFileType\r\n} from '@/libs/map.js'\r\nimport { officeFileType } from '@/libs/map.js'\r\n\r\n\r\n// 全局函数 - 文件相关\r\nconst fileFunction = {\r\n\t/**\r\n\t * 格式化文件大小\r\n\t * @param {number} size 文件大小\r\n\t * @param {boolean} isInteger 是否只显示整数位，默认不截取\r\n\t * @returns {string} 文件大小（带单位）\r\n\t */\r\n\tcalculateFileSize(size, isInteger = false) {\r\n\t\tconst B = 1024\r\n\t\tconst KB = Math.pow(1024, 2)\r\n\t\tconst MB = Math.pow(1024, 3)\r\n\t\tconst GB = Math.pow(1024, 4)\r\n\t\tif (isInteger) {\r\n\t\t\t// 截取为整数\r\n\t\t\tif (size < B) {\r\n\t\t\t\treturn `${size}B`\r\n\t\t\t} else if (size < KB) {\r\n\t\t\t\treturn `${(size / B).toFixed(0)}KB`\r\n\t\t\t} else if (size < MB) {\r\n\t\t\t\treturn `${(size / KB).toFixed(0)}MB`\r\n\t\t\t} else if (size < GB) {\r\n\t\t\t\treturn `${(size / MB).toFixed(0)}GB`\r\n\t\t\t} else {\r\n\t\t\t\treturn `${(size / GB).toFixed(0)}TB`\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// 保留小数位\r\n\t\t\tif (size < B) {\r\n\t\t\t\treturn `${size}B`\r\n\t\t\t} else if (size < KB) {\r\n\t\t\t\treturn `${(size / B).toFixed(0)}KB`\r\n\t\t\t} else if (size < MB) {\r\n\t\t\t\treturn `${(size / KB).toFixed(1)}MB`\r\n\t\t\t} else if (size < GB) {\r\n\t\t\t\treturn `${(size / MB).toFixed(2)}GB`\r\n\t\t\t} else {\r\n\t\t\t\treturn `${(size / GB).toFixed(3)}TB`\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 获取流式的缩略图、视频封面图\r\n\t * @param {object} row 文件信息\r\n\t * @returns {string} 流式图片\r\n\t */\r\n\tgetMinImgStream(row) {\r\n\t\treturn `${config.baseContext}/filetransfer/preview?userFileId=${row.userFileId\r\n\t\t\t}&isMin=true&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum\r\n\t\t\t}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`\r\n\t},\r\n\t/**\r\n\t * 获取文件查看路径\r\n\t * @param {object} row 文件信息\r\n\t * @returns {string} 文件路径\r\n\t */\r\n\tgetViewFilePath(row) {\r\n\r\n\t\tif (row.sourceType === undefined || row.sourceType === ''\r\n\t\t\t|| row.sourceType === null\r\n\t\t) {\r\n\t\t\trow.sourceType = '0'\r\n\t\t}\r\n\r\n\t\tif (row.sourceType === '0') {\r\n\t\t\treturn `${config.baseContext}/filetransfer/preview?userFileId=${row.userFileId\r\n\t\t\t\t}&isMin=false&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum\r\n\t\t\t\t}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`\r\n\t\t} else {\r\n\t\t\t//兼容知识库文件预览\r\n\t\t\treturn `${config.baseContext}/vectorFileInfo/preview?userFileId=${row.userFileId}\r\n\t\t\t\t&isMin=false&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum}\r\n\t\t\t\t&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}\r\n\t\t\t\t&id=${row.id != null && row.id != undefined ? row.id : ''}`; // 条件添加 id 参数\r\n\t\t}\r\n\r\n\t},\r\n\t/**\r\n\t * 获取文件下载路径\r\n\t * @param {object} row 文件信息\r\n\t * @returns {string}  文件下载路径\r\n\t */\r\n\tgetDownloadFilePath(row) {\r\n\t\treturn `${config.baseContext}/filetransfer/downloadfile?userFileId=${row.userFileId\r\n\t\t\t}&shareBatchNum=${row.shareBatchNum == null ? '' : row.shareBatchNum\r\n\t\t\t}&extractionCode=${row.extractionCode == null ? '' : row.extractionCode}`\r\n\t},\r\n\t/**\r\n\t * 获取 Onlyoffice 文件创建路径\r\n\t * @param {object} row\r\n\t * @returns {string} office 文件创建路径\r\n\t */\r\n\tcreateFileOnlineByOffice(data) {\r\n\t\tlet fileUrl = `${location.protocol}//${location.host}${config.baseContext}`\r\n\t\tconst { href } = router.resolve({\r\n\t\t\tname: 'Onlyoffice',\r\n\t\t\tquery: {\r\n\t\t\t\tfileUrl: fileUrl,\r\n\t\t\t\tfileName: data.fileName,\r\n\t\t\t\tfilePath: data.filePath,\r\n\t\t\t\textendName: data.extendName,\r\n\t\t\t\tot: 'add'\r\n\t\t\t}\r\n\t\t})\r\n\t\twindow.open(href, '_blank')\r\n\t},\r\n\t/**\r\n\t * 获取 Onlyoffice 文件在线预览路径\r\n\t * @param {object} row\r\n\t * @returns {string} office 文件在线预览路径\r\n\t */\r\n\tgetFileOnlineViewPathByOffice(row) {\r\n\t\tlet userFileId = row.userFileId\r\n\r\n\t\tconst { href } = router.resolve({\r\n\t\t\tname: 'Onlyoffice',\r\n\t\t\tquery: {\r\n\t\t\t\tuserFileId: userFileId,\r\n\t\t\t\tot: 'detail'\r\n\t\t\t}\r\n\t\t})\r\n\t\twindow.open(href, '_blank')\r\n\t},\r\n\t/**\r\n\t * 获取 Onlyoffice 文件在线编辑路径\r\n\t * @param {object} row\r\n\t * @returns {string} office 文件在线编辑路径\r\n\t */\r\n\tgetFileOnlineEditPathByOffice(row) {\r\n\t\tlet userFileId = row.userFileId\r\n\r\n\t\tconst { href } = router.resolve({\r\n\t\t\tname: 'Onlyoffice',\r\n\t\t\tquery: {\r\n\t\t\t\tuserFileId: userFileId,\r\n\t\t\t\tot: 'edit'\r\n\t\t\t}\r\n\t\t})\r\n\t\twindow.open(href, '_blank')\r\n\t},\r\n\t/**\r\n\t * 获取分享链接\r\n\t * @param {string} shareBatchNum\r\n\t * @returns {string} 完整的分享链接\r\n\t */\r\n\tgetShareLink(shareBatchNum) {\r\n\t\treturn `${location.protocol}//${location.host}/share/${shareBatchNum}`\r\n\t},\r\n\t/**\r\n\t * 复制分享链接\r\n\t * @param {string} shareBatchNum\r\n\t * @param {string} extractionCode\r\n\t */\r\n\tcopyShareLink(shareBatchNum, extractionCode) {\r\n\t\tlet input = document.createElement('textarea') // 直接构建textarea以保持换行\r\n\t\tinput.value =\r\n\t\t\textractionCode === null\r\n\t\t\t\t? `分享链接：${this.getShareLink(\r\n\t\t\t\t\tshareBatchNum\r\n\t\t\t\t)}\\n复制链接到浏览器中并输入提取码即可查看文件`\r\n\t\t\t\t: `分享链接：${this.getShareLink(\r\n\t\t\t\t\tshareBatchNum\r\n\t\t\t\t)}\\n提取码：${extractionCode}\\n复制链接到浏览器中并输入提取码即可查看文件` // 设置内容\r\n\t\tdocument.body.appendChild(input) // 添加临时实例\r\n\t\tinput.select() // 选择实例内容\r\n\t\tdocument.execCommand('Copy') // 执行复制\r\n\t\tdocument.body.removeChild(input) // 删除临时实例\r\n\t\tMessage.success('复制成功')\r\n\t},\r\n\t/**\r\n\t * 根据文件扩展名设置文件图片\r\n\t * @param {object} file 文件信息\r\n\t */\r\n\tsetFileImg(file) {\r\n\t\tif (file.isDir === 1) {\r\n\t\t\t//  文件夹\r\n\t\t\treturn fileImgMap.get('dir')\r\n\t\t} else if (\r\n\t\t\tNumber(router.currentRoute.query.fileType) !== 6 &&\r\n\t\t\t['jpg', 'png', 'jpeg', 'gif', 'mp4'].includes(\r\n\t\t\t\tfile.extendName.toLowerCase()\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\t// 图片、视频类型，直接显示缩略图\r\n\t\t\treturn this.getMinImgStream(file)\r\n\t\t} else if (fileImgMap.has(file.extendName.toLowerCase())) {\r\n\t\t\t// 可以识别文件类型的文件\r\n\t\t\treturn fileImgMap.get(file.extendName.toLowerCase())\r\n\t\t} else {\r\n\t\t\t// 无法识别文件类型的文件\r\n\t\t\treturn unknownImg\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 判断是否是视频文件\r\n\t * @param {object} file 文件信息\r\n\t */\r\n\tisVideoFile(file) {\r\n\t\tif (\r\n\t\t\t['avi', 'mp4', 'mpg', 'mov', 'swf'].includes(\r\n\t\t\t\tfile.extendName?.toLowerCase()\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 图片预览\r\n\t * @param {*} currentIndex 当前图片索引\r\n\t * @param {*} imgInfo 单个图片信息\r\n\t * @param {*} imgInfoList 多个图片列表\r\n\t */\r\n\thandleImgPreview(currentIndex, imgInfo = {}, imgInfoList = []) {\r\n\t\t// 图片分类下 - 传递整个页面的图片列表；非图片分类下 - 由单个图片构建图片列表\r\n\t\tconsole.log('图片预览 handleImgPreview')\r\n\t\tconst imgList =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 1\r\n\t\t\t\t? imgInfoList.map((item) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(item),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...imgInfo,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(imgInfo),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(imgInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\tconst defaultIndex =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 1 ? currentIndex : 0\r\n\r\n\t\tconsole.log('imgList==')\r\n\t\tconsole.log(imgList)\r\n\t\tconsole.log('defaultIndex==' + defaultIndex)\r\n\t\tVue.prototype.$openBox.imgPreview({ imgList, defaultIndex })\r\n\r\n\r\n\t},\r\n\t/**\r\n\t * 视频预览\r\n\t * @param {*} currentIndex 当前视频索引\r\n\t * @param {*} videoInfo 单个视频信息\r\n\t * @param {*} videoInfoList 多个视频列表\r\n\t */\r\n\thandleVideoPreview(currentIndex, videoInfo = {}, videoInfoList = []) {\r\n\t\t// 视频分类下 - 传递整个页面的视频列表；非视频分类下 - 由单个视频构建视频列表\r\n\t\tconst videoList =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 3\r\n\t\t\t\t? videoInfoList.map((item) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(item),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...videoInfo,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(videoInfo),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(videoInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\tconst defaultIndex =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 3 ? currentIndex : 0\r\n\t\tVue.prototype.$openBox.videoPreview({ videoList, defaultIndex })\r\n\t},\r\n\t/**\r\n\t * 音频预览\r\n\t * @param {*} currentIndex 当前音频索引\r\n\t * @param {*} audioInfo 单个音频信息\r\n\t * @param {*} audioInfoList 多个音频列表\r\n\t */\r\n\thandleAudioPreview(currentIndex, audioInfo = {}, audioInfoList = []) {\r\n\t\t// 音频分类下 - 传递整个页面的音频列表；非音频分类下 - 由单个音频构建音频列表\r\n\t\tconst audioList =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 4\r\n\t\t\t\t? audioInfoList.map((item) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(item),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...audioInfo,\r\n\t\t\t\t\t\tfileUrl: this.getViewFilePath(audioInfo),\r\n\t\t\t\t\t\tdownloadLink: this.getDownloadFilePath(audioInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\tconst defaultIndex =\r\n\t\t\tNumber(router.currentRoute.query.fileType) === 4 ? currentIndex : 0\r\n\t\tVue.prototype.$openBox.audioPreview({ audioList, defaultIndex })\r\n\t},\r\n\t/**\r\n\t * 文件预览\r\n\t * @description 若当前点击的为文件夹，则进入文件夹内部；若是文件，则进行相应的预览。\r\n\t * @param {object} row 文件信息\r\n\t * @param {number} currentIndex 当前文件索引\r\n\t * @param {array} fileList 文件列表\r\n\t */\r\n\thandleFileNameClick(row, currentIndex, fileList = []) {\r\n\t\tconsole.log('文件预览 ===')\r\n\t\tconsole.log(row)\r\n\t\t// 如果当前文件在回收站中，则不允许预览\r\n\t\tif (row.deleteFlag !== undefined && row.deleteFlag !== 0) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\t// 若是文件夹则进入该文件夹\r\n\t\tif (row.isDir) {\r\n\t\t\tconsole.log('需要点击进入文件夹')\r\n\t\t\tif (router.currentRoute.name === 'Share') {\r\n\t\t\t\tconsole.log('当前是查看他人分享列表的页面')\r\n\t\t\t\t// 当前是查看他人分享列表的页面\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tfilePath: `${row.shareFilePath === '/' ? '' : row.shareFilePath}/${row.fileName\r\n\t\t\t\t\t\t\t}`\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else if (Number(router.currentRoute.query.fileType) === 8) {\r\n\t\t\t\t// 当前是我的已分享列表页面\r\n\t\t\t\tconsole.log('当前是查看他人分享列表的页面')\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tfileType: 8,\r\n\t\t\t\t\t\tfilePath: `${row.shareFilePath === '/' ? '' : row.shareFilePath}/${row.fileName\r\n\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\tshareBatchNum: row.shareBatchNum\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else if (Number(router.currentRoute.query.fileType) !== 6) {\r\n\t\t\t\tconsole.log('回收站页面不允许打开文件夹')\r\n\t\t\t\t// 回收站页面不允许打开文件夹\r\n\t\t\t\t// 网盘页面\r\n\t\t\t\tconsole.log('row====')\r\n\t\t\t\tconsole.log(row)\r\n\t\t\t\tconsole.log(`${row.filePath === '/' ? '' : row.filePath}/${row.fileName\r\n\t\t\t\t\t}`)\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tfilePath: `${row.filePath === '/' ? '' : row.filePath}/${row.fileName\r\n\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\tfileType: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 若是文件，则进行相应的预览\r\n\t\telse {\r\n\t\t\tconsole.log('文件扩展名：' + row.extendName.toLowerCase())\r\n\t\t\t// 若当前点击项是图片\r\n\t\t\tconst PIC = ['png', 'jpg', 'jpeg', 'gif', 'svg']\r\n\t\t\tif (PIC.includes(row.extendName.toLowerCase())) {\r\n\t\t\t\tconsole.log('图片预览操作')\r\n\t\t\t\tthis.handleImgPreview(currentIndex, row, fileList)\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是可以使用office在线预览的\r\n\t\t\tif ([...officeFileType].includes(row.extendName.toLowerCase())) {\r\n\t\t\t\tthis.getFileOnlineViewPathByOffice(row)\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是pdf\r\n\t\t\tif (row.extendName.toLowerCase() === 'pdf') {\r\n\t\t\t\twindow.open(this.getViewFilePath(row), '_blank')\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是代码或文本文件\r\n\t\t\tlet codeFileSuffix = row.extendName.toLowerCase()\r\n\t\t\tif (codeFileSuffix === 'yaml') {\r\n\t\t\t\tcodeFileSuffix = 'yml'\r\n\t\t\t}\r\n\t\t\t// 无格式文件也可以在线编辑\r\n\t\t\tif (\r\n\t\t\t\tfileSuffixCodeModeMap.has(codeFileSuffix) ||\r\n\t\t\t\t(row.isDir === 0 && row.extendName === '')\r\n\t\t\t) {\r\n\t\t\t\tVue.prototype.$openBox.codePreview({ fileInfo: row, isEdit: false })\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是 markdown 文档\r\n\t\t\tif (markdownFileType.includes(row.extendName.toLowerCase())) {\r\n\t\t\t\tVue.prototype.$openBox.markdownPreview({\r\n\t\t\t\t\tfileInfo: row,\r\n\t\t\t\t\teditable: false\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是视频mp4格式\r\n\t\t\tconst VIDEO = ['mp4']\r\n\t\t\tif (VIDEO.includes(row.extendName.toLowerCase())) {\r\n\t\t\t\tthis.handleVideoPreview(currentIndex, row, fileList)\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t//  若当前点击项是音频 mp3、flac 格式\r\n\t\t\tconst AUDIO = ['mp3', 'flac']\r\n\t\t\tif (AUDIO.includes(row.extendName.toLowerCase())) {\r\n\t\t\t\tthis.handleAudioPreview(currentIndex, row, fileList)\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 知识库处理文件预览，暂时不支持处理图片、音视频\r\n\t */\r\n\thandleKnowledgeFileNameClick(file) {\r\n\r\n\t\t// 兼容性处理\r\n\t\tfile.extendName = file.fileType //扩展名\r\n\t\tfile.userFileId = '111'\r\n\t\tfile.sourceType = '1'\r\n\t\t//\r\n\t\t// this.$message(`预览文件：${file.fileName}`)\r\n\t\tconsole.log(`预览文件：${file.fileName}`)\r\n\r\n\t\tconsole.log('文件类型：' + file.fileType)\r\n\r\n\t\tconst fileSuffix = (file.fileType || '').toLowerCase()\r\n\r\n\t\tconsole.log('文件后缀：' + fileSuffix)\r\n\r\n\r\n\t\t// 拦截图片、音频、视频类型，不处理\r\n\t\tconst IMAGE_TYPES = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'xlsx', 'xls']\r\n\t\tconst VIDEO_TYPES = ['mp4']\r\n\t\tconst AUDIO_TYPES = ['mp3', 'flac']\r\n\r\n\t\tif (\r\n\t\t\tIMAGE_TYPES.includes(fileSuffix) ||\r\n\t\t\tVIDEO_TYPES.includes(fileSuffix) ||\r\n\t\t\tAUDIO_TYPES.includes(fileSuffix)\r\n\t\t) {\r\n\t\t\tconsole.log('该文件类型不支持预览')\r\n\t\t\t Message.error('该文件类型不支持预览')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// PDF 文件新标签页打开\r\n\t\tif (fileSuffix === 'pdf') {\r\n\t\t\tconsole.log('PDF文件在线预览')\r\n\t\t\tconsole.log('file')\r\n\t\t\tconsole.log(file)\r\n\t\t\twindow.open(this.getViewFilePath(file), '_blank')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 统一 yaml => yml\r\n\t\tlet codeSuffix = fileSuffix === 'yaml' ? 'yml' : fileSuffix\r\n\r\n\t\t// Markdown 文档\r\n\t\tif (markdownFileType.includes(codeSuffix)) {\r\n\t\t\tconsole.log('Markdown 文档在线预览')\r\n\t\t\tVue.prototype.$openBox.markdownPreview({\r\n\t\t\t\tfileInfo: file,\r\n\t\t\t\teditable: false\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 文本/代码类文件 或 无扩展名文件\r\n\t\tif (\r\n\t\t\tfileSuffixCodeModeMap.has(codeSuffix) ||\r\n\t\t\t(!file.extendName)\r\n\t\t) {\r\n\t\t\tconsole.log('文本/代码类文件 或 无扩展名文件 在线预览')\r\n\t\t\tVue.prototype.$openBox.codePreview({ fileInfo: file, isEdit: false })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 其他不支持预览\r\n\t\t// this.$message.warning('暂不支持该类型文件预览')\r\n\t\tconsole.log('暂不支持该类型文件预览')\r\n\t},\r\n\t/**\r\n\t * 文件名称拼接，包括文件名称 + 文件后缀\r\n\t * @param {object} file 文件信息\r\n\t * @param {boolean} isHighlight 是否需要展示高亮效果，默认不需要\r\n\t * @returns {string} 完整文件名称\r\n\t */\r\n\tgetFileNameComplete(file, isHighlight = false) {\r\n\t\treturn isHighlight === true && file.highlightFields\r\n\t\t\t? `${file.highlightFields}${file.isDir === 0 && file.extendName ? `.${file.extendName}` : ''\r\n\t\t\t}`\r\n\t\t\t: `${file.fileName}${file.isDir === 0 && file.extendName ? `.${file.extendName}` : ''\r\n\t\t\t}`\r\n\t},\r\n\t/**\r\n\t * 文件类型\r\n\t * @param {object} file 文件信息\r\n\t */\r\n\tgetFileType(file) {\r\n\t\treturn file.isDir === 1\r\n\t\t\t? '文件夹'\r\n\t\t\t: file.extendName\r\n\t\t\t\t? file.extendName\r\n\t\t\t\t: '文件'\r\n\t},\r\n\t/**\r\n\t * 获取文件分享过期状态\r\n\t * @param {string} time 日期\r\n\t * @returns {boolean} 是否过期\r\n\t */\r\n\tgetFileShareStatus(time) {\r\n\t\tif (new Date(time).getTime() > new Date().getTime()) {\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\treturn true\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default fileFunction\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}