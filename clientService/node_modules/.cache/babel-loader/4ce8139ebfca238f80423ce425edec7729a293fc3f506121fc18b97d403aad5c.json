{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nvar _FileTable = _interopRequireDefault(require(\"@/components/file/FileTable.vue\"));\nvar _FileGrid = _interopRequireDefault(require(\"./components/FileGrid.vue\"));\nvar _FileTimeLine = _interopRequireDefault(require(\"./components/FileTimeLine.vue\"));\nvar _OperationMenu = _interopRequireDefault(require(\"@/components/file/OperationMenu.vue\"));\nvar _BreadCrumb = _interopRequireDefault(require(\"@/components/file/components/BreadCrumb.vue\"));\nvar _file = require(\"@/api/file.js\");\nvar _default = exports.default = {\n  name: 'FileList',\n  components: {\n    FileTable: _FileTable.default,\n    OperationMenu: _OperationMenu.default,\n    FileGrid: _FileGrid.default,\n    BreadCrumb: _BreadCrumb.default,\n    FileTimeLine: _FileTimeLine.default\n  },\n  props: {\n    refreshData: {\n      type: String,\n      required: true,\n      default: '0'\n    }\n  },\n  data() {\n    return {\n      fileNameSearch: '',\n      loading: true,\n      //  表格数据-loading\n      fileList: [],\n      //  表格数据-文件列表\n      // 分页数据\n      pageData: {\n        currentPage: 1,\n        pageCount: 50,\n        total: 0\n      }\n    };\n  },\n  computed: {\n    // 左侧菜单选中的文件类型\n    fileType() {\n      return this.$route.query.fileType ? Number(this.$route.query.fileType) : 0;\n    },\n    // 当前所在路径\n    filePath() {\n      return this.$route.query.filePath ? this.$route.query.filePath : '/';\n    },\n    // 文件查看模式 0列表模式 1网格模式 2 时间线模式\n    fileModel() {\n      return this.$store.getters.fileModel;\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return this.$store.state.common.screenWidth;\n    }\n  },\n  watch: {\n    //lml\n    filePath() {\n      // 当左侧菜单选择“全部”或“我的分享”，文件路径发生变化时，再重新获取文件列表\n      if (this.$route.name === 'File' && [0, 8].includes(this.fileType)) {\n        this.setPageCount();\n        this.getTableDataByType();\n      }\n    },\n    //lml\n    fileType() {\n      if (this.$route.name === 'File') {\n        this.setPageCount();\n        this.getTableDataByType();\n      }\n    },\n    // 监听文件查看模式\n    fileModel() {\n      this.setPageCount();\n    },\n    refreshData(newVal) {\n      // 每当 message 变化，执行逻辑\n      console.log('父组件传值变化:', newVal);\n      this.showFileList();\n    }\n  },\n  created() {\n    this.setPageCount();\n    //lml\n    this.getTableDataByType();\n  },\n  methods: {\n    /**\r\n     * 文件展示区域的空白处右键事件\r\n     * @param {Document} event 右键事件对象\r\n     * //lml\r\n     */\n    handleClickRight(event) {\n      console.log('文件展示区域的空白处右键事件:');\n      event.preventDefault();\n      // 只有在全部页面才可以进行以下操作\n      if (![6, 8].includes(this.fileType)) {\n        this.$openBox.contextMenu({\n          selectedFile: undefined,\n          domEvent: event,\n          serviceEl: this\n        }).then(res => {\n          if (res === 'confirm') {\n            this.getTableDataByType(); //  刷新文件列表\n            // this.$store.dispatch('showStorage') //  刷新存储容量\n          }\n        });\n      }\n    },\n    /**\r\n     * 表格数据获取相关事件 | 调整分页大小\r\n     */\n    setPageCount() {\n      this.pageData.currentPage = 1;\n      if (this.fileModel === 0) {\n        this.pageData.pageCount = 50;\n      }\n      if (this.fileModel === 1) {\n        this.pageData.pageCount = 100;\n      }\n    },\n    /**\r\n     * 表格数据获取相关事件 | 获取文件列表数据\r\n     * lml\r\n     */\n    getTableDataByType() {\n      this.loading = true;\n      console.log('getTableDataByType===');\n      // 分类型\n      if (Number(this.fileType)) {\n        switch (Number(this.fileType)) {\n          case 6:\n            {\n              this.showFileRecovery(); //  回收站\n              break;\n            }\n          case 8:\n            {\n              this.showMyShareFile(); //  我的分享\n              break;\n            }\n          default:\n            {\n              this.showFileList();\n              break;\n            }\n        }\n      } else {\n        // 全部文件\n        this.showFileList();\n      }\n      // this.$store.dispatch('showStorage')\n    },\n    /**\r\n     * 表格数据获取相关事件 | 获取当前路径下的文件列表\r\n     */\n    showFileList() {\n      console.log('showFileList==');\n      let data = {\n        fileType: this.fileType,\n        filePath: this.filePath,\n        currentPage: this.pageData.currentPage,\n        pageCount: this.pageData.pageCount\n      };\n      if (this.refreshData) {\n        data.fileType = this.refreshData;\n      }\n      (0, _file.getFileListByPath)(data).then(res => {\n        if (res && res.data && res.data.code === 200) {\n          this.fileList = res.data.data.records;\n          this.pageData.total = Number(res.data.data.total);\n          this.loading = false;\n        } else {\n          this.$message.error(res.data.message);\n          this.loading = false;\n        }\n      });\n    },\n    /**\r\n     * 表格数据获取相关事件 | 分页组件 | 当前页码改变\r\n     * * //lml\r\n     */\n    handleCurrentChange(currentPage) {\n      this.pageData.currentPage = currentPage;\n      this.getTableDataByType();\n    },\n    /**\r\n     * 表格数据获取相关事件 | 分页组件 | 页大小改变时\r\n     * //lml\r\n     */\n    handleSizeChange(pageCount) {\n      this.pageData.pageCount = pageCount;\n      this.getTableDataByType();\n    },\n    /**\r\n     * 表格数据获取相关事件 | 获取回收站文件列表\r\n     */\n    showFileRecovery() {\n      console.log('showFileRecovery==');\n      (0, _file.getRecoveryFile)().then(res => {\n        if (res.data.code === 200) {\n          this.fileList = res.data.data;\n          this.loading = false;\n        } else {\n          this.$message.error(res.data.message);\n        }\n      });\n    },\n    /**\r\n     * 表格数据获取相关事件 | 获取我的分享列表\r\n     */\n    showMyShareFile() {\n      console.log('showMyShareFile==');\n      let data = {\n        shareFilePath: this.filePath,\n        shareBatchNum: this.$route.query.shareBatchNum,\n        currentPage: this.pageData.currentPage,\n        pageCount: this.pageData.pageCount\n      };\n      (0, _file.getMyShareFileList)(data).then(res => {\n        if (res.success) {\n          this.fileList = res.dataList;\n          this.pageData.total = Number(res.total);\n          this.loading = false;\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    /**\r\n     * 表格数据获取相关事件 | 根据文件类型展示文件列表\r\n     */\n    showFileListByType() {\n      console.log('showFileListByType==');\n      //  分类型\n      let data = {\n        fileType: this.fileType,\n        currentPage: this.pageData.currentPage,\n        pageCount: this.pageData.pageCount\n      };\n      // 模拟数据\n      const res = {\n        \"success\": true,\n        \"code\": 0,\n        \"message\": \"成功\",\n        \"data\": null,\n        \"dataList\": [{\n          \"fileId\": null,\n          \"timeStampName\": null,\n          \"fileUrl\": null,\n          \"fileSize\": null,\n          \"storageType\": null,\n          \"pointCount\": null,\n          \"identifier\": null,\n          \"userFileId\": \"1896819986112012288\",\n          \"userId\": 1,\n          \"fileName\": \"node_modules\",\n          \"filePath\": \"/\",\n          \"extendName\": \"\",\n          \"isDir\": 1,\n          \"uploadTime\": \"2025-03-04 15:08:20\",\n          \"deleteFlag\": 0,\n          \"deleteTime\": null,\n          \"deleteBatchNum\": null,\n          \"imageWidth\": null,\n          \"imageHeight\": null\n        }, {\n          \"fileId\": null,\n          \"timeStampName\": null,\n          \"fileUrl\": null,\n          \"fileSize\": null,\n          \"storageType\": null,\n          \"pointCount\": null,\n          \"identifier\": null,\n          \"userFileId\": \"1902567581638225920\",\n          \"userId\": 1,\n          \"fileName\": \"文件1\",\n          \"filePath\": \"/\",\n          \"extendName\": \"\",\n          \"isDir\": 1,\n          \"uploadTime\": \"2025-03-20 11:47:14\",\n          \"deleteFlag\": 0,\n          \"deleteTime\": null,\n          \"deleteBatchNum\": null,\n          \"imageWidth\": null,\n          \"imageHeight\": null\n        }, {\n          \"fileId\": null,\n          \"timeStampName\": null,\n          \"fileUrl\": null,\n          \"fileSize\": null,\n          \"storageType\": null,\n          \"pointCount\": null,\n          \"identifier\": null,\n          \"userFileId\": \"1902567638034837504\",\n          \"userId\": 1,\n          \"fileName\": \"文件及2\",\n          \"filePath\": \"/\",\n          \"extendName\": \"\",\n          \"isDir\": 1,\n          \"uploadTime\": \"2025-03-20 11:47:27\",\n          \"deleteFlag\": 0,\n          \"deleteTime\": null,\n          \"deleteBatchNum\": null,\n          \"imageWidth\": null,\n          \"imageHeight\": null\n        }, {\n          \"fileId\": \"1902571481250418688\",\n          \"timeStampName\": null,\n          \"fileUrl\": \"upload/20250320/633424203495cc0eb540a00de0ccd515.docx\",\n          \"fileSize\": 10082,\n          \"storageType\": 0,\n          \"pointCount\": null,\n          \"identifier\": \"633424203495cc0eb540a00de0ccd515\",\n          \"userFileId\": \"1902571481602740224\",\n          \"userId\": 1,\n          \"fileName\": \"12\",\n          \"filePath\": \"/\",\n          \"extendName\": \"docx\",\n          \"isDir\": 0,\n          \"uploadTime\": \"2025-03-20 12:02:43\",\n          \"deleteFlag\": 0,\n          \"deleteTime\": null,\n          \"deleteBatchNum\": null,\n          \"imageWidth\": null,\n          \"imageHeight\": null\n        }, {\n          \"fileId\": \"1924646103659642880\",\n          \"timeStampName\": null,\n          \"fileUrl\": \"upload/20250520/89e81c27cf89c246870f0db520a9b34f.mp3\",\n          \"fileSize\": 160111,\n          \"storageType\": 0,\n          \"pointCount\": null,\n          \"identifier\": \"89e81c27cf89c246870f0db520a9b34f\",\n          \"userFileId\": \"1924646103990992896\",\n          \"userId\": 1,\n          \"fileName\": \"13\",\n          \"filePath\": \"/\",\n          \"extendName\": \"mp3\",\n          \"isDir\": 0,\n          \"uploadTime\": \"2025-05-20 09:59:24\",\n          \"deleteFlag\": 0,\n          \"deleteTime\": null,\n          \"deleteBatchNum\": null,\n          \"imageWidth\": null,\n          \"imageHeight\": null\n        }],\n        \"total\": 14\n      };\n      console.log('res=====');\n      console.log(res);\n      if (res.success) {\n        this.fileList = res.dataList;\n        this.pageData.total = Number(res.total);\n        this.loading = false;\n      } else {\n        this.$message.error(res.message);\n      }\n    },\n    /**\r\n     * 获取搜索文件结果列表\r\n     * @param {string} fileName 文件名称\r\n     */\n    getSearchFileList(fileName) {\n      this.loading = true;\n      (0, _file.searchFile)({\n        currentPage: this.pageData.currentPage,\n        pageCount: this.pageData.pageCount,\n        fileName: fileName\n      }).then(res => {\n        this.loading = false;\n        if (res.success) {\n          this.fileList = res.dataList.map(item => {\n            return {\n              ...item,\n              highlightFields: item.highLight.fileName[0]\n            };\n          });\n          this.pageData.total = res.data.totalHits;\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["_FileTable","_interopRequireDefault","require","_FileGrid","_FileTimeLine","_OperationMenu","_BreadCrumb","_file","_default","exports","default","name","components","FileTable","OperationMenu","FileGrid","BreadCrumb","FileTimeLine","props","refreshData","type","String","required","data","fileNameSearch","loading","fileList","pageData","currentPage","pageCount","total","computed","fileType","$route","query","Number","filePath","fileModel","$store","getters","screenWidth","state","common","watch","includes","setPageCount","getTableDataByType","newVal","console","log","showFileList","created","methods","handleClickRight","event","preventDefault","$openBox","contextMenu","selectedFile","undefined","domEvent","serviceEl","then","res","showFileRecovery","showMyShareFile","getFileListByPath","code","records","$message","error","message","handleCurrentChange","handleSizeChange","getRecoveryFile","shareFilePath","shareBatchNum","getMyShareFileList","success","dataList","showFileListByType","getSearchFileList","fileName","searchFile","map","item","highlightFields","highLight","totalHits"],"sources":["src/components/file/FileList.vue"],"sourcesContent":["<template>\r\n    <div class=\"file-list-wrapper tech-list-wrapper\">\r\n        <el-header height=\"auto\" class=\"tech-header-pad\">\r\n            <OperationMenu :fileType=\"fileType\" :filePath=\"filePath\" @getSearchFileList=\"getSearchFileList\"\r\n                @getTableDataByType=\"getTableDataByType\"></OperationMenu>\r\n        </el-header>\r\n        <div class=\"middle-wrapper tech-middle-wrapper\">\r\n            <BreadCrumb class=\"breadcrumb\" :fileType=\"fileType\" :filePath=\"filePath\"\r\n                @getTableDataByType=\"getTableDataByType\"></BreadCrumb>\r\n        </div>\r\n        \r\n        <FileTable :fileType=\"fileType\" :filePath=\"filePath\" :fileList=\"fileList\" :loading.sync=\"loading\"\r\n            v-if=\"fileModel === 0\" @getTableDataByType=\"getTableDataByType\" @click.native.right=\"handleClickRight\">\r\n        </FileTable>\r\n        \r\n        <FileGrid :fileType=\"fileType\" :filePath=\"filePath\" :fileList=\"fileList\" :loading=\"loading\"\r\n            v-if=\"fileModel === 1\" @getTableDataByType=\"getTableDataByType\" @click.native.right=\"handleClickRight\">\r\n        </FileGrid>\r\n        \r\n        <FileTimeLine class=\"image-model\" :fileList=\"fileList\" :loading.sync=\"loading\"\r\n            v-if=\"fileModel === 2 && fileType === 1\" @getTableDataByType=\"getTableDataByType\"\r\n            @click.native.right=\"handleClickRight\"></FileTimeLine>\r\n        \r\n        <div class=\"pagination-wrapper tech-pagination-bar-local\">\r\n            <div class=\"current-page-count sub-text-local\">当前页{{ fileList.length }}条</div>\r\n            <el-pagination :current-page=\"pageData.currentPage\" :page-size=\"pageData.pageCount\" :total=\"pageData.total\"\r\n                :page-sizes=\"[10, 50, 100, 200]\" :layout=\"screenWidth <= 768\r\n                        ? 'total, prev, next, jumper'\r\n                        : 'sizes, total, prev, pager, next'\r\n                    \" @current-change=\"handleCurrentChange\" @size-change=\"handleSizeChange\" v-if=\"fileType !== 6\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport FileTable from '@/components/file/FileTable.vue'\r\nimport FileGrid from './components/FileGrid.vue'\r\nimport FileTimeLine from './components/FileTimeLine.vue'\r\nimport OperationMenu from '@/components/file/OperationMenu.vue'\r\nimport BreadCrumb from '@/components/file/components/BreadCrumb.vue'\r\nimport {\r\n    getFileListByPath,\r\n    getFileListByType,\r\n    getRecoveryFile,\r\n    getMyShareFileList,\r\n    searchFile\r\n} from '@/api/file.js'\r\n\r\nexport default {\r\n    name: 'FileList',\r\n    components: {\r\n        FileTable,\r\n        OperationMenu,\r\n        FileGrid,\r\n        BreadCrumb,\r\n        FileTimeLine\r\n    },\r\n    props: {\r\n        refreshData: {\r\n            type: String,\r\n            required: true,\r\n            default: '0'\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            fileNameSearch: '',\r\n            loading: true, //  表格数据-loading\r\n            fileList: [], //  表格数据-文件列表\r\n            // 分页数据\r\n            pageData: {\r\n                currentPage: 1,\r\n                pageCount: 50,\r\n                total: 0\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        // 左侧菜单选中的文件类型\r\n        fileType() {\r\n            return this.$route.query.fileType ? Number(this.$route.query.fileType) : 0\r\n        },\r\n        // 当前所在路径\r\n        filePath() {\r\n            return this.$route.query.filePath ? this.$route.query.filePath : '/'\r\n        },\r\n        // 文件查看模式 0列表模式 1网格模式 2 时间线模式\r\n        fileModel() {\r\n            return this.$store.getters.fileModel\r\n        },\r\n        // 屏幕宽度\r\n        screenWidth() {\r\n            return this.$store.state.common.screenWidth\r\n        }\r\n    },\r\n    watch: {\r\n        //lml\r\n        filePath() {\r\n            // 当左侧菜单选择“全部”或“我的分享”，文件路径发生变化时，再重新获取文件列表\r\n            if (this.$route.name === 'File' && [0, 8].includes(this.fileType)) {\r\n                this.setPageCount()\r\n                this.getTableDataByType()\r\n            }\r\n        },\r\n        //lml\r\n        fileType() {\r\n            if (this.$route.name === 'File') {\r\n                this.setPageCount()\r\n                this.getTableDataByType()\r\n            }\r\n        },\r\n        // 监听文件查看模式\r\n        fileModel() {\r\n            this.setPageCount()\r\n        },\r\n        refreshData(newVal) {\r\n            // 每当 message 变化，执行逻辑\r\n            console.log('父组件传值变化:', newVal)\r\n\r\n            this.showFileList()\r\n        }\r\n    },\r\n    created() {\r\n        this.setPageCount()\r\n        //lml\r\n        this.getTableDataByType()\r\n    },\r\n    methods: {\r\n\r\n        /**\r\n         * 文件展示区域的空白处右键事件\r\n         * @param {Document} event 右键事件对象\r\n         * //lml\r\n         */\r\n        handleClickRight(event) {\r\n            console.log('文件展示区域的空白处右键事件:')\r\n            event.preventDefault()\r\n            // 只有在全部页面才可以进行以下操作\r\n            if (![6, 8].includes(this.fileType)) {\r\n                this.$openBox\r\n                    .contextMenu({\r\n                        selectedFile: undefined,\r\n                        domEvent: event,\r\n                        serviceEl: this\r\n                    })\r\n                    .then((res) => {\r\n                        if (res === 'confirm') {\r\n                            this.getTableDataByType() //  刷新文件列表\r\n                            // this.$store.dispatch('showStorage') //  刷新存储容量\r\n                        }\r\n                    })\r\n            }\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 调整分页大小\r\n         */\r\n        setPageCount() {\r\n            this.pageData.currentPage = 1\r\n            if (this.fileModel === 0) {\r\n                this.pageData.pageCount = 50\r\n            }\r\n            if (this.fileModel === 1) {\r\n                this.pageData.pageCount = 100\r\n            }\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 获取文件列表数据\r\n         * lml\r\n         */\r\n        getTableDataByType() {\r\n            this.loading = true\r\n            console.log('getTableDataByType===')\r\n            // 分类型\r\n            if (Number(this.fileType)) {\r\n                switch (Number(this.fileType)) {\r\n                    case 6: {\r\n                        this.showFileRecovery() //  回收站\r\n                        break\r\n                    }\r\n                    case 8: {\r\n                        this.showMyShareFile() //  我的分享\r\n                        break\r\n                    }\r\n                    default: {\r\n                        this.showFileList()\r\n                        break\r\n                    }\r\n                }\r\n            } else {\r\n                // 全部文件\r\n                this.showFileList()\r\n            }\r\n            // this.$store.dispatch('showStorage')\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 获取当前路径下的文件列表\r\n         */\r\n        showFileList() {\r\n            console.log('showFileList==')\r\n            let data = {\r\n                fileType: this.fileType,\r\n                filePath: this.filePath,\r\n                currentPage: this.pageData.currentPage,\r\n                pageCount: this.pageData.pageCount\r\n            }\r\n            if (this.refreshData) {\r\n                data.fileType = this.refreshData\r\n            }\r\n            getFileListByPath(data).then((res) => {\r\n                if (res && res.data && res.data.code === 200) {\r\n                    this.fileList = res.data.data.records\r\n                    this.pageData.total = Number(res.data.data.total)\r\n                    this.loading = false\r\n                } else {\r\n                    this.$message.error(res.data.message)\r\n\r\n                    this.loading = false\r\n                }\r\n            })\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 分页组件 | 当前页码改变\r\n         * * //lml\r\n         */\r\n        handleCurrentChange(currentPage) {\r\n            this.pageData.currentPage = currentPage\r\n            this.getTableDataByType()\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 分页组件 | 页大小改变时\r\n         * //lml\r\n         */\r\n        handleSizeChange(pageCount) {\r\n            this.pageData.pageCount = pageCount\r\n            this.getTableDataByType()\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 获取回收站文件列表\r\n         */\r\n        showFileRecovery() {\r\n            console.log('showFileRecovery==')\r\n            getRecoveryFile().then((res) => {\r\n                if (res.data.code === 200) {\r\n                    this.fileList = res.data.data\r\n                    this.loading = false\r\n                } else {\r\n                    this.$message.error(res.data.message)\r\n                }\r\n            })\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 获取我的分享列表\r\n         */\r\n        showMyShareFile() {\r\n            console.log('showMyShareFile==')\r\n            let data = {\r\n                shareFilePath: this.filePath,\r\n                shareBatchNum: this.$route.query.shareBatchNum,\r\n                currentPage: this.pageData.currentPage,\r\n                pageCount: this.pageData.pageCount\r\n            }\r\n            getMyShareFileList(data).then((res) => {\r\n                if (res.success) {\r\n                    this.fileList = res.dataList\r\n                    this.pageData.total = Number(res.total)\r\n                    this.loading = false\r\n                } else {\r\n                    this.$message.error(res.message)\r\n                }\r\n            })\r\n        },\r\n        /**\r\n         * 表格数据获取相关事件 | 根据文件类型展示文件列表\r\n         */\r\n        showFileListByType() {\r\n            console.log('showFileListByType==')\r\n            //  分类型\r\n            let data = {\r\n                fileType: this.fileType,\r\n                currentPage: this.pageData.currentPage,\r\n                pageCount: this.pageData.pageCount\r\n            }\r\n            // 模拟数据\r\n            const res = {\r\n                \"success\": true,\r\n                \"code\": 0,\r\n                \"message\": \"成功\",\r\n                \"data\": null,\r\n                \"dataList\": [\r\n                    {\r\n                        \"fileId\": null,\r\n                        \"timeStampName\": null,\r\n                        \"fileUrl\": null,\r\n                        \"fileSize\": null,\r\n                        \"storageType\": null,\r\n                        \"pointCount\": null,\r\n                        \"identifier\": null,\r\n                        \"userFileId\": \"1896819986112012288\",\r\n                        \"userId\": 1,\r\n                        \"fileName\": \"node_modules\",\r\n                        \"filePath\": \"/\",\r\n                        \"extendName\": \"\",\r\n                        \"isDir\": 1,\r\n                        \"uploadTime\": \"2025-03-04 15:08:20\",\r\n                        \"deleteFlag\": 0,\r\n                        \"deleteTime\": null,\r\n                        \"deleteBatchNum\": null,\r\n                        \"imageWidth\": null,\r\n                        \"imageHeight\": null\r\n                    },\r\n                    {\r\n                        \"fileId\": null,\r\n                        \"timeStampName\": null,\r\n                        \"fileUrl\": null,\r\n                        \"fileSize\": null,\r\n                        \"storageType\": null,\r\n                        \"pointCount\": null,\r\n                        \"identifier\": null,\r\n                        \"userFileId\": \"1902567581638225920\",\r\n                        \"userId\": 1,\r\n                        \"fileName\": \"文件1\",\r\n                        \"filePath\": \"/\",\r\n                        \"extendName\": \"\",\r\n                        \"isDir\": 1,\r\n                        \"uploadTime\": \"2025-03-20 11:47:14\",\r\n                        \"deleteFlag\": 0,\r\n                        \"deleteTime\": null,\r\n                        \"deleteBatchNum\": null,\r\n                        \"imageWidth\": null,\r\n                        \"imageHeight\": null\r\n                    },\r\n                    {\r\n                        \"fileId\": null,\r\n                        \"timeStampName\": null,\r\n                        \"fileUrl\": null,\r\n                        \"fileSize\": null,\r\n                        \"storageType\": null,\r\n                        \"pointCount\": null,\r\n                        \"identifier\": null,\r\n                        \"userFileId\": \"1902567638034837504\",\r\n                        \"userId\": 1,\r\n                        \"fileName\": \"文件及2\",\r\n                        \"filePath\": \"/\",\r\n                        \"extendName\": \"\",\r\n                        \"isDir\": 1,\r\n                        \"uploadTime\": \"2025-03-20 11:47:27\",\r\n                        \"deleteFlag\": 0,\r\n                        \"deleteTime\": null,\r\n                        \"deleteBatchNum\": null,\r\n                        \"imageWidth\": null,\r\n                        \"imageHeight\": null\r\n                    },\r\n                    {\r\n                        \"fileId\": \"1902571481250418688\",\r\n                        \"timeStampName\": null,\r\n                        \"fileUrl\": \"upload/20250320/633424203495cc0eb540a00de0ccd515.docx\",\r\n                        \"fileSize\": 10082,\r\n                        \"storageType\": 0,\r\n                        \"pointCount\": null,\r\n                        \"identifier\": \"633424203495cc0eb540a00de0ccd515\",\r\n                        \"userFileId\": \"1902571481602740224\",\r\n                        \"userId\": 1,\r\n                        \"fileName\": \"12\",\r\n                        \"filePath\": \"/\",\r\n                        \"extendName\": \"docx\",\r\n                        \"isDir\": 0,\r\n                        \"uploadTime\": \"2025-03-20 12:02:43\",\r\n                        \"deleteFlag\": 0,\r\n                        \"deleteTime\": null,\r\n                        \"deleteBatchNum\": null,\r\n                        \"imageWidth\": null,\r\n                        \"imageHeight\": null\r\n                    },\r\n                    {\r\n                        \"fileId\": \"1924646103659642880\",\r\n                        \"timeStampName\": null,\r\n                        \"fileUrl\": \"upload/20250520/89e81c27cf89c246870f0db520a9b34f.mp3\",\r\n                        \"fileSize\": 160111,\r\n                        \"storageType\": 0,\r\n                        \"pointCount\": null,\r\n                        \"identifier\": \"89e81c27cf89c246870f0db520a9b34f\",\r\n                        \"userFileId\": \"1924646103990992896\",\r\n                        \"userId\": 1,\r\n                        \"fileName\": \"13\",\r\n                        \"filePath\": \"/\",\r\n                        \"extendName\": \"mp3\",\r\n                        \"isDir\": 0,\r\n                        \"uploadTime\": \"2025-05-20 09:59:24\",\r\n                        \"deleteFlag\": 0,\r\n                        \"deleteTime\": null,\r\n                        \"deleteBatchNum\": null,\r\n                        \"imageWidth\": null,\r\n                        \"imageHeight\": null\r\n                    },\r\n                ],\r\n                \"total\": 14\r\n            }\r\n            console.log('res=====')\r\n            console.log(res)\r\n            if (res.success) {\r\n                this.fileList = res.dataList\r\n                this.pageData.total = Number(res.total)\r\n                this.loading = false\r\n            } else {\r\n                this.$message.error(res.message)\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 获取搜索文件结果列表\r\n         * @param {string} fileName 文件名称\r\n         */\r\n        getSearchFileList(fileName) {\r\n            this.loading = true\r\n            searchFile({\r\n                currentPage: this.pageData.currentPage,\r\n                pageCount: this.pageData.pageCount,\r\n                fileName: fileName\r\n            }).then((res) => {\r\n                this.loading = false\r\n                if (res.success) {\r\n                    this.fileList = res.dataList.map((item) => {\r\n                        return {\r\n                            ...item,\r\n                            highlightFields: item.highLight.fileName[0]\r\n                        }\r\n                    })\r\n                    this.pageData.total = res.data.totalHits\r\n                } else {\r\n                    this.$message.error(res.message)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* ================= 赛博朋克主题变量 (继承) ================= */\r\n@bg-dark: #0f1219;\r\n@bg-panel: rgba(26, 31, 44, 0.7);\r\n@primary-color: #00f2ff; /* Cyber Cyan */\r\n@accent-color: #7d2ae8;  /* Neon Purple */\r\n@text-main: #e2e8f0; // 浅色主文本\r\n@text-sub: #94a3b8;  // 辅助文本\r\n@border-color: rgba(255, 255, 255, 0.08);\r\n// 定义全局变量\r\n@BorderBase: #e6e6e6; // 假设边框颜色\r\n@RegularText: #333; // 假设常规文本颜色\r\n\r\n.file-list-wrapper.tech-list-wrapper {\r\n    // 容器背景保持一致\r\n    background-color: transparent;\r\n    min-height: calc(100vh - 100px); // 确保容器有足够高度承载内容和分页\r\n\r\n    .tech-header-pad {\r\n        padding: 0;\r\n        margin-bottom: 15px; // 留出面包屑空间\r\n    }\r\n\r\n    .middle-wrapper {\r\n        margin-bottom: 15px;\r\n        padding-top: 5px; // 微调位置\r\n    }\r\n}\r\n\r\n/* ================= 底部本地分页栏 (el-pagination) ================= */\r\n.pagination-wrapper {\r\n    position: relative;\r\n    border-top: 1px solid @BorderBase;\r\n    height: 44px;\r\n    line-height: 44px;\r\n    text-align: center;\r\n    margin-top: 15px; // 确保与列表内容有间距\r\n}\r\n\r\n.tech-pagination-bar-local {\r\n    background: rgba(15, 18, 25, 0.5) !important; // 使用深色背景，略带透明\r\n    border-top: 1px solid @border-color;\r\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: flex-end; // 右对齐分页器\r\n    align-items: center;\r\n    padding: 0 10px; // 内部边距\r\n\r\n    .current-page-count {\r\n        position: absolute;\r\n        left: 16px;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        font-size: 13px;\r\n        color: @text-sub; // 辅助文本颜色\r\n        white-space: nowrap;\r\n    }\r\n    \r\n    // 覆盖 Element UI 分页组件样式\r\n    ::v-deep(.el-pagination) {\r\n        flex-shrink: 0;\r\n        \r\n        // 整体文字颜色\r\n        .el-pagination__total, .el-pagination__sizes, .el-pagination__jump {\r\n            color: @text-sub !important;\r\n        }\r\n\r\n        // 页码按钮\r\n        .btn-prev, .btn-next, .el-pager li {\r\n            background: transparent !important;\r\n            color: @text-main !important;\r\n            border: 1px solid transparent;\r\n            transition: all 0.2s;\r\n            \r\n            &:hover {\r\n                color: @primary-color !important;\r\n            }\r\n        }\r\n        \r\n        // 选中页码\r\n        .el-pager li.active {\r\n            color: @primary-color !important;\r\n            font-weight: bold;\r\n            border: 1px solid @primary-color !important;\r\n            background-color: rgba(0, 242, 255, 0.1) !important;\r\n            border-radius: 4px;\r\n            text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);\r\n        }\r\n\r\n        // 页大小选择器\r\n        .el-input__inner {\r\n            background-color: rgba(255, 255, 255, 0.1) !important;\r\n            border-color: @border-color !important;\r\n            color: @text-main !important;\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":"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A,KAAA4C,QAAA,CAAAC,KAAA,CAAAP,GAAA,CAAAQ,OAAA;QACA;MACA;IACA;IACA;AACA;AACA;IACAS,mBAAA;MACAhC,OAAA,CAAAC,GAAA;MACA;MACA,IAAA1B,IAAA;QACAS,QAAA,OAAAA,QAAA;QACAJ,WAAA,OAAAD,QAAA,CAAAC,WAAA;QACAC,SAAA,OAAAF,QAAA,CAAAE;MACA;MACA;MACA,MAAAkC,GAAA;QACA;QACA;QACA;QACA;QACA,aACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,GACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,GACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,GACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,GACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,EACA;QACA;MACA;MACAf,OAAA,CAAAC,GAAA;MACAD,OAAA,CAAAC,GAAA,CAAAc,GAAA;MACA,IAAAA,GAAA,CAAAe,OAAA;QACA,KAAApD,QAAA,GAAAqC,GAAA,CAAAgB,QAAA;QACA,KAAApD,QAAA,CAAAG,KAAA,GAAAK,MAAA,CAAA4B,GAAA,CAAAjC,KAAA;QACA,KAAAL,OAAA;MACA;QACA,KAAA4C,QAAA,CAAAC,KAAA,CAAAP,GAAA,CAAAQ,OAAA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAU,kBAAAC,QAAA;MACA,KAAAzD,OAAA;MACA,IAAA0D,gBAAA;QACAvD,WAAA,OAAAD,QAAA,CAAAC,WAAA;QACAC,SAAA,OAAAF,QAAA,CAAAE,SAAA;QACAqD,QAAA,EAAAA;MACA,GAAApB,IAAA,CAAAC,GAAA;QACA,KAAAtC,OAAA;QACA,IAAAsC,GAAA,CAAAe,OAAA;UACA,KAAApD,QAAA,GAAAqC,GAAA,CAAAgB,QAAA,CAAAK,GAAA,CAAAC,IAAA;YACA;cACA,GAAAA,IAAA;cACAC,eAAA,EAAAD,IAAA,CAAAE,SAAA,CAAAL,QAAA;YACA;UACA;UACA,KAAAvD,QAAA,CAAAG,KAAA,GAAAiC,GAAA,CAAAxC,IAAA,CAAAiE,SAAA;QACA;UACA,KAAAnB,QAAA,CAAAC,KAAA,CAAAP,GAAA,CAAAQ,OAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}