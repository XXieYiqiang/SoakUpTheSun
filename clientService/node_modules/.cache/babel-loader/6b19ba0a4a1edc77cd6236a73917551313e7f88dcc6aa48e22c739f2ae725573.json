{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'FileGrid',\n  props: {\n    // 文件类型\n    fileType: {\n      required: true,\n      type: Number\n    },\n    // 文件路径\n    filePath: {\n      required: true,\n      type: String\n    },\n    fileList: Array,\n    //  文件列表\n    loading: Boolean\n  },\n  data() {\n    return {\n      fileListSorted: [],\n      officeFileType: ['ppt', 'pptx', 'doc', 'docx', 'xls', 'xlsx'],\n      selectedFile: {}\n    };\n  },\n  computed: {\n    /**\r\n     * gridSize: 图标大小\r\n     *  */\n    ...mapGetters(['gridSize']),\n    // 是否批量操作\n    isBatchOperation() {\n      return this.$store.state.fileList.isBatchOperation;\n    },\n    // 批量操作模式 - 被选中的文件\n    selectedFileList() {\n      let res = this.fileListSorted.filter(item => item.checked);\n      return res;\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return this.$store.state.common.screenWidth;\n    }\n  },\n  watch: {\n    // 文件平铺模式 排序-文件夹在前\n    fileList(newValue) {\n      this.fileListSorted = [...newValue].sort((pre, next) => {\n        return next.isDir - pre.isDir;\n      }).map(item => {\n        return {\n          ...item,\n          checked: false\n        };\n      });\n    },\n    // 批量操作模式 - 监听被选中的文件\n    selectedFileList(newValue) {\n      this.$store.commit('changeSelectedFiles', newValue);\n      this.$store.commit('changeIsBatchOperation', newValue.length !== 0);\n    }\n  },\n  methods: {\n    /**\r\n     * 文件鼠标右键事件\r\n     * @param {object} item 文件信息\r\n     * @param {number} index 文件索引\r\n     * @param {object} event 鼠标事件信息\r\n     */\n    handleContextMenu(item, index, event) {\n      // 阻止右键事件冒泡\n      event.cancelBubble = true;\n      // xs 以上的屏幕\n      if (this.screenWidth > 768) {\n        this.selectedFile = item;\n        if (!this.isBatchOperation) {\n          event.preventDefault();\n          this.$openBox.contextMenu({\n            selectedFile: item,\n            domEvent: event\n          }).then(res => {\n            this.selectedFile = {};\n            if (res === 'confirm') {\n              this.$emit('getTableDataByType'); //  刷新文件列表\n              this.$store.dispatch('showStorage'); //  刷新存储容量\n            }\n          });\n        }\n      }\n    },\n    /**\r\n     * 更多图标点击事件\r\n     * @description 打开右键菜单\r\n     * @param {object} item 当前行数据\r\n     * @param {object} event 当前右键元素\r\n     */\n    handleClickMore(item, event) {\n      this.selectedFile = item;\n      if (!this.isBatchOperation) {\n        event.preventDefault();\n        this.$openBox.contextMenu({\n          selectedFile: item,\n          domEvent: event\n        }).then(res => {\n          this.selectedFile = {};\n          if (res === 'confirm') {\n            this.$emit('getTableDataByType'); //  刷新文件列表\n            this.$store.dispatch('showStorage'); //  刷新存储容量\n          }\n        });\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}