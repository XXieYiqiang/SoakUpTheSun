{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nrequire(\"core-js/modules/es.iterator.reduce.js\");\nlet idCounter = 3; // ä» 3 å¼€å§‹ï¼Œå› ä¸ºåˆå§‹ nodes ä¸­ n1 å’Œ n2 å·²å ç”¨\nconst genId = prefix => prefix + idCounter++;\nvar _default = exports.default = {\n  name: 'InfiniteCanvasMedia',\n  data() {\n    return {\n      //=============================\n      // --- å¤šé€‰ & æ¡†é€‰çŠ¶æ€ (æ–°å¢/ä¿®æ”¹) ---\n      selectedNodeIds: [],\n      // å­˜å‚¨æ‰€æœ‰é€‰ä¸­èŠ‚ç‚¹çš„ ID\n      isBoxSelecting: false,\n      // æ˜¯å¦å¤„äºæ¡†é€‰æ¨¡å¼ (ç”±å³é”®è§¦å‘)\n      boxSelectStart: {\n        x: 0,\n        y: 0\n      },\n      // æ¡†é€‰èµ·å§‹ç‚¹ (å±å¹•åæ ‡)\n      boxSelectEnd: {\n        x: 0,\n        y: 0\n      },\n      // æ¡†é€‰ç»“æŸç‚¹ (å±å¹•åæ ‡)\n\n      // --- äº¤äº’çŠ¶æ€ (ä¿®æ”¹ groupDragOrigin) ---\n      draggingNode: null,\n      nodeDragStart: {\n        x: 0,\n        y: 0\n      },\n      // å­˜å‚¨è¢«æ‹–æ‹½ç»„å†…æ‰€æœ‰èŠ‚ç‚¹çš„åˆå§‹ä½ç½® { id: {x, y} }\n      groupDragOrigin: {},\n      //=============================\n\n      // æ‚¬æµ®è¾“å…¥æ¡†çŠ¶æ€\n      globalSearchText: 'pav',\n      // ç¤ºä¾‹æ–‡æœ¬ï¼Œæ¨¡ä»¿å›¾ç‰‡ä¸­çš„è¾“å…¥\n\n      // æ–°å¢ï¼šModal çŠ¶æ€ç®¡ç†\n      isModalVisible: false,\n      pendingParentNode: null,\n      // æš‚å­˜çš„çˆ¶èŠ‚ç‚¹å¯¹è±¡\n      newChildType: 'text',\n      // æ–°å­èŠ‚ç‚¹ç±»å‹\n      newChildText: '',\n      // æ–°å­èŠ‚ç‚¹æ–‡æœ¬å†…å®¹\n      newChildSrc: '',\n      // æ–°å­èŠ‚ç‚¹ URL (ç”¨äºå›¾ç‰‡/è§†é¢‘)\n      modalPos: {\n        x: 0,\n        y: 0\n      },\n      // å¼¹æ¡†åœ¨**ç”»å¸ƒåæ ‡ç³»**ä¸­çš„ä½ç½® (æ–°å¢åŠ )\n\n      // è§†å›¾å˜æ¢\n      offsetX: 0,\n      offsetY: 0,\n      scale: 1,\n      // äº¤äº’çŠ¶æ€\n      isPanning: false,\n      panStart: {\n        x: 0,\n        y: 0\n      },\n      panOrigin: {\n        x: 0,\n        y: 0\n      },\n      draggingNode: null,\n      nodeDragStart: {\n        x: 0,\n        y: 0\n      },\n      nodeOrigin: {\n        x: 0,\n        y: 0\n      },\n      resizingNode: null,\n      resizeStart: {\n        x: 0,\n        y: 0\n      },\n      resizeOriginSize: {\n        w: 0,\n        h: 0\n      },\n      selectedNodeId: null,\n      // æ•°æ®æ¨¡å‹\n      nodes: [{\n        id: genId('n'),\n        x: 0,\n        y: 0,\n        width: 300,\n        height: 200,\n        title: 'æ¬¢è¿ä½¿ç”¨',\n        contentType: 'text',\n        // text | image | video\n        content: 'åˆå§‹èŠ‚ç‚¹',\n        src: ''\n      }],\n      edges: [\n        // { id: genId('e'), fromId: 'n1', toId: 'n2' }\n      ]\n    };\n  },\n  mounted() {\n    // ç»‘å®šå…¨å±€äº‹ä»¶ï¼Œé˜²æ­¢é¼ æ ‡æ‹–å‡ºç”»å¸ƒåŒºåŸŸå¯¼è‡´çŠ¶æ€å¡æ­»\n    window.addEventListener('mousemove', this.onWindowMouseMove);\n    window.addEventListener('mouseup', this.onWindowMouseUp);\n    // å¢åŠ ç‚¹å‡»ç”»å¸ƒå¤–éƒ¨å…³é—­å¼¹çª—çš„ç›‘å¬ (é‡è¦)\n    window.addEventListener('mousedown', this.onWindowMouseDownCloseModal);\n  },\n  computed: {\n    isContentValid() {\n      if (this.newChildType === 'text') {\n        return this.newChildText.trim().length > 0;\n      } else {\n        return this.newChildSrc.trim().length > 0;\n      }\n    },\n    /**\r\n     * è®¡ç®—æµ®åŠ¨å¼¹æ¡†çš„æ ·å¼ (å±å¹•åæ ‡)\r\n     */\n    getModalStyle() {\n      if (!this.isModalVisible) return {};\n      const screenPos = this.worldToScreen(this.modalPos.x, this.modalPos.y);\n      return {\n        transform: `translate(${screenPos.x}px, ${screenPos.y}px)`\n        // å¼¹æ¡†ä¸éšç¼©æ”¾å˜åŒ–ï¼Œä¿æŒå›ºå®šå¤§å°\n        // transform: `translate(${screenPos.x}px, ${screenPos.y}px) scale(1)`, \n        // transform-origin: 0 0;\n      };\n    },\n    /**\r\n     * è®¡ç®—æ¡†é€‰çŸ©å½¢çš„æ ·å¼ (å±å¹•åæ ‡)\r\n     */\n    boxSelectStyle() {\n      if (!this.isBoxSelecting) return {};\n      const startX = Math.min(this.boxSelectStart.x, this.boxSelectEnd.x);\n      const startY = Math.min(this.boxSelectStart.y, this.boxSelectEnd.y);\n      const width = Math.abs(this.boxSelectStart.x - this.boxSelectEnd.x);\n      const height = Math.abs(this.boxSelectStart.y - this.boxSelectEnd.y);\n      return {\n        left: startX + 'px',\n        top: startY + 'px',\n        width: width + 'px',\n        height: height + 'px'\n      };\n    },\n    /**\r\n     * å¿«é€Ÿè·å–é€‰ä¸­çš„èŠ‚ç‚¹å¯¹è±¡æ•°ç»„\r\n     */\n    getSelectedNodes() {\n      return this.nodes.filter(n => this.selectedNodeIds.includes(n.id));\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('mousemove', this.onWindowMouseMove);\n    window.removeEventListener('mouseup', this.onWindowMouseUp);\n    window.removeEventListener('mousedown', this.onWindowMouseDownCloseModal);\n  },\n  methods: {\n    /**\r\n     * ç‚¹å‡»ç”»å¸ƒéå¼¹çª—åŒºåŸŸæ—¶å…³é—­å¼¹çª— (æ–°å¢åŠ )\r\n     */\n    onWindowMouseDownCloseModal(e) {\n      if (!this.isModalVisible) return;\n      // æ£€æŸ¥ç‚¹å‡»äº‹ä»¶æ˜¯å¦å‘ç”Ÿåœ¨å¼¹çª—å†…éƒ¨\n      const modal = this.$el.querySelector('.modal-content-floating');\n      if (modal && !modal.contains(e.target)) {\n        this.closeModal();\n      }\n    },\n    /**\r\n     * Enter ç¡®è®¤\r\n     */\n    handleFloatingInputEnter() {\n      if (this.globalSearchText.trim()) {\n        alert(`è§¦å‘æ“ä½œï¼š${this.globalSearchText} (æ­¤å¤„åº”æ‰§è¡Œæœç´¢æˆ–ç”Ÿæˆé€»è¾‘)`);\n      }\n    },\n    // æ·»åŠ å­èŠ‚ç‚¹-æ‰“å¼€å¼¹çª— (å·²ä¿®æ”¹å®šä½è®¡ç®—)\n    openAddChildModal(parent) {\n      this.pendingParentNode = parent;\n      this.newChildType = parent.contentType; // é»˜è®¤ç»§æ‰¿çˆ¶èŠ‚ç‚¹ç±»å‹\n      this.newChildText = '';\n      this.newChildSrc = '';\n      this.isModalVisible = true;\n\n      // --- æ–°å¢ï¼šè®¡ç®—å¼¹æ¡†åº”è¯¥å‡ºç°çš„ä½ç½® (ä¸–ç•Œåæ ‡) ---\n      // ç›®æ ‡ä½ç½®: çˆ¶èŠ‚ç‚¹å³ä¾§ 20px å¤„\n      this.modalPos = {\n        x: parent.x + parent.width + 20,\n        y: parent.y // ä¸çˆ¶èŠ‚ç‚¹é¡¶éƒ¨å¯¹é½\n      };\n\n      // èšç„¦è¾“å…¥æ¡† (ç¡®ä¿å¼¹çª—å·²æ¸²æŸ“)\n      this.$nextTick(() => {\n        const input = this.$el.querySelector('.modal-content-floating textarea, .modal-content-floating input');\n        if (input) input.focus();\n      });\n    },\n    /**\r\n     * å…³é—­å¼¹æ¡†\r\n     */\n    closeModal() {\n      this.isModalVisible = false;\n      this.pendingParentNode = null;\n      this.newChildText = '';\n      this.newChildSrc = '';\n      this.modalPos = {\n        x: 0,\n        y: 0\n      }; // æ¸…ç©ºä½ç½®\n    },\n    /**\r\n     * å¼¹æ¡†ç¡®è®¤æ“ä½œ\r\n     */\n    confirmAddChild() {\n      if (!this.isContentValid) return;\n      const parent = this.pendingParentNode;\n      if (!parent) return;\n      const child = {\n        id: genId('n'),\n        // è‡ªåŠ¨å®šä½åœ¨çˆ¶èŠ‚ç‚¹å³ä¸‹æ–¹ (ç•¥å¾®åç§»ä»¥é¿å…é®æŒ¡)\n        x: parent.x + parent.width + 100,\n        y: parent.y + parent.height + 50,\n        width: 200,\n        height: 150,\n        title: 'å­èŠ‚ç‚¹',\n        contentType: this.newChildType,\n        content: this.newChildType === 'text' ? this.newChildText : '',\n        src: this.newChildType !== 'text' ? this.newChildSrc : ''\n      };\n      this.nodes.push(child);\n      this.edges.push({\n        id: genId('e'),\n        fromId: parent.id,\n        toId: child.id\n      });\n      this.closeModal(); // å®Œæˆæ“ä½œåå…³é—­å¼¹çª—\n    },\n    // --- åæ ‡ç³»ç»Ÿæ ¸å¿ƒ ---\n    worldToScreen(x, y) {\n      return {\n        x: (x + this.offsetX) * this.scale,\n        y: (y + this.offsetY) * this.scale\n      };\n    },\n    screenToWorld(x, y) {\n      return {\n        x: x / this.scale - this.offsetX,\n        y: y / this.scale - this.offsetY\n      };\n    },\n    // --- æ¸²æŸ“è¾…åŠ© ---\n    getNodeStyle(node) {\n      const pos = this.worldToScreen(node.x, node.y);\n      return {\n        transform: `translate(${pos.x}px, ${pos.y}px)`,\n        // ä½¿ç”¨ transform æ€§èƒ½æ›´å¥½\n        width: node.width * this.scale + 'px',\n        height: node.height * this.scale + 'px',\n        zIndex: this.selectedNodeId === node.id ? 10 : 1\n      };\n    },\n    getEdgePath(edge) {\n      const from = this.nodes.find(n => n.id === edge.fromId);\n      const to = this.nodes.find(n => n.id === edge.toId);\n      if (!from || !to) return '';\n\n      // ä¿æŒè¿çº¿å§‹ç»ˆä½¿ç”¨ä¸–ç•Œåæ ‡ç³»è¿›è¡Œè®¡ç®—ï¼Œç„¶åè½¬æ¢åˆ°å±å¹•åæ ‡\n      const startWorldX = from.x + from.width;\n      const startWorldY = from.y + from.height / 2;\n      const endWorldX = to.x;\n      const endWorldY = to.y + to.height / 2;\n      const start = this.worldToScreen(startWorldX, startWorldY);\n      const end = this.worldToScreen(endWorldX, endWorldY);\n      const dist = Math.abs(end.x - start.x) * 0.5;\n      const cp1 = {\n        x: start.x + dist,\n        y: start.y\n      }; // æ§åˆ¶ç‚¹1\n      const cp2 = {\n        x: end.x - dist,\n        y: end.y\n      }; // æ§åˆ¶ç‚¹2\n\n      return `M ${start.x} ${start.y} C ${cp1.x} ${cp1.y} ${cp2.x} ${cp2.y} ${end.x} ${end.y}`;\n    },\n    //ä¿®æ”¹2\n    // --- äº¤äº’äº‹ä»¶ ---\n    onCanvasMouseDown(e) {\n      // if (e.button !== 0) return; // åªå“åº”å·¦é”®\n      // this.isPanning = true;\n      // this.panStart = { x: e.clientX, y: e.clientY };\n      // this.panOrigin = { x: this.offsetX, y: this.offsetY };\n      // this.selectedNodeId = null; // ç‚¹å‡»ç©ºç™½å–æ¶ˆé€‰ä¸­\n\n      this.closeModal();\n      const rect = this.$refs.canvas.getBoundingClientRect();\n      const clickPos = {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      };\n      if (e.button === 0) {\n        // å·¦é”® (é»˜è®¤è¡Œä¸ºï¼šå¹³ç§»)\n        this.isPanning = true;\n        this.panStart = {\n          x: e.clientX,\n          y: e.clientY\n        };\n        this.panOrigin = {\n          x: this.offsetX,\n          y: this.offsetY\n        };\n        this.selectedNodeIds = []; // ç‚¹å‡»ç©ºç™½å–æ¶ˆæ‰€æœ‰é€‰ä¸­\n      } else if (e.button === 2) {\n        // å³é”® (æ–°è¡Œä¸ºï¼šæ¡†é€‰)\n        e.preventDefault(); // é˜»æ­¢æµè§ˆå™¨é»˜è®¤å³é”®èœå• (è™½ç„¶ template é‡ŒåŠ äº† @contextmenu.preventï¼Œè¿™é‡Œä½œä¸ºä¿é™©)\n        this.isBoxSelecting = true;\n        this.isPanning = false; // ç¦ç”¨å¹³ç§»\n        this.selectedNodeIds = []; // å¼€å§‹æ¡†é€‰æ—¶æ¸…ç©ºç°æœ‰é€‰ä¸­\n        this.boxSelectStart = clickPos;\n        this.boxSelectEnd = clickPos;\n      }\n\n      // ç‚¹å‡»ç”»å¸ƒæ—¶å…³é—­å¼¹çª— (æ¬¡è¦ï¼Œä¸»è¦åœ¨ window çº§å¤„ç†)\n      // this.closeModal(); \n    },\n    //ä¿®æ”¹1ï¼š\n    onNodeMouseDown(node, e) {\n      // this.draggingNode = node;\n      // this.selectedNodeId = node.id;\n      // this.nodeDragStart = { x: e.clientX, y: e.clientY };\n      // this.nodeOrigin = { x: node.x, y: node.y };\n      // this.closeModal(); // å¼€å§‹æ‹–æ‹½èŠ‚ç‚¹æ—¶å…³é—­å¼¹çª—\n\n      this.closeModal();\n\n      // åªå“åº”å·¦é”®æ‹–æ‹½èŠ‚ç‚¹\n      if (e.button !== 0) return;\n      this.draggingNode = node;\n      this.nodeDragStart = {\n        x: e.clientX,\n        y: e.clientY\n      };\n\n      // 1. å¤„ç†é€‰ä¸­çŠ¶æ€ï¼š\n      if (e.shiftKey || e.ctrlKey || e.metaKey) {\n        // æŒ‰ä½ Shift/Ctrl/Cmdï¼Œåˆ‡æ¢é€‰ä¸­çŠ¶æ€\n        const index = this.selectedNodeIds.indexOf(node.id);\n        if (index > -1) {\n          this.selectedNodeIds.splice(index, 1); // ç§»é™¤\n        } else {\n          this.selectedNodeIds.push(node.id); // æ·»åŠ \n        }\n      } else if (!this.selectedNodeIds.includes(node.id)) {\n        // æœªé€‰ä¸­ä¸”æœªæŒ‰é”®ï¼Œåˆ™æ¸…ç©ºå¤šé€‰ï¼Œé€‰ä¸­å½“å‰èŠ‚ç‚¹\n        this.selectedNodeIds = [node.id];\n      }\n\n      // 2. å‡†å¤‡ç¾¤ç»„æ‹–æ‹½ (è®°å½•æ•´ä¸ªç»„çš„åˆå§‹ä½ç½®)\n      if (this.selectedNodeIds.includes(node.id)) {\n        this.groupDragOrigin = this.getSelectedNodes.reduce((acc, n) => {\n          acc[n.id] = {\n            x: n.x,\n            y: n.y\n          };\n          return acc;\n        }, {});\n      } else {\n        // å¦åˆ™åªæ‹–æ‹½å½“å‰èŠ‚ç‚¹\n        this.groupDragOrigin = {\n          [node.id]: {\n            x: node.x,\n            y: node.y\n          }\n        };\n      }\n    },\n    onNodeResizeMouseDown(node, e) {\n      this.resizingNode = node;\n      this.resizeStart = {\n        x: e.clientX,\n        y: e.clientY\n      };\n      this.resizeOriginSize = {\n        w: node.width,\n        h: node.height\n      };\n      this.closeModal(); // å¼€å§‹è°ƒæ•´å¤§å°æ—¶å…³é—­å¼¹çª—\n    },\n    // --- å…¨å±€é¼ æ ‡ç§»åŠ¨ (Windowçº§) ---\n    onWindowMouseMove(e) {\n      const canvasRect = this.$refs.canvas.getBoundingClientRect();\n      const mouseX = e.clientX - canvasRect.left;\n      const mouseY = e.clientY - canvasRect.top;\n\n      // 1. æ‹–æ‹½èŠ‚ç‚¹\n      // if (this.draggingNode) {\n      //     const dx = (e.clientX - this.nodeDragStart.x) / this.scale;\n      //     const dy = (e.clientY - this.nodeDragStart.y) / this.scale;\n      //     this.draggingNode.x = this.nodeOrigin.x + dx;\n      //     this.draggingNode.y = this.nodeOrigin.y + dy;\n      //     return;\n      // }\n      // 1. æ‹–æ‹½èŠ‚ç‚¹ (ç¾¤ç»„ç§»åŠ¨)\n      if (this.draggingNode) {\n        const dx = (e.clientX - this.nodeDragStart.x) / this.scale;\n        const dy = (e.clientY - this.nodeDragStart.y) / this.scale;\n\n        // éå† groupDragOrigin ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ›´æ–°å®ƒä»¬çš„ä½ç½®\n        for (const nodeId in this.groupDragOrigin) {\n          const node = this.nodes.find(n => n.id === nodeId);\n          if (node) {\n            const origin = this.groupDragOrigin[nodeId];\n            node.x = origin.x + dx;\n            node.y = origin.y + dy;\n          }\n        }\n        return; // æ‹–æ‹½èŠ‚ç‚¹æ—¶ï¼Œä¸æ‰§è¡Œå…¶ä»–é€»è¾‘\n      }\n      // 2. è°ƒæ•´å¤§å°\n      if (this.resizingNode) {\n        const dx = (e.clientX - this.resizeStart.x) / this.scale;\n        const dy = (e.clientY - this.resizeStart.y) / this.scale;\n        this.resizingNode.width = Math.max(150, this.resizeOriginSize.w + dx);\n        this.resizingNode.height = Math.max(100, this.resizeOriginSize.h + dy);\n        return;\n      }\n      // 3. æ‹–æ‹½ç”»å¸ƒ\n      // if (this.isPanning) {\n      //     const dx = (e.clientX - this.panStart.x) / this.scale;\n      //     const dy = (e.clientY - this.panStart.y) / this.scale;\n      //     this.offsetX = this.panOrigin.x + dx;\n      //     this.offsetY = this.panOrigin.y + dy;\n      // }\n      // 3. æ¡†é€‰ (å³é”®æ‹–æ‹½)\n      if (this.isBoxSelecting) {\n        this.boxSelectEnd = {\n          x: mouseX,\n          y: mouseY\n        };\n\n        // ç¢°æ’æ£€æµ‹ï¼šè®¡ç®—æ¡†é€‰çŸ©å½¢çš„å±å¹•åæ ‡è¾¹ç•Œ\n        const rect = {\n          minX: Math.min(this.boxSelectStart.x, this.boxSelectEnd.x),\n          minY: Math.min(this.boxSelectStart.y, this.boxSelectEnd.y),\n          maxX: Math.max(this.boxSelectStart.x, this.boxSelectEnd.x),\n          maxY: Math.max(this.boxSelectStart.y, this.boxSelectEnd.y)\n        };\n        const newSelectedIds = [];\n        this.nodes.forEach(node => {\n          if (this.checkNodeIntersection(node, rect)) {\n            newSelectedIds.push(node.id);\n          }\n        });\n        // å®æ—¶æ›´æ–°é€‰ä¸­çŠ¶æ€\n        this.selectedNodeIds = newSelectedIds;\n        return;\n      }\n    },\n    //ä¿®æ”¹3\n    onWindowMouseUp(e) {\n      // this.isPanning = false;\n      // this.draggingNode = null;\n      // this.resizingNode = null;\n\n      if (e.button === 0) {\n        // å·¦é”®æŠ¬èµ·\n        this.isPanning = false;\n        this.draggingNode = null;\n        this.resizingNode = null;\n        this.groupDragOrigin = {}; // æ¸…ç©ºç¾¤ç»„åˆå§‹ä½ç½®\n      } else if (e.button === 2) {\n        // å³é”®æŠ¬èµ· (ç»“æŸæ¡†é€‰)\n        this.isBoxSelecting = false;\n      }\n    },\n    onWheel(e) {\n      const zoomIntensity = 0.1;\n      const delta = e.deltaY > 0 ? -zoomIntensity : zoomIntensity;\n      const newScale = Math.min(5, Math.max(0.1, this.scale + delta));\n\n      // è®¡ç®—é¼ æ ‡åœ¨ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®ï¼Œç¡®ä¿ç¼©æ”¾ä»¥é¼ æ ‡ä¸ºä¸­å¿ƒ\n      const rect = this.$refs.canvas.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      const worldPos = this.screenToWorld(mouseX, mouseY);\n\n      // æ›´æ–°ç¼©æ”¾\n      this.scale = newScale;\n\n      // ä¿®æ­£ Offset ä½¿å¾—ä¸–ç•Œåæ ‡ä¸‹çš„é¼ æ ‡ä½ç½®ä¿æŒä¸å˜\n      this.offsetX = mouseX / this.scale - worldPos.x;\n      this.offsetY = mouseY / this.scale - worldPos.y;\n    },\n    // --- ä¸šåŠ¡é€»è¾‘ ---\n    addNode(type = 'text') {\n      // åœ¨è§†å£ä¸­å¿ƒç”Ÿæˆ\n      const center = this.screenToWorld(this.$refs.canvas.clientWidth / 2, this.$refs.canvas.clientHeight / 2);\n      this.nodes.push({\n        id: genId('n'),\n        x: center.x - 100,\n        y: center.y - 75,\n        width: 200,\n        height: 150,\n        title: 'æ–°èŠ‚ç‚¹',\n        contentType: type,\n        content: '',\n        src: ''\n      });\n    },\n    changeNodeType(node, type) {\n      node.contentType = type;\n    },\n    deleteNode(id) {\n      this.nodes = this.nodes.filter(n => n.id !== id);\n      this.edges = this.edges.filter(e => e.fromId !== id && e.toId !== id);\n    }\n  }\n};","map":{"version":3,"names":["idCounter","genId","prefix","_default","exports","default","name","data","selectedNodeIds","isBoxSelecting","boxSelectStart","x","y","boxSelectEnd","draggingNode","nodeDragStart","groupDragOrigin","globalSearchText","isModalVisible","pendingParentNode","newChildType","newChildText","newChildSrc","modalPos","offsetX","offsetY","scale","isPanning","panStart","panOrigin","nodeOrigin","resizingNode","resizeStart","resizeOriginSize","w","h","selectedNodeId","nodes","id","width","height","title","contentType","content","src","edges","mounted","window","addEventListener","onWindowMouseMove","onWindowMouseUp","onWindowMouseDownCloseModal","computed","isContentValid","trim","length","getModalStyle","screenPos","worldToScreen","transform","boxSelectStyle","startX","Math","min","startY","abs","left","top","getSelectedNodes","filter","n","includes","beforeDestroy","removeEventListener","methods","e","modal","$el","querySelector","contains","target","closeModal","handleFloatingInputEnter","alert","openAddChildModal","parent","$nextTick","input","focus","confirmAddChild","child","push","fromId","toId","screenToWorld","getNodeStyle","node","pos","zIndex","getEdgePath","edge","from","find","to","startWorldX","startWorldY","endWorldX","endWorldY","start","end","dist","cp1","cp2","onCanvasMouseDown","rect","$refs","canvas","getBoundingClientRect","clickPos","clientX","clientY","button","preventDefault","onNodeMouseDown","shiftKey","ctrlKey","metaKey","index","indexOf","splice","reduce","acc","onNodeResizeMouseDown","canvasRect","mouseX","mouseY","dx","dy","nodeId","origin","max","minX","minY","maxX","maxY","newSelectedIds","forEach","checkNodeIntersection","onWheel","zoomIntensity","delta","deltaY","newScale","worldPos","addNode","type","center","clientWidth","clientHeight","changeNodeType","deleteNode"],"sources":["src/views/GroupView.vue"],"sourcesContent":["<template>\r\n    <div class=\"ice-wrapper\">\r\n        <div class=\"ice-toolbar\">\r\n            <div class=\"btn-group\">\r\n                <button @click=\"addNode('text')\">æ·»åŠ æ–‡æœ¬</button>\r\n                <button @click=\"addNode('image')\">æ·»åŠ å›¾ç‰‡</button>\r\n                <button @click=\"addNode('video')\">æ·»åŠ è§†é¢‘</button>\r\n            </div>\r\n            <span class=\"info\">\r\n                æ»šè½®ï¼šç¼©æ”¾ | ç©ºç™½å¤„æ‹–åŠ¨ï¼šå¹³ç§» | å³ä¸‹è§’ï¼šè°ƒæ•´å¤§å° | èŠ‚ç‚¹é¡¶éƒ¨ï¼šåˆ‡æ¢ç±»å‹\r\n            </span>\r\n        </div>\r\n\r\n        <div class=\"ice-canvas\" ref=\"canvas\" @mousedown=\"onCanvasMouseDown\" @contextmenu.prevent\r\n            @wheel.prevent=\"onWheel\">\r\n            <svg class=\"ice-edges-layer\">\r\n                <path v-for=\"edge in edges\" :key=\"edge.id\" :d=\"getEdgePath(edge)\" fill=\"none\" stroke=\"#475569\"\r\n                    stroke-width=\"2\" stroke-dasharray=\"5,5\" />\r\n                <path v-for=\"edge in edges\" :key=\"'main-' + edge.id\" :d=\"getEdgePath(edge)\" fill=\"none\" stroke=\"#3b82f6\"\r\n                    stroke-width=\"1.5\" />\r\n            </svg>\r\n\r\n            <div v-for=\"node in nodes\" :key=\"node.id\" class=\"ice-node\"\r\n                :class=\"{ 'is-selected': selectedNodeId === node.id }\" :style=\"getNodeStyle(node)\"\r\n                @mousedown.stop=\"onNodeMouseDown(node, $event)\">\r\n                <div class=\"ice-node-header\">\r\n                    <div class=\"ice-node-title\">{{ node.title || node.id }}</div>\r\n                    <div class=\"ice-node-actions\">\r\n                        <span title=\"åˆ‡æ¢ä¸ºæ–‡æœ¬\" @click.stop=\"changeNodeType(node, 'text')\"\r\n                            :class=\"{ active: node.contentType === 'text' }\">ğŸ“</span>\r\n                        <span title=\"åˆ‡æ¢ä¸ºå›¾ç‰‡\" @click.stop=\"changeNodeType(node, 'image')\"\r\n                            :class=\"{ active: node.contentType === 'image' }\">ğŸ–¼ï¸</span>\r\n                        <span title=\"åˆ‡æ¢ä¸ºè§†é¢‘\" @click.stop=\"changeNodeType(node, 'video')\"\r\n                            :class=\"{ active: node.contentType === 'video' }\">ğŸ¬</span>\r\n                        <span class=\"delete-btn\" @click.stop=\"deleteNode(node.id)\">âœ•</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"ice-node-content\">\r\n\r\n                    <textarea v-if=\"node.contentType === 'text'\" v-model=\"node.content\" class=\"ice-node-textarea\"\r\n                        placeholder=\"è¾“å…¥æ–‡æœ¬...\" @mousedown.stop />\r\n\r\n                    <div v-else-if=\"node.contentType === 'image'\" class=\"ice-media-box\">\r\n                        <img v-if=\"node.src\" :src=\"node.src\" draggable=\"false\" />\r\n                        <div v-else class=\"placeholder\">è¯·è¾“å…¥å›¾ç‰‡ URL</div>\r\n                        <input class=\"url-input\" v-model=\"node.src\" placeholder=\"å›¾ç‰‡åœ°å€ https://...\" @mousedown.stop />\r\n                    </div>\r\n\r\n                    <div v-else-if=\"node.contentType === 'video'\" class=\"ice-media-box\">\r\n                        <video v-if=\"node.src\" :src=\"node.src\" controls muted></video>\r\n                        <div v-else class=\"placeholder\">è¯·è¾“å…¥è§†é¢‘ URL</div>\r\n                        <input class=\"url-input\" v-model=\"node.src\" placeholder=\"è§†é¢‘åœ°å€ mp4/webm...\" @mousedown.stop />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div class=\"ice-node-footer\">\r\n                    <span class=\"tag\">{{ node.contentType }}</span>\r\n                    <button class=\"add-child-btn\" @click.stop=\"openAddChildModal(node)\">\r\n                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n                            stroke-width=\"4\">\r\n                            <path d=\"M12 5v14M5 12h14\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n\r\n                <div class=\"ice-resize-handle\" @mousedown.stop=\"onNodeResizeMouseDown(node, $event)\"></div>\r\n            </div>\r\n\r\n            <div v-if=\"isModalVisible\" class=\"modal-content-floating\" :style=\"getModalStyle\">\r\n                <h3>ä¸ºèŠ‚ç‚¹ \"{{ pendingParentNode.title || pendingParentNode.id }}\" æ·»åŠ å­èŠ‚ç‚¹</h3>\r\n                <p>è¯·é€‰æ‹©ç±»å‹å¹¶è¾“å…¥å†…å®¹ï¼š</p>\r\n\r\n                <div class=\"modal-type-switcher\">\r\n                    <button :class=\"{ active: newChildType === 'text' }\" @click=\"newChildType = 'text'\">æ–‡æœ¬ ğŸ“</button>\r\n                    <button :class=\"{ active: newChildType === 'image' }\" @click=\"newChildType = 'image'\">å›¾ç‰‡\r\n                        ğŸ–¼ï¸</button>\r\n                    <button :class=\"{ active: newChildType === 'video' }\" @click=\"newChildType = 'video'\">è§†é¢‘ ğŸ¬</button>\r\n                </div>\r\n\r\n                <textarea v-if=\"newChildType === 'text'\" v-model=\"newChildText\" placeholder=\"è¯·è¾“å…¥å­èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹...\" rows=\"4\"\r\n                    autofocus></textarea>\r\n                <input v-else v-model=\"newChildSrc\" :placeholder=\"newChildType === 'image' ? 'è¯·è¾“å…¥å›¾ç‰‡ URL' : 'è¯·è¾“å…¥è§†é¢‘ URL'\"\r\n                    type=\"text\" autofocus />\r\n\r\n                <div class=\"modal-actions\">\r\n                    <button @click=\"closeModal\" class=\"btn-cancel\">å–æ¶ˆ</button>\r\n                    <button @click=\"confirmAddChild\" class=\"btn-confirm\" :disabled=\"!isContentValid\">ç¡®è®¤æ·»åŠ </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"isBoxSelecting\" class=\"box-select-rect\" :style=\"boxSelectStyle\"></div>\r\n        </div>\r\n\r\n        <div class=\"ice-floating-input-container\">\r\n            <div class=\"ice-floating-input-wrapper\">\r\n                <input v-model=\"globalSearchText\" type=\"text\" placeholder=\"è¾“å…¥æ–‡æœ¬ç”Ÿæˆæˆ–æœç´¢...\"\r\n                    @keyup.enter=\"handleFloatingInputEnter\" />\r\n                <button @click=\"handleFloatingInputEnter\">Enter</button>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nlet idCounter = 3; // ä» 3 å¼€å§‹ï¼Œå› ä¸ºåˆå§‹ nodes ä¸­ n1 å’Œ n2 å·²å ç”¨\r\nconst genId = (prefix) => prefix + idCounter++;\r\n\r\nexport default {\r\n    name: 'InfiniteCanvasMedia',\r\n    data() {\r\n        return {\r\n            //=============================\r\n            // --- å¤šé€‰ & æ¡†é€‰çŠ¶æ€ (æ–°å¢/ä¿®æ”¹) ---\r\n            selectedNodeIds: [],         // å­˜å‚¨æ‰€æœ‰é€‰ä¸­èŠ‚ç‚¹çš„ ID\r\n            isBoxSelecting: false,       // æ˜¯å¦å¤„äºæ¡†é€‰æ¨¡å¼ (ç”±å³é”®è§¦å‘)\r\n            boxSelectStart: { x: 0, y: 0 }, // æ¡†é€‰èµ·å§‹ç‚¹ (å±å¹•åæ ‡)\r\n            boxSelectEnd: { x: 0, y: 0 },   // æ¡†é€‰ç»“æŸç‚¹ (å±å¹•åæ ‡)\r\n\r\n            // --- äº¤äº’çŠ¶æ€ (ä¿®æ”¹ groupDragOrigin) ---\r\n            draggingNode: null,\r\n            nodeDragStart: { x: 0, y: 0 },\r\n            // å­˜å‚¨è¢«æ‹–æ‹½ç»„å†…æ‰€æœ‰èŠ‚ç‚¹çš„åˆå§‹ä½ç½® { id: {x, y} }\r\n            groupDragOrigin: {},\r\n            //=============================\r\n\r\n\r\n            // æ‚¬æµ®è¾“å…¥æ¡†çŠ¶æ€\r\n            globalSearchText: 'pav', // ç¤ºä¾‹æ–‡æœ¬ï¼Œæ¨¡ä»¿å›¾ç‰‡ä¸­çš„è¾“å…¥\r\n\r\n            // æ–°å¢ï¼šModal çŠ¶æ€ç®¡ç†\r\n            isModalVisible: false,\r\n            pendingParentNode: null, // æš‚å­˜çš„çˆ¶èŠ‚ç‚¹å¯¹è±¡\r\n            newChildType: 'text',Â  Â  // æ–°å­èŠ‚ç‚¹ç±»å‹\r\n            newChildText: '',Â  Â  Â  Â  // æ–°å­èŠ‚ç‚¹æ–‡æœ¬å†…å®¹\r\n            newChildSrc: '',Â  Â  Â  Â  Â // æ–°å­èŠ‚ç‚¹ URL (ç”¨äºå›¾ç‰‡/è§†é¢‘)\r\n            modalPos: { x: 0, y: 0 },// å¼¹æ¡†åœ¨**ç”»å¸ƒåæ ‡ç³»**ä¸­çš„ä½ç½® (æ–°å¢åŠ )\r\n\r\n            // è§†å›¾å˜æ¢\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            scale: 1,\r\n\r\n            // äº¤äº’çŠ¶æ€\r\n            isPanning: false,\r\n            panStart: { x: 0, y: 0 },\r\n            panOrigin: { x: 0, y: 0 },\r\n\r\n            draggingNode: null,\r\n            nodeDragStart: { x: 0, y: 0 },\r\n            nodeOrigin: { x: 0, y: 0 },\r\n\r\n            resizingNode: null,\r\n            resizeStart: { x: 0, y: 0 },\r\n            resizeOriginSize: { w: 0, h: 0 },\r\n\r\n            selectedNodeId: null,\r\n\r\n            // æ•°æ®æ¨¡å‹\r\n            nodes: [\r\n                {\r\n                    id: genId('n'),\r\n                    x: 0, y: 0, width: 300, height: 200,\r\n                    title: 'æ¬¢è¿ä½¿ç”¨',\r\n                    contentType: 'text', // text | image | video\r\n                    content: 'åˆå§‹èŠ‚ç‚¹',\r\n                    src: ''\r\n                }\r\n            ],\r\n            edges: [\r\n                // { id: genId('e'), fromId: 'n1', toId: 'n2' }\r\n            ],\r\n        };\r\n    },\r\n    mounted() {\r\n        // ç»‘å®šå…¨å±€äº‹ä»¶ï¼Œé˜²æ­¢é¼ æ ‡æ‹–å‡ºç”»å¸ƒåŒºåŸŸå¯¼è‡´çŠ¶æ€å¡æ­»\r\n        window.addEventListener('mousemove', this.onWindowMouseMove);\r\n        window.addEventListener('mouseup', this.onWindowMouseUp);\r\n        // å¢åŠ ç‚¹å‡»ç”»å¸ƒå¤–éƒ¨å…³é—­å¼¹çª—çš„ç›‘å¬ (é‡è¦)\r\n        window.addEventListener('mousedown', this.onWindowMouseDownCloseModal);\r\n    },\r\n    computed: {\r\n        isContentValid() {\r\n            if (this.newChildType === 'text') {\r\n                return this.newChildText.trim().length > 0;\r\n            } else {\r\n                return this.newChildSrc.trim().length > 0;\r\n            }\r\n        },\r\n        /**\r\n         * è®¡ç®—æµ®åŠ¨å¼¹æ¡†çš„æ ·å¼ (å±å¹•åæ ‡)\r\n         */\r\n        getModalStyle() {\r\n            if (!this.isModalVisible) return {};\r\n            const screenPos = this.worldToScreen(this.modalPos.x, this.modalPos.y);\r\n            return {\r\n                transform: `translate(${screenPos.x}px, ${screenPos.y}px)`,\r\n                // å¼¹æ¡†ä¸éšç¼©æ”¾å˜åŒ–ï¼Œä¿æŒå›ºå®šå¤§å°\r\n                // transform: `translate(${screenPos.x}px, ${screenPos.y}px) scale(1)`, \r\n                // transform-origin: 0 0;\r\n            };\r\n        },\r\n        /**\r\n         * è®¡ç®—æ¡†é€‰çŸ©å½¢çš„æ ·å¼ (å±å¹•åæ ‡)\r\n         */\r\n        boxSelectStyle() {\r\n            if (!this.isBoxSelecting) return {};\r\n\r\n            const startX = Math.min(this.boxSelectStart.x, this.boxSelectEnd.x);\r\n            const startY = Math.min(this.boxSelectStart.y, this.boxSelectEnd.y);\r\n            const width = Math.abs(this.boxSelectStart.x - this.boxSelectEnd.x);\r\n            const height = Math.abs(this.boxSelectStart.y - this.boxSelectEnd.y);\r\n\r\n            return {\r\n                left: startX + 'px',\r\n                top: startY + 'px',\r\n                width: width + 'px',\r\n                height: height + 'px',\r\n            };\r\n        },\r\n        /**\r\n         * å¿«é€Ÿè·å–é€‰ä¸­çš„èŠ‚ç‚¹å¯¹è±¡æ•°ç»„\r\n         */\r\n        getSelectedNodes() {\r\n            return this.nodes.filter(n => this.selectedNodeIds.includes(n.id));\r\n        },\r\n    },\r\n    beforeDestroy() {\r\n        window.removeEventListener('mousemove', this.onWindowMouseMove);\r\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\r\n        window.removeEventListener('mousedown', this.onWindowMouseDownCloseModal);\r\n    },\r\n    methods: {\r\n        \r\n        /**\r\n         * ç‚¹å‡»ç”»å¸ƒéå¼¹çª—åŒºåŸŸæ—¶å…³é—­å¼¹çª— (æ–°å¢åŠ )\r\n         */\r\n        onWindowMouseDownCloseModal(e) {\r\n            if (!this.isModalVisible) return;\r\n            // æ£€æŸ¥ç‚¹å‡»äº‹ä»¶æ˜¯å¦å‘ç”Ÿåœ¨å¼¹çª—å†…éƒ¨\r\n            const modal = this.$el.querySelector('.modal-content-floating');\r\n            if (modal && !modal.contains(e.target)) {\r\n                this.closeModal();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enter ç¡®è®¤\r\n         */\r\n        handleFloatingInputEnter() {\r\n            if (this.globalSearchText.trim()) {\r\n                alert(`è§¦å‘æ“ä½œï¼š${this.globalSearchText} (æ­¤å¤„åº”æ‰§è¡Œæœç´¢æˆ–ç”Ÿæˆé€»è¾‘)`);\r\n            }\r\n        },\r\n\r\n        // æ·»åŠ å­èŠ‚ç‚¹-æ‰“å¼€å¼¹çª— (å·²ä¿®æ”¹å®šä½è®¡ç®—)\r\n        openAddChildModal(parent) {\r\n            this.pendingParentNode = parent;\r\n            this.newChildType = parent.contentType; // é»˜è®¤ç»§æ‰¿çˆ¶èŠ‚ç‚¹ç±»å‹\r\n            this.newChildText = '';\r\n            this.newChildSrc = '';\r\n            this.isModalVisible = true;\r\n\r\n            // --- æ–°å¢ï¼šè®¡ç®—å¼¹æ¡†åº”è¯¥å‡ºç°çš„ä½ç½® (ä¸–ç•Œåæ ‡) ---\r\n            // ç›®æ ‡ä½ç½®: çˆ¶èŠ‚ç‚¹å³ä¾§ 20px å¤„\r\n            this.modalPos = {\r\n                x: parent.x + parent.width + 20,\r\n                y: parent.y // ä¸çˆ¶èŠ‚ç‚¹é¡¶éƒ¨å¯¹é½\r\n            };\r\n\r\n            // èšç„¦è¾“å…¥æ¡† (ç¡®ä¿å¼¹çª—å·²æ¸²æŸ“)\r\n            this.$nextTick(() => {\r\n                const input = this.$el.querySelector('.modal-content-floating textarea, .modal-content-floating input');\r\n                if (input) input.focus();\r\n            });\r\n        },\r\n        /**\r\n         * å…³é—­å¼¹æ¡†\r\n         */\r\n        closeModal() {\r\n            this.isModalVisible = false;\r\n            this.pendingParentNode = null;\r\n            this.newChildText = '';\r\n            this.newChildSrc = '';\r\n            this.modalPos = { x: 0, y: 0 }; // æ¸…ç©ºä½ç½®\r\n        },\r\n        /**\r\n         * å¼¹æ¡†ç¡®è®¤æ“ä½œ\r\n         */\r\n        confirmAddChild() {\r\n            if (!this.isContentValid) return;\r\n\r\n            const parent = this.pendingParentNode;\r\n            if (!parent) return;\r\n\r\n            const child = {\r\n                id: genId('n'),\r\n                // è‡ªåŠ¨å®šä½åœ¨çˆ¶èŠ‚ç‚¹å³ä¸‹æ–¹ (ç•¥å¾®åç§»ä»¥é¿å…é®æŒ¡)\r\n                x: parent.x + parent.width + 100,\r\n                y: parent.y + parent.height + 50,\r\n                width: 200,\r\n                height: 150,\r\n                title: 'å­èŠ‚ç‚¹',\r\n                contentType: this.newChildType,\r\n                content: this.newChildType === 'text' ? this.newChildText : '',\r\n                src: this.newChildType !== 'text' ? this.newChildSrc : ''\r\n            };\r\n\r\n            this.nodes.push(child);\r\n            this.edges.push({\r\n                id: genId('e'),\r\n                fromId: parent.id,\r\n                toId: child.id\r\n            });\r\n\r\n            this.closeModal(); // å®Œæˆæ“ä½œåå…³é—­å¼¹çª—\r\n        },\r\n        // --- åæ ‡ç³»ç»Ÿæ ¸å¿ƒ ---\r\n        worldToScreen(x, y) {\r\n            return {\r\n                x: (x + this.offsetX) * this.scale,\r\n                y: (y + this.offsetY) * this.scale\r\n            };\r\n        },\r\n        screenToWorld(x, y) {\r\n            return {\r\n                x: x / this.scale - this.offsetX,\r\n                y: y / this.scale - this.offsetY\r\n            };\r\n        },\r\n\r\n        // --- æ¸²æŸ“è¾…åŠ© ---\r\n        getNodeStyle(node) {\r\n            const pos = this.worldToScreen(node.x, node.y);\r\n            return {\r\n                transform: `translate(${pos.x}px, ${pos.y}px)`, // ä½¿ç”¨ transform æ€§èƒ½æ›´å¥½\r\n                width: node.width * this.scale + 'px',\r\n                height: node.height * this.scale + 'px',\r\n                zIndex: this.selectedNodeId === node.id ? 10 : 1\r\n            };\r\n        },\r\n        getEdgePath(edge) {\r\n            const from = this.nodes.find(n => n.id === edge.fromId);\r\n            const to = this.nodes.find(n => n.id === edge.toId);\r\n            if (!from || !to) return '';\r\n\r\n            // ä¿æŒè¿çº¿å§‹ç»ˆä½¿ç”¨ä¸–ç•Œåæ ‡ç³»è¿›è¡Œè®¡ç®—ï¼Œç„¶åè½¬æ¢åˆ°å±å¹•åæ ‡\r\n            const startWorldX = from.x + from.width;\r\n            const startWorldY = from.y + from.height / 2;\r\n            const endWorldX = to.x;\r\n            const endWorldY = to.y + to.height / 2;\r\n\r\n            const start = this.worldToScreen(startWorldX, startWorldY);\r\n            const end = this.worldToScreen(endWorldX, endWorldY);\r\n\r\n            const dist = Math.abs(end.x - start.x) * 0.5;\r\n            const cp1 = { x: start.x + dist, y: start.y }; // æ§åˆ¶ç‚¹1\r\n            const cp2 = { x: end.x - dist, y: end.y };Â  Â  Â // æ§åˆ¶ç‚¹2\r\n\r\n            return `M ${start.x} ${start.y} C ${cp1.x} ${cp1.y} ${cp2.x} ${cp2.y} ${end.x} ${end.y}`;\r\n        },\r\n        //ä¿®æ”¹2\r\n        // --- äº¤äº’äº‹ä»¶ ---\r\n        onCanvasMouseDown(e) {\r\n            // if (e.button !== 0) return; // åªå“åº”å·¦é”®\r\n            // this.isPanning = true;\r\n            // this.panStart = { x: e.clientX, y: e.clientY };\r\n            // this.panOrigin = { x: this.offsetX, y: this.offsetY };\r\n            // this.selectedNodeId = null; // ç‚¹å‡»ç©ºç™½å–æ¶ˆé€‰ä¸­\r\n\r\n            this.closeModal();\r\n            const rect = this.$refs.canvas.getBoundingClientRect();\r\n            const clickPos = { x: e.clientX - rect.left, y: e.clientY - rect.top };\r\n\r\n            if (e.button === 0) {\r\n                // å·¦é”® (é»˜è®¤è¡Œä¸ºï¼šå¹³ç§»)\r\n                this.isPanning = true;\r\n                this.panStart = { x: e.clientX, y: e.clientY };\r\n                this.panOrigin = { x: this.offsetX, y: this.offsetY };\r\n                this.selectedNodeIds = []; // ç‚¹å‡»ç©ºç™½å–æ¶ˆæ‰€æœ‰é€‰ä¸­\r\n            } else if (e.button === 2) {\r\n                // å³é”® (æ–°è¡Œä¸ºï¼šæ¡†é€‰)\r\n                e.preventDefault(); // é˜»æ­¢æµè§ˆå™¨é»˜è®¤å³é”®èœå• (è™½ç„¶ template é‡ŒåŠ äº† @contextmenu.preventï¼Œè¿™é‡Œä½œä¸ºä¿é™©)\r\n                this.isBoxSelecting = true;\r\n                this.isPanning = false; // ç¦ç”¨å¹³ç§»\r\n                this.selectedNodeIds = []; // å¼€å§‹æ¡†é€‰æ—¶æ¸…ç©ºç°æœ‰é€‰ä¸­\r\n                this.boxSelectStart = clickPos;\r\n                this.boxSelectEnd = clickPos;\r\n            }\r\n\r\n            // ç‚¹å‡»ç”»å¸ƒæ—¶å…³é—­å¼¹çª— (æ¬¡è¦ï¼Œä¸»è¦åœ¨ window çº§å¤„ç†)\r\n            // this.closeModal(); \r\n        },\r\n        //ä¿®æ”¹1ï¼š\r\n        onNodeMouseDown(node, e) {\r\n            // this.draggingNode = node;\r\n            // this.selectedNodeId = node.id;\r\n            // this.nodeDragStart = { x: e.clientX, y: e.clientY };\r\n            // this.nodeOrigin = { x: node.x, y: node.y };\r\n            // this.closeModal(); // å¼€å§‹æ‹–æ‹½èŠ‚ç‚¹æ—¶å…³é—­å¼¹çª—\r\n\r\n            this.closeModal();\r\n\r\n            // åªå“åº”å·¦é”®æ‹–æ‹½èŠ‚ç‚¹\r\n            if (e.button !== 0) return;\r\n\r\n            this.draggingNode = node;\r\n            this.nodeDragStart = { x: e.clientX, y: e.clientY };\r\n\r\n            // 1. å¤„ç†é€‰ä¸­çŠ¶æ€ï¼š\r\n            if (e.shiftKey || e.ctrlKey || e.metaKey) {\r\n                // æŒ‰ä½ Shift/Ctrl/Cmdï¼Œåˆ‡æ¢é€‰ä¸­çŠ¶æ€\r\n                const index = this.selectedNodeIds.indexOf(node.id);\r\n                if (index > -1) {\r\n                    this.selectedNodeIds.splice(index, 1); // ç§»é™¤\r\n                } else {\r\n                    this.selectedNodeIds.push(node.id); // æ·»åŠ \r\n                }\r\n            } else if (!this.selectedNodeIds.includes(node.id)) {\r\n                // æœªé€‰ä¸­ä¸”æœªæŒ‰é”®ï¼Œåˆ™æ¸…ç©ºå¤šé€‰ï¼Œé€‰ä¸­å½“å‰èŠ‚ç‚¹\r\n                this.selectedNodeIds = [node.id];\r\n            }\r\n\r\n            // 2. å‡†å¤‡ç¾¤ç»„æ‹–æ‹½ (è®°å½•æ•´ä¸ªç»„çš„åˆå§‹ä½ç½®)\r\n            if (this.selectedNodeIds.includes(node.id)) {\r\n                this.groupDragOrigin = this.getSelectedNodes.reduce((acc, n) => {\r\n                    acc[n.id] = { x: n.x, y: n.y };\r\n                    return acc;\r\n                }, {});\r\n            } else {\r\n                // å¦åˆ™åªæ‹–æ‹½å½“å‰èŠ‚ç‚¹\r\n                this.groupDragOrigin = { [node.id]: { x: node.x, y: node.y } };\r\n            }\r\n        },\r\n\r\n        onNodeResizeMouseDown(node, e) {\r\n            this.resizingNode = node;\r\n            this.resizeStart = { x: e.clientX, y: e.clientY };\r\n            this.resizeOriginSize = { w: node.width, h: node.height };\r\n            this.closeModal(); // å¼€å§‹è°ƒæ•´å¤§å°æ—¶å…³é—­å¼¹çª—\r\n        },\r\n\r\n        // --- å…¨å±€é¼ æ ‡ç§»åŠ¨ (Windowçº§) ---\r\n        onWindowMouseMove(e) {\r\n\r\n            const canvasRect = this.$refs.canvas.getBoundingClientRect();\r\n            const mouseX = e.clientX - canvasRect.left;\r\n            const mouseY = e.clientY - canvasRect.top;\r\n\r\n            // 1. æ‹–æ‹½èŠ‚ç‚¹\r\n            // if (this.draggingNode) {\r\n            //     const dx = (e.clientX - this.nodeDragStart.x) / this.scale;\r\n            //     const dy = (e.clientY - this.nodeDragStart.y) / this.scale;\r\n            //     this.draggingNode.x = this.nodeOrigin.x + dx;\r\n            //     this.draggingNode.y = this.nodeOrigin.y + dy;\r\n            //     return;\r\n            // }\r\n            // 1. æ‹–æ‹½èŠ‚ç‚¹ (ç¾¤ç»„ç§»åŠ¨)\r\n            if (this.draggingNode) {\r\n                const dx = (e.clientX - this.nodeDragStart.x) / this.scale;\r\n                const dy = (e.clientY - this.nodeDragStart.y) / this.scale;\r\n\r\n                // éå† groupDragOrigin ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ›´æ–°å®ƒä»¬çš„ä½ç½®\r\n                for (const nodeId in this.groupDragOrigin) {\r\n                    const node = this.nodes.find(n => n.id === nodeId);\r\n                    if (node) {\r\n                        const origin = this.groupDragOrigin[nodeId];\r\n                        node.x = origin.x + dx;\r\n                        node.y = origin.y + dy;\r\n                    }\r\n                }\r\n                return; // æ‹–æ‹½èŠ‚ç‚¹æ—¶ï¼Œä¸æ‰§è¡Œå…¶ä»–é€»è¾‘\r\n            }\r\n            // 2. è°ƒæ•´å¤§å°\r\n            if (this.resizingNode) {\r\n                const dx = (e.clientX - this.resizeStart.x) / this.scale;\r\n                const dy = (e.clientY - this.resizeStart.y) / this.scale;\r\n                this.resizingNode.width = Math.max(150, this.resizeOriginSize.w + dx);\r\n                this.resizingNode.height = Math.max(100, this.resizeOriginSize.h + dy);\r\n                return;\r\n            }\r\n            // 3. æ‹–æ‹½ç”»å¸ƒ\r\n            // if (this.isPanning) {\r\n            //     const dx = (e.clientX - this.panStart.x) / this.scale;\r\n            //     const dy = (e.clientY - this.panStart.y) / this.scale;\r\n            //     this.offsetX = this.panOrigin.x + dx;\r\n            //     this.offsetY = this.panOrigin.y + dy;\r\n            // }\r\n            // 3. æ¡†é€‰ (å³é”®æ‹–æ‹½)\r\n            if (this.isBoxSelecting) {\r\n                this.boxSelectEnd = { x: mouseX, y: mouseY };\r\n\r\n                // ç¢°æ’æ£€æµ‹ï¼šè®¡ç®—æ¡†é€‰çŸ©å½¢çš„å±å¹•åæ ‡è¾¹ç•Œ\r\n                const rect = {\r\n                    minX: Math.min(this.boxSelectStart.x, this.boxSelectEnd.x),\r\n                    minY: Math.min(this.boxSelectStart.y, this.boxSelectEnd.y),\r\n                    maxX: Math.max(this.boxSelectStart.x, this.boxSelectEnd.x),\r\n                    maxY: Math.max(this.boxSelectStart.y, this.boxSelectEnd.y),\r\n                };\r\n\r\n                const newSelectedIds = [];\r\n                this.nodes.forEach(node => {\r\n                    if (this.checkNodeIntersection(node, rect)) {\r\n                        newSelectedIds.push(node.id);\r\n                    }\r\n                });\r\n                // å®æ—¶æ›´æ–°é€‰ä¸­çŠ¶æ€\r\n                this.selectedNodeIds = newSelectedIds;\r\n                return;\r\n            }\r\n        },\r\n        //ä¿®æ”¹3\r\n        onWindowMouseUp(e) {\r\n            // this.isPanning = false;\r\n            // this.draggingNode = null;\r\n            // this.resizingNode = null;\r\n\r\n            if (e.button === 0) {\r\n                // å·¦é”®æŠ¬èµ·\r\n                this.isPanning = false;\r\n                this.draggingNode = null;\r\n                this.resizingNode = null;\r\n                this.groupDragOrigin = {}; // æ¸…ç©ºç¾¤ç»„åˆå§‹ä½ç½®\r\n            } else if (e.button === 2) {\r\n                // å³é”®æŠ¬èµ· (ç»“æŸæ¡†é€‰)\r\n                this.isBoxSelecting = false;\r\n            }\r\n        },\r\n\r\n        onWheel(e) {\r\n            const zoomIntensity = 0.1;\r\n            const delta = e.deltaY > 0 ? -zoomIntensity : zoomIntensity;\r\n            const newScale = Math.min(5, Math.max(0.1, this.scale + delta));\r\n\r\n            // è®¡ç®—é¼ æ ‡åœ¨ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®ï¼Œç¡®ä¿ç¼©æ”¾ä»¥é¼ æ ‡ä¸ºä¸­å¿ƒ\r\n            const rect = this.$refs.canvas.getBoundingClientRect();\r\n            const mouseX = e.clientX - rect.left;\r\n            const mouseY = e.clientY - rect.top;\r\n\r\n            const worldPos = this.screenToWorld(mouseX, mouseY);\r\n\r\n            // æ›´æ–°ç¼©æ”¾\r\n            this.scale = newScale;\r\n\r\n            // ä¿®æ­£ Offset ä½¿å¾—ä¸–ç•Œåæ ‡ä¸‹çš„é¼ æ ‡ä½ç½®ä¿æŒä¸å˜\r\n            this.offsetX = mouseX / this.scale - worldPos.x;\r\n            this.offsetY = mouseY / this.scale - worldPos.y;\r\n        },\r\n\r\n        // --- ä¸šåŠ¡é€»è¾‘ ---\r\n        addNode(type = 'text') {\r\n            // åœ¨è§†å£ä¸­å¿ƒç”Ÿæˆ\r\n            const center = this.screenToWorld(this.$refs.canvas.clientWidth / 2, this.$refs.canvas.clientHeight / 2);\r\n            this.nodes.push({\r\n                id: genId('n'),\r\n                x: center.x - 100,\r\n                y: center.y - 75,\r\n                width: 200,\r\n                height: 150,\r\n                title: 'æ–°èŠ‚ç‚¹',\r\n                contentType: type,\r\n                content: '',\r\n                src: ''\r\n            });\r\n        },\r\n\r\n        changeNodeType(node, type) {\r\n            node.contentType = type;\r\n        },\r\n\r\n        deleteNode(id) {\r\n            this.nodes = this.nodes.filter(n => n.id !== id);\r\n            this.edges = this.edges.filter(e => e.fromId !== id && e.toId !== id);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* æ¡†é€‰çŸ©å½¢æ ·å¼ (æ–°å¢) */\r\n.box-select-rect {\r\n    position: absolute;\r\n    border: 1px solid #3b82f6;\r\n    /* è¾¹æ¡†é¢œè‰² */\r\n    background: rgba(59, 130, 246, 0.2);\r\n    /* èƒŒæ™¯åŠé€æ˜ */\r\n    pointer-events: none;\r\n    /* ç¡®ä¿ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ */\r\n    z-index: 50;\r\n}\r\n\r\n/* æ‚¬æµ®è¾“å…¥æ¡†å®¹å™¨ (ä¿æŒä¸å˜) */\r\n.ice-floating-input-container {\r\n    position: absolute;\r\n    bottom: 50px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    z-index: 50;\r\n    width: 600px;\r\n    max-width: 90%;\r\n    background: rgba(255, 255, 255, 0.9);\r\n    backdrop-filter: blur(8px);\r\n    padding: 15px;\r\n    border-radius: 12px;\r\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.ice-floating-input-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 8px;\r\n    overflow: hidden;\r\n    background: white;\r\n}\r\n\r\n.ice-floating-input-container input {\r\n    flex: 1;\r\n    border: none;\r\n    padding: 12px 16px;\r\n    font-size: 16px;\r\n    outline: none;\r\n    background: transparent;\r\n    color: #1f2937;\r\n}\r\n\r\n.ice-floating-input-container input::placeholder {\r\n    color: #9ca3af;\r\n}\r\n\r\n.ice-floating-input-container button {\r\n    background: #f3f4f6;\r\n    color: #4b5563;\r\n    border: none;\r\n    padding: 12px 20px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n    height: 100%;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.ice-floating-input-container button:hover {\r\n    background: #e5e7eb;\r\n}\r\n\r\n/* ================================================================ */\r\n/* å±€éƒ¨æµ®åŠ¨ Modal æ ·å¼ (å·²ä¿®æ”¹) */\r\n.modal-content-floating {\r\n    position: absolute;\r\n    /* ç›¸å¯¹ ice-canvas å®šä½ */\r\n    top: 0;\r\n    left: 0;\r\n\r\n    /* ä½¿ç”¨ transform ç§»åŠ¨åˆ°è®¡ç®—å‡ºçš„å±å¹•åæ ‡ */\r\n    transform-origin: 0 0;\r\n\r\n    background: rgba(30, 41, 59, 0.9);\r\n    /* 1e293b ç•¥å¾®é€æ˜ */\r\n    backdrop-filter: blur(5px);\r\n    /* å¢åŠ æ¨¡ç³Šæ•ˆæœä»¥å¢å¼ºè´¨æ„Ÿ */\r\n    border: 1px solid rgba(71, 85, 105, 0.5);\r\n    /* 475569 ç•¥å¾®é€æ˜è¾¹æ¡† */\r\n    padding: 25px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);\r\n    /* é˜´å½±æ•ˆæœ */\r\n    width: 300px;\r\n    /* å‡å°å®½åº¦ä»¥é€‚åº”å±€éƒ¨å¼¹çª— */\r\n    color: #e2e8f0;\r\n    z-index: 999;\r\n    /* é«˜äºæ™®é€šèŠ‚ç‚¹ (1, 10), ä½äºå…¨å±€å·¥å…·æ  (100) */\r\n}\r\n\r\n.modal-content-floating h3 {\r\n    margin-top: 0;\r\n    border-bottom: 1px solid #334155;\r\n    padding-bottom: 10px;\r\n    font-size: 16px;\r\n}\r\n\r\n.modal-content-floating p {\r\n    font-size: 14px;\r\n    color: #94a3b8;\r\n}\r\n\r\n.modal-content-floating textarea,\r\n.modal-content-floating input {\r\n    width: 100%;\r\n    padding: 10px;\r\n    margin: 10px 0;\r\n    border: 1px solid #475569;\r\n    border-radius: 4px;\r\n    background: #0f172a;\r\n    color: #e2e8f0;\r\n    resize: vertical;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.modal-type-switcher {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.modal-type-switcher button {\r\n    background: #334155;\r\n    border: none;\r\n    color: #e2e8f0;\r\n    padding: 5px 10px;\r\n    margin-right: 5px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n}\r\n\r\n.modal-type-switcher button.active {\r\n    background: #3b82f6;\r\n}\r\n\r\n.modal-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 10px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.modal-actions button {\r\n    padding: 8px 15px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-weight: 600;\r\n}\r\n\r\n.btn-cancel {\r\n    background: #475569;\r\n    color: #e2e8f0;\r\n}\r\n\r\n.btn-confirm {\r\n    background: #3b82f6;\r\n    color: white;\r\n}\r\n\r\n.btn-confirm:disabled {\r\n    background: #4f46e550;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* ================================================================ */\r\n/* åŸºç¡€å®¹å™¨ */\r\n.ice-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    background: #0f172a;\r\n    color: #e2e8f0;\r\n    overflow: hidden;\r\n    font-family: 'Segoe UI', sans-serif;\r\n}\r\n\r\n/* å·¥å…·æ  */\r\n.ice-toolbar {\r\n    height: 48px;\r\n    background: #1e293b;\r\n    border-bottom: 1px solid #334155;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 16px;\r\n    justify-content: space-between;\r\n    z-index: 20;\r\n}\r\n\r\n.btn-group button {\r\n    background: #3b82f6;\r\n    border: none;\r\n    color: white;\r\n    padding: 6px 12px;\r\n    margin-right: 8px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.btn-group button:hover {\r\n    background: #2563eb;\r\n}\r\n\r\n.info {\r\n    font-size: 12px;\r\n    color: #94a3b8;\r\n}\r\n\r\n/* ç”»å¸ƒ */\r\n.ice-canvas {\r\n    flex: 1;\r\n    position: relative;\r\n    /* å¿…é¡»æ˜¯ relative æ‰èƒ½è®©å¼¹çª— absolute å®šä½ */\r\n    overflow: hidden;\r\n    background: radial-gradient(#334155 1px, transparent 1px);\r\n    background-size: 20px 20px;\r\n    background-color: #0f172a;\r\n}\r\n\r\n/* è¿çº¿ */\r\n.ice-edges-layer {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    pointer-events: none;\r\n    z-index: 0;\r\n}\r\n\r\n/* èŠ‚ç‚¹æ ·å¼ */\r\n.ice-node {\r\n    position: absolute;\r\n    /* ä½¿ç”¨ transform å®šä½ */\r\n    top: 0;\r\n    left: 0;\r\n    background: #1e293b;\r\n    border: 1px solid #475569;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    flex-direction: column;\r\n    user-select: none;\r\n    /* é˜²æ­¢æ‹–æ‹½æ—¶é€‰ä¸­æ–‡å­— */\r\n    transform-origin: 0 0;\r\n}\r\n\r\n.ice-node.is-selected {\r\n    border-color: #3b82f6;\r\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);\r\n}\r\n\r\n/* èŠ‚ç‚¹å¤´éƒ¨ */\r\n.ice-node-header {\r\n    height: 32px;\r\n    background: #334155;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 8px;\r\n    cursor: grab;\r\n    border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.ice-node-header:active {\r\n    cursor: grabbing;\r\n}\r\n\r\n.ice-node-title {\r\n    font-weight: 600;\r\n    font-size: 13px;\r\n}\r\n\r\n.ice-node-actions span {\r\n    cursor: pointer;\r\n    margin-left: 6px;\r\n    font-size: 14px;\r\n    opacity: 0.5;\r\n}\r\n\r\n.ice-node-actions span:hover,\r\n.ice-node-actions span.active {\r\n    opacity: 1;\r\n}\r\n\r\n.delete-btn {\r\n    color: #ef4444;\r\n}\r\n\r\n/* èŠ‚ç‚¹å†…å®¹ */\r\n.ice-node-content {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    position: relative;\r\n    background: #0f172a;\r\n}\r\n\r\n/* æ–‡æœ¬æ¨¡å¼ */\r\n.ice-node-textarea {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: transparent;\r\n    border: none;\r\n    color: #cbd5e1;\r\n    padding: 8px;\r\n    resize: none;\r\n    outline: none;\r\n    font-family: inherit;\r\n}\r\n\r\n/* åª’ä½“æ¨¡å¼ (Image/Video) */\r\n.ice-media-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: #000;\r\n}\r\n\r\n.ice-media-box img,\r\n.ice-media-box video {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n    /* ä¿æŒæ¯”ä¾‹ */\r\n    display: block;\r\n}\r\n\r\n.ice-media-box .placeholder {\r\n    color: #64748b;\r\n    font-size: 12px;\r\n}\r\n\r\n.url-input {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    background: rgba(0, 0, 0, 0.8);\r\n    border: none;\r\n    color: white;\r\n    padding: 4px 8px;\r\n    font-size: 12px;\r\n    opacity: 0;\r\n    /* é»˜è®¤éšè— */\r\n    transition: opacity 0.2s;\r\n}\r\n\r\n/* åª’ä½“ä¸ºç©ºï¼Œæˆ–è€…é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºè¾“å…¥æ¡† */\r\n.ice-media-box:hover .url-input,\r\n.ice-media-box .placeholder~.url-input {\r\n    opacity: 1;\r\n}\r\n\r\n/* èŠ‚ç‚¹åº•éƒ¨ */\r\n.ice-node-footer {\r\n    height: 24px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    background: #1e293b;\r\n    border-top: 1px solid #334155;\r\n    border-radius: 0 0 8px 8px;\r\n}\r\n\r\n.tag {\r\n    font-size: 10px;\r\n    color: #64748b;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.add-child-btn {\r\n    background: none;\r\n    border: none;\r\n    color: #3b82f6;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.add-child-btn:hover {\r\n    color: #60a5fa;\r\n}\r\n\r\n/* ç¼©æ”¾æ‰‹æŸ„ */\r\n.ice-resize-handle {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: 15px;\r\n    height: 15px;\r\n    cursor: nwse-resize;\r\n    background: transparent;\r\n    z-index: 20;\r\n}\r\n\r\n/* å¢åŠ ä¸€ä¸ªå¯è§†çš„å°ä¸‰è§’ */\r\n.ice-resize-handle::after {\r\n    content: '';\r\n    position: absolute;\r\n    right: 2px;\r\n    bottom: 2px;\r\n    border-right: 2px solid #64748b;\r\n    border-bottom: 2px solid #64748b;\r\n    width: 6px;\r\n    height: 6px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}