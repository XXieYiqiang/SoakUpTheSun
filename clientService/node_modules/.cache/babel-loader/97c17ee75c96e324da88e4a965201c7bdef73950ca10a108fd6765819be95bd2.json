{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/SoakUpTheSun/clientService/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _vue = _interopRequireDefault(require(\"vue\"));\nvar _index = _interopRequireDefault(require(\"@/router/index.js\"));\nvar _Dialog = _interopRequireDefault(require(\"./Dialog.vue\"));\n// 导入组件\n\n// 使用基础 Vue 构造器，创建一个“子类”\nconst AddFileConstructor = _vue.default.extend(_Dialog.default);\nlet addFileInstance = null;\n/**\r\n * 初始化新建文件实例\r\n * @param {string} extendName office 文件扩展名\r\n * @param {string} filePath 新建文件夹的父路径\r\n */\nconst initInstanceAddFile = (extendName, filePath = _index.default.currentRoute.query.filePath || '/') => {\n  addFileInstance = new AddFileConstructor({\n    el: document.createElement('div'),\n    data() {\n      return {\n        extendName,\n        filePath\n      };\n    }\n  });\n};\n/**\r\n * 新建文件 Promise 函数\r\n * @returns {Promise} 抛出确认和取消回调函数\r\n */\nconst showAddFileDialog = obj => {\n  // 非首次调用服务时，在 DOM 中移除上个实例\n  if (addFileInstance !== null) {\n    document.body.removeChild(addFileInstance.$el);\n  }\n  let {\n    extendName,\n    filePath\n  } = obj;\n  return new Promise(reslove => {\n    initInstanceAddFile(extendName, filePath);\n    addFileInstance.callback = res => {\n      reslove(res);\n      // 服务取消时卸载 DOM\n      if (res === 'cancel' && addFileInstance !== null) {\n        document.body.removeChild(addFileInstance.$el);\n        addFileInstance = null;\n      }\n    };\n    document.body.appendChild(addFileInstance.$el); //  挂载 DOM\n    _vue.default.nextTick(() => {\n      addFileInstance.visible = true; //  打开对话框\n    });\n  });\n};\nvar _default = exports.default = showAddFileDialog;","map":{"version":3,"names":["_vue","_interopRequireDefault","require","_index","_Dialog","AddFileConstructor","Vue","extend","AddFileDialog","addFileInstance","initInstanceAddFile","extendName","filePath","router","currentRoute","query","el","document","createElement","data","showAddFileDialog","obj","body","removeChild","$el","Promise","reslove","callback","res","appendChild","nextTick","visible","_default","exports","default"],"sources":["C:/Users/Administrator/Desktop/SoakUpTheSun/clientService/src/components/file/dialog/addFile/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport router from '@/router/index.js'\r\n// 导入组件\r\nimport AddFileDialog from './Dialog.vue'\r\n// 使用基础 Vue 构造器，创建一个“子类”\r\nconst AddFileConstructor = Vue.extend(AddFileDialog)\r\n\r\nlet addFileInstance = null\r\n/**\r\n * 初始化新建文件实例\r\n * @param {string} extendName office 文件扩展名\r\n * @param {string} filePath 新建文件夹的父路径\r\n */\r\nconst initInstanceAddFile = (\r\n\textendName,\r\n\tfilePath = router.currentRoute.query.filePath || '/'\r\n) => {\r\n\taddFileInstance = new AddFileConstructor({\r\n\t\tel: document.createElement('div'),\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\textendName,\r\n\t\t\t\tfilePath\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n/**\r\n * 新建文件 Promise 函数\r\n * @returns {Promise} 抛出确认和取消回调函数\r\n */\r\nconst showAddFileDialog = (obj) => {\r\n\t// 非首次调用服务时，在 DOM 中移除上个实例\r\n\tif (addFileInstance !== null) {\r\n\t\tdocument.body.removeChild(addFileInstance.$el)\r\n\t}\r\n\tlet { extendName, filePath } = obj\r\n\treturn new Promise((reslove) => {\r\n\t\tinitInstanceAddFile(extendName, filePath)\r\n\t\taddFileInstance.callback = (res) => {\r\n\t\t\treslove(res)\r\n\t\t\t// 服务取消时卸载 DOM\r\n\t\t\tif (res === 'cancel' && addFileInstance !== null) {\r\n\t\t\t\tdocument.body.removeChild(addFileInstance.$el)\r\n\t\t\t\taddFileInstance = null\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.body.appendChild(addFileInstance.$el) //  挂载 DOM\r\n\t\tVue.nextTick(() => {\r\n\t\t\taddFileInstance.visible = true //  打开对话框\r\n\t\t})\r\n\t})\r\n}\r\n\r\nexport default showAddFileDialog\r\n"],"mappings":";;;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AADA;;AAEA;AACA,MAAMG,kBAAkB,GAAGC,YAAG,CAACC,MAAM,CAACC,eAAa,CAAC;AAEpD,IAAIC,eAAe,GAAG,IAAI;AAC1B;AACA;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,GAAGA,CAC3BC,UAAU,EACVC,QAAQ,GAAGC,cAAM,CAACC,YAAY,CAACC,KAAK,CAACH,QAAQ,IAAI,GAAG,KAChD;EACJH,eAAe,GAAG,IAAIJ,kBAAkB,CAAC;IACxCW,EAAE,EAAEC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACjCC,IAAIA,CAAA,EAAG;MACN,OAAO;QACNR,UAAU;QACVC;MACD,CAAC;IACF;EACD,CAAC,CAAC;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,MAAMQ,iBAAiB,GAAIC,GAAG,IAAK;EAClC;EACA,IAAIZ,eAAe,KAAK,IAAI,EAAE;IAC7BQ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACd,eAAe,CAACe,GAAG,CAAC;EAC/C;EACA,IAAI;IAAEb,UAAU;IAAEC;EAAS,CAAC,GAAGS,GAAG;EAClC,OAAO,IAAII,OAAO,CAAEC,OAAO,IAAK;IAC/BhB,mBAAmB,CAACC,UAAU,EAAEC,QAAQ,CAAC;IACzCH,eAAe,CAACkB,QAAQ,GAAIC,GAAG,IAAK;MACnCF,OAAO,CAACE,GAAG,CAAC;MACZ;MACA,IAAIA,GAAG,KAAK,QAAQ,IAAInB,eAAe,KAAK,IAAI,EAAE;QACjDQ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACd,eAAe,CAACe,GAAG,CAAC;QAC9Cf,eAAe,GAAG,IAAI;MACvB;IACD,CAAC;IACDQ,QAAQ,CAACK,IAAI,CAACO,WAAW,CAACpB,eAAe,CAACe,GAAG,CAAC,EAAC;IAC/ClB,YAAG,CAACwB,QAAQ,CAAC,MAAM;MAClBrB,eAAe,CAACsB,OAAO,GAAG,IAAI,EAAC;IAChC,CAAC,CAAC;EACH,CAAC,CAAC;AACH,CAAC;AAAA,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcd,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}