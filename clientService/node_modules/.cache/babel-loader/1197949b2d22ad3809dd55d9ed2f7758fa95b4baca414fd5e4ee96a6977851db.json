{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/SoakUpTheSun/clientService/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _vue = require(\"vue\");\nvar _vueRouter = require(\"vue-router\");\nvar _shortLink = _interopRequireDefault(require(\"@/api/shortLink\"));\n// 假设你封装了请求工具\nvar _default = exports.default = {\n  __name: 'RedirectHandler',\n  setup(__props) {\n    const route = (0, _vueRouter.useRoute)();\n    const router = (0, _vueRouter.useRouter)();\n    (0, _vue.onMounted)(async () => {\n      const shortCode = route.params.shortCode;\n      try {\n        // 1. 向后端请求原始长链接（或者直接返回参数）\n        // 接口返回示例：{ success: true, originalUrl: '/join/V001/C1234' }\n        const res = await _shortLink.default.getOriginalUrl(shortCode);\n        if (res.success && res.originalUrl) {\n          // 2. 使用 router.replace 执行内部跳转\n          // replace 不会留下历史记录，防止用户点击返回键回到加载页\n          router.replace(res.originalUrl);\n        } else {\n          alert('短链接已失效');\n        }\n      } catch (error) {\n        console.error('跳转异常:', error);\n      }\n    });\n    return {\n      __sfc: true,\n      route,\n      router\n    };\n  }\n};","map":{"version":3,"names":["_vue","require","_vueRouter","_shortLink","_interopRequireDefault","_default","exports","default","route","useRoute","router","useRouter","onMounted","shortCode","params","res","api","getOriginalUrl","success","originalUrl","replace","alert","error","console"],"sources":["RedirectHandler.vue"],"sourcesContent":["<template>\r\n  <div class=\"redirect-container\">\r\n    <p>正在跳转至通讯房间...</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n// 假设你封装了请求工具\r\nimport api from '@/api/shortLink'; \r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nonMounted(async () => {\r\n  const shortCode = route.params.shortCode;\r\n\r\n  try {\r\n    // 1. 向后端请求原始长链接（或者直接返回参数）\r\n    // 接口返回示例：{ success: true, originalUrl: '/join/V001/C1234' }\r\n    const res = await api.getOriginalUrl(shortCode);\r\n\r\n    if (res.success && res.originalUrl) {\r\n      // 2. 使用 router.replace 执行内部跳转\r\n      // replace 不会留下历史记录，防止用户点击返回键回到加载页\r\n      router.replace(res.originalUrl);\r\n    } else {\r\n      alert('短链接已失效');\r\n    }\r\n  } catch (error) {\r\n    console.error('跳转异常:', error);\r\n  }\r\n});\r\n</script>"],"mappings":";;;;;;;AAOA,IAAAA,IAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AAEA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AADA;AAAA,IAAAI,QAAA,GAAAC,OAAA,CAAAC,OAAA,G;;;IAGA,MAAMC,KAAK,GAAG,IAAAC,mBAAQ,EAAC,CAAC;IACxB,MAAMC,MAAM,GAAG,IAAAC,oBAAS,EAAC,CAAC;IAE1B,IAAAC,cAAS,EAAC,YAAY;MACpB,MAAMC,SAAS,GAAGL,KAAK,CAACM,MAAM,CAACD,SAAS;MAExC,IAAI;QACF;QACA;QACA,MAAME,GAAG,GAAG,MAAMC,kBAAG,CAACC,cAAc,CAACJ,SAAS,CAAC;QAE/C,IAAIE,GAAG,CAACG,OAAO,IAAIH,GAAG,CAACI,WAAW,EAAE;UAClC;UACA;UACAT,MAAM,CAACU,OAAO,CAACL,GAAG,CAACI,WAAW,CAAC;QACjC,CAAC,MAAM;UACLE,KAAK,CAAC,QAAQ,CAAC;QACjB;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC/B;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}