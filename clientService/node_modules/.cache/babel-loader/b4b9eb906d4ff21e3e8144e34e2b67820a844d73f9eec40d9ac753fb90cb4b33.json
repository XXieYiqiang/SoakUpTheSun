{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _user = require(\"@/api/user\");\nvar _ws = _interopRequireDefault(require(\"@/plugins/ws\"));\nvar _vue = _interopRequireDefault(require(\"vue\"));\n// ... (Script ä¿æŒä¸å˜ï¼Œå·²æ­£ç¡®å®ç°é€»è¾‘)\n// ç¡®ä¿è·¯å¾„æ­£ç¡®\n// ç¡®ä¿è·¯å¾„æ­£ç¡®\nvar _default = exports.default = {\n  name: 'LoginView',\n  data() {\n    return {\n      loginForm: {\n        phone: \"\",\n        passWord: \"\"\n      },\n      loginRules: {\n        phone: [{\n          required: true,\n          message: \"è¯·è¾“å…¥æ‰‹æœºå·\",\n          trigger: \"blur\"\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: \"è¯·è¾“å…¥åˆæ³•çš„æ‰‹æœºå·\",\n          trigger: \"blur\"\n        }],\n        passWord: [{\n          required: true,\n          message: \"è¯·è¾“å…¥å¯†ç \",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    async submitLogin() {\n      const that = this;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          const param = {\n            ...this.loginForm\n          };\n          try {\n            (0, _user.handleLogin)(param).then(res => {\n              const data = res.data.data;\n              if (res.data.code === 200 && data.token) {\n                const token = data.token;\n                const user = data.userInfo;\n                that.$store.dispatch('user/login', {\n                  token,\n                  userInfo: user\n                });\n                that.$message.success('è¿æ¥æˆåŠŸï¼Œæ¬¢è¿å›æ¥');\n                this.initWebSocket(user.userId);\n                // ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µæˆ–å…¶ä»–ä¸»é¡µé¢\n                this.$router.push({\n                  name: 'index'\n                });\n              } else {\n                that.$message.error(res.data.message || 'ç™»å½•å¤±è´¥');\n              }\n            });\n          } catch (e) {\n            console.error(e);\n            that.$message.error('ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å¼‚å¸¸');\n          }\n        }\n      });\n    },\n    initWebSocket(userId) {\n      if (this.wsService) {\n        this.wsService.close();\n      }\n      this.wsService = new _ws.default(this.$store);\n      this.wsService.connect(userId);\n      this.$ws = this.wsService;\n      _vue.default.prototype.$ws = this.wsService;\n      this.$ws.send({});\n    }\n  }\n};","map":{"version":3,"names":["_user","require","_ws","_interopRequireDefault","_vue","_default","exports","default","name","data","loginForm","phone","passWord","loginRules","required","message","trigger","pattern","methods","submitLogin","that","$refs","validate","valid","param","handleLogin","then","res","code","token","user","userInfo","$store","dispatch","$message","success","initWebSocket","userId","$router","push","error","e","console","wsService","close","WebSocketService","connect","$ws","Vue","prototype","send"],"sources":["src/views/LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-view-container\">\r\n    <div class=\"tech-bg-overlay\"></div> \r\n    \r\n    <div class=\"login-card-wrapper tech-dialog\">\r\n      <!-- <div class=\"dialog-header\">\r\n        <div class=\"header-deco-line\"></div>\r\n        <h2 class=\"dialog-title-label\">IDENTITY VERIFICATION SYSTEM</h2>\r\n      </div> -->\r\n\r\n      <div class=\"dialog-content-wrapper\">\r\n        <h2 class=\"login-title\">ç”¨æˆ·ç™»å½•</h2>\r\n        <p class=\"login-subtitle\">æ¬¢è¿è¿æ¥ Gim-Chat æ™ºèƒ½ç»ˆç«¯</p>\r\n\r\n        <el-form \r\n          ref=\"loginForm\" \r\n          :model=\"loginForm\" \r\n          :rules=\"loginRules\" \r\n          class=\"tech-form\">\r\n          \r\n          <el-form-item prop=\"phone\">\r\n            <el-input \r\n              v-model=\"loginForm.phone\" \r\n              placeholder=\"è¯·è¾“å…¥æ‰‹æœºå·\" \r\n              prefix-icon=\"el-icon-mobile-phone\"\r\n              class=\"tech-input\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item prop=\"passWord\">\r\n            <el-input \r\n              v-model=\"loginForm.passWord\" \r\n              type=\"password\" \r\n              show-password \r\n              placeholder=\"è¯·è¾“å…¥å¯†ç \"\r\n              prefix-icon=\"el-icon-lock\" \r\n              class=\"tech-input\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item class=\"login-action-item\">\r\n            <el-button type=\"primary\" @click=\"submitLogin\" class=\"tech-btn block-btn\">\r\n              ç™» å½• <i class=\"el-icon-right\"></i>\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// ... (Script ä¿æŒä¸å˜ï¼Œå·²æ­£ç¡®å®ç°é€»è¾‘)\r\nimport { handleLogin } from '@/api/user' // ç¡®ä¿è·¯å¾„æ­£ç¡®\r\nimport WebSocketService from '@/plugins/ws'; // ç¡®ä¿è·¯å¾„æ­£ç¡®\r\nimport Vue from 'vue'\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        phone: \"\",\r\n        passWord: \"\",\r\n      },\r\n      loginRules: {\r\n        phone: [\r\n          { required: true, message: \"è¯·è¾“å…¥æ‰‹æœºå·\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^1[3-9]\\d{9}$/,\r\n            message: \"è¯·è¾“å…¥åˆæ³•çš„æ‰‹æœºå·\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        passWord: [{ required: true, message: \"è¯·è¾“å…¥å¯†ç \", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async submitLogin() {\r\n      const that = this\r\n      this.$refs.loginForm.validate((valid) => {\r\n        if (valid) {\r\n          const param = { ...this.loginForm }\r\n          try {\r\n            handleLogin(param).then(res => {\r\n              const data = res.data.data;\r\n              if (res.data.code === 200 && data.token) {\r\n                const token = data.token;\r\n                const user = data.userInfo;\r\n                that.$store.dispatch('user/login', {\r\n                  token,\r\n                  userInfo: user\r\n                });\r\n                that.$message.success('è¿æ¥æˆåŠŸï¼Œæ¬¢è¿å›æ¥');\r\n                this.initWebSocket(user.userId)\r\n                // ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µæˆ–å…¶ä»–ä¸»é¡µé¢\r\n                this.$router.push({ name: 'index' }); \r\n              } else {\r\n                that.$message.error(res.data.message || 'ç™»å½•å¤±è´¥');\r\n              }\r\n            })\r\n          } catch (e) {\r\n            console.error(e);\r\n            that.$message.error('ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å¼‚å¸¸');\r\n          }\r\n        }\r\n      });\r\n    },\r\n    initWebSocket(userId) {\r\n      if (this.wsService) {\r\n        this.wsService.close();\r\n      }\r\n      this.wsService = new WebSocketService(this.$store);\r\n      this.wsService.connect(userId);\r\n      this.$ws = this.wsService;\r\n      Vue.prototype.$ws = this.wsService;\r\n      this.$ws.send({})\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* ================= å˜é‡å®šä¹‰ (ä» App.vue å¤åˆ¶) ================= */\r\n@bg-dark: #0f1219;\r\n@primary-color: #00f2ff; /* èµ›åšé’è‰² */\r\n@accent-color: #7d2ae8; /* éœ“è™¹ç´« */\r\n@text-sub: #94a3b8;\r\n@text-main: #e2e8f0;\r\n\r\n/* åŠ¨ç”»é¢œè‰²å®šä¹‰ */\r\n@glow-color-A: #00f2ff;\r\n@glow-color-B: #7d2ae8;\r\n\r\n/* ğŸš€ å…³é”®å¸§åŠ¨ç”»ï¼šå…‰æ™•å‘¼å¸ */\r\n@keyframes tech-glow-pulse {\r\n    0% {\r\n        box-shadow: 0 0 15px fade(@glow-color-A, 50%), 0 0 30px fade(@glow-color-A, 30%);\r\n    }\r\n    50% {\r\n        box-shadow: 0 0 25px fade(@glow-color-B, 70%), 0 0 45px fade(@glow-color-B, 50%);\r\n    }\r\n    100% {\r\n        box-shadow: 0 0 15px fade(@glow-color-A, 50%), 0 0 30px fade(@glow-color-A, 30%);\r\n    }\r\n}\r\n\r\n\r\n/* ================= é¡µé¢å¸ƒå±€ ================= */\r\n.login-view-container {\r\n    display: flex;\r\n    justify-content: center; /* æ ¸å¿ƒï¼šæ°´å¹³å±…ä¸­ */\r\n    align-items: center;     /* æ ¸å¿ƒï¼šå‚ç›´å±…ä¸­ */\r\n    min-height: 100vh;\r\n    background-color: @bg-dark;\r\n    position: relative;\r\n    overflow: hidden;\r\n    z-index: 1; \r\n}\r\n\r\n/* èƒŒæ™¯çº¹ç† */\r\n.tech-bg-overlay {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: \r\n        radial-gradient(circle at 10% 80%, rgba(125, 42, 232, 0.1) 0%, transparent 30%),\r\n        radial-gradient(circle at 90% 20%, rgba(0, 242, 255, 0.08) 0%, transparent 30%);\r\n    z-index: 0;\r\n}\r\n\r\n/* ç™»å½•å¡ç‰‡æ ·å¼ (æ¨¡æ‹Ÿ el-dialog çš„å¤–è§‚) */\r\n.login-card-wrapper {\r\n    width: 420px;\r\n    // height: 500px; /* ç§»é™¤å›ºå®šé«˜åº¦ï¼Œè®©å†…å®¹æ’‘å¼€ */\r\n    padding-bottom: 20px; /* åº•éƒ¨å¢åŠ ä¸€äº›ç©ºé—´ */\r\n    background: rgba(26, 29, 38, 0.95); /* æ›´æš—çš„ç»ç’ƒæ•ˆæœ */\r\n    backdrop-filter: blur(5px);\r\n    border: 1px solid rgba(0, 242, 255, 0.2);\r\n    border-radius: 12px;\r\n    z-index: 10;\r\n    \r\n    /* åº”ç”¨å…‰æ™•åŠ¨ç”» */\r\n    animation: tech-glow-pulse 4s ease-in-out infinite alternate;\r\n    box-shadow: 0 0 40px rgba(0, 0, 0, 0.8); /* å¢å¼ºé˜´å½±æ·±åº¦ */\r\n}\r\n\r\n.dialog-header {\r\n    padding: 20px 30px 15px;\r\n    position: relative;\r\n    \r\n    .dialog-title-label {\r\n        color: @primary-color;\r\n        font-size: 14px;\r\n        letter-spacing: 2px;\r\n        font-family: 'Consolas', monospace; /* æ¨¡æ‹Ÿç³»ç»Ÿæ ‡é¢˜ */\r\n        text-align: center;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .header-deco-line {\r\n        height: 1px;\r\n        width: 80%;\r\n        margin: 0 auto;\r\n        background: linear-gradient(90deg, transparent, @primary-color, transparent);\r\n        box-shadow: 0 0 5px @primary-color;\r\n    }\r\n}\r\n\r\n.dialog-content-wrapper {\r\n    padding: 30px;\r\n    padding-top: 10px; /* è°ƒæ•´é¡¶éƒ¨é—´è· */\r\n    text-align: center;\r\n\r\n    .login-title {\r\n        font-size: 28px; /* æ ‡é¢˜ç¨å¤§ */\r\n        color: #fff;\r\n        margin-bottom: 8px;\r\n        font-weight: 700;\r\n        text-shadow: 0 0 5px rgba(0, 242, 255, 0.4);\r\n    }\r\n\r\n    .login-subtitle {\r\n        color: @text-sub;\r\n        font-size: 14px;\r\n        margin-bottom: 40px; /* å¢åŠ ä¸è¡¨å•çš„é—´è· */\r\n    }\r\n}\r\n\r\n/* ================= Element UI æ ·å¼è¦†ç›– (ä» App.vue å¤åˆ¶) ================= */\r\n.tech-btn {\r\n    &.primary {\r\n        background: linear-gradient(135deg, @primary-color, #006eff); /* è°ƒæ•´æ¸å˜æ–¹å‘å’Œé¢œè‰² */\r\n        border: none;\r\n        box-shadow: 0 4px 15px rgba(0, 242, 255, 0.5);\r\n        font-weight: 700;\r\n        transition: all 0.3s;\r\n\r\n        &:hover {\r\n            transform: scale(1.02); // æ‚¬åœæ”¾å¤§\r\n            box-shadow: 0 0 25px rgba(0, 242, 255, 0.8);\r\n            background: linear-gradient(135deg, @accent-color, @primary-color);\r\n        }\r\n    }\r\n\r\n    &.block-btn {\r\n        width: 100%;\r\n        height: 48px; /* æŒ‰é’®æ›´é«˜ */\r\n        font-size: 18px;\r\n        letter-spacing: 3px;\r\n    }\r\n}\r\n\r\n.tech-form {\r\n    .el-form-item {\r\n        margin-bottom: 25px;\r\n    }\r\n    \r\n    .el-form-item__label {\r\n        color: @text-sub;\r\n    }\r\n\r\n    .el-input__inner {\r\n        background: rgba(0, 0, 0, 0.4); /* æ›´æ·±çš„è¾“å…¥æ¡†èƒŒæ™¯ */\r\n        border: 1px solid rgba(0, 242, 255, 0.2);\r\n        color: @text-main;\r\n        height: 48px;\r\n        border-radius: 4px; /* ç•¥å¾®ç¡¬æœ—çš„è¾¹ç¼˜ */\r\n        font-size: 16px;\r\n\r\n        &:focus {\r\n            border-color: @primary-color;\r\n            box-shadow: 0 0 10px rgba(0, 242, 255, 0.4);\r\n        }\r\n    }\r\n\r\n    .el-input__icon {\r\n        color: @primary-color;\r\n        font-size: 18px;\r\n    }\r\n}\r\n</style>"],"mappings":";;;;;;;;AAmDA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,GAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,IAAA,GAAAD,sBAAA,CAAAF,OAAA;AAHA;AACA;AACA;AAAA,IAAAI,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAGA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;QACAC,KAAA;QACAC,QAAA;MACA;MACAC,UAAA;QACAF,KAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,OAAA;UACAF,OAAA;UACAC,OAAA;QACA,EACA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAE,OAAA;IACA,MAAAC,YAAA;MACA,MAAAC,IAAA;MACA,KAAAC,KAAA,CAAAX,SAAA,CAAAY,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,MAAAC,KAAA;YAAA,QAAAd;UAAA;UACA;YACA,IAAAe,iBAAA,EAAAD,KAAA,EAAAE,IAAA,CAAAC,GAAA;cACA,MAAAlB,IAAA,GAAAkB,GAAA,CAAAlB,IAAA,CAAAA,IAAA;cACA,IAAAkB,GAAA,CAAAlB,IAAA,CAAAmB,IAAA,YAAAnB,IAAA,CAAAoB,KAAA;gBACA,MAAAA,KAAA,GAAApB,IAAA,CAAAoB,KAAA;gBACA,MAAAC,IAAA,GAAArB,IAAA,CAAAsB,QAAA;gBACAX,IAAA,CAAAY,MAAA,CAAAC,QAAA;kBACAJ,KAAA;kBACAE,QAAA,EAAAD;gBACA;gBACAV,IAAA,CAAAc,QAAA,CAAAC,OAAA;gBACA,KAAAC,aAAA,CAAAN,IAAA,CAAAO,MAAA;gBACA;gBACA,KAAAC,OAAA,CAAAC,IAAA;kBAAA/B,IAAA;gBAAA;cACA;gBACAY,IAAA,CAAAc,QAAA,CAAAM,KAAA,CAAAb,GAAA,CAAAlB,IAAA,CAAAM,OAAA;cACA;YACA;UACA,SAAA0B,CAAA;YACAC,OAAA,CAAAF,KAAA,CAAAC,CAAA;YACArB,IAAA,CAAAc,QAAA,CAAAM,KAAA;UACA;QACA;MACA;IACA;IACAJ,cAAAC,MAAA;MACA,SAAAM,SAAA;QACA,KAAAA,SAAA,CAAAC,KAAA;MACA;MACA,KAAAD,SAAA,OAAAE,WAAA,MAAAb,MAAA;MACA,KAAAW,SAAA,CAAAG,OAAA,CAAAT,MAAA;MACA,KAAAU,GAAA,QAAAJ,SAAA;MACAK,YAAA,CAAAC,SAAA,CAAAF,GAAA,QAAAJ,SAAA;MACA,KAAAI,GAAA,CAAAG,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}