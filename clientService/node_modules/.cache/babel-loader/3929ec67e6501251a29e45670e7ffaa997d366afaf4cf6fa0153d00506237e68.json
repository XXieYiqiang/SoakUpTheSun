{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.for-each.js\");\nconst WS_URL = 'ws://localhost:8080'; // Âü∫Á°Ä WS URL\nvar _default = exports.default = {\n  name: 'WebRTCView',\n  data() {\n    return {\n      // ================= WebRTC (SFU Ê®°Âºè) =================\n      upPC: null,\n      // ‰∏äË°å PeerConnection (ÂèëÂ∏É/Êé®ÊµÅ)\n      // Ê≥®ÊÑèÔºöDownPC Âú® Go ÂêéÁ´ØÊòØÂçï‰∏™ÂÆû‰æãÁî®‰∫éÊé•Êî∂ÊâÄÊúâÊµÅ„ÄÇÂâçÁ´Ø‰πüÂ∫îÂ¶ÇÊ≠§„ÄÇ\n      downPC: null,\n      // ‰∏ãË°å PeerConnection (ËÆ¢ÈòÖ/ÊãâÊµÅ)\n      localStream: null,\n      // Êú¨Âú∞Â™í‰ΩìÊµÅ\n\n      // ================= WebSocket ‰ø°‰ª§ =================\n      ws: null,\n      wsStatus: 'Êú™ËøûÊé•',\n      userId: 'client-' + Math.random().toString(36).slice(2, 8),\n      roomID: 'XGAZqWqNk6PAczWuHbQ4Av',\n      isPublisher: false,\n      // Ê†áËÆ∞ÂΩìÂâçÊòØÂê¶Ê≠£Âú®ÂèëÂ∏É‰∏≠\n\n      // Â≠òÂÇ®ÊâÄÊúâËÆ¢ÈòÖÊµÅ Key: PublisherID, Value: MediaStream\n      downStreams: new Map(),\n      onlinePublishers: {},\n      // ÊàøÈó¥ÂÜÖÂú®Á∫øÂèëÂ∏ÉËÄÖÂàóË°® (‰ªÖÁî®‰∫é UI Â±ïÁ§∫)\n\n      iceServers: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }]\n      }\n    };\n  },\n  mounted() {\n    this.initSignalWS();\n    this.initMedia();\n  },\n  methods: {\n    /* ================= ‰ø°‰ª§ WS & ÊàøÈó¥ÁÆ°ÁêÜ ================= */\n    initSignalWS() {\n      // ‰∏•Ê†ºÂåπÈÖçÂêéÁ´Ø Go ÁöÑË∑ØÁî±ÂíåÂèÇÊï∞\n      this.ws = new WebSocket(`${WS_URL}/room/join?uid=${this.userId}&roomID=${this.roomID}`);\n      this.ws.onopen = () => {\n        this.wsStatus = 'Â∑≤ËøûÊé•';\n        console.log('üì° ‰ø°‰ª§ WS Â∑≤ËøûÊé•, userId=', this.userId);\n      };\n      this.ws.onmessage = async e => {\n        try {\n          const rawMsg = JSON.parse(e.data);\n          console.log('‚¨ÖÔ∏è Êî∂Âà∞ SFU ‰ø°‰ª§:', rawMsg.event, rawMsg.data);\n          await this.handleSignal(rawMsg);\n        } catch (error) {\n          console.error('‰ø°‰ª§Ê∂àÊÅØËß£ÊûêÂ§±Ë¥•:', error, e.data);\n        }\n      };\n      this.ws.onclose = () => {\n        this.wsStatus = 'Â∑≤Êñ≠ÂºÄ';\n        this.hangup();\n      };\n      this.ws.onerror = err => {\n        this.wsStatus = 'ÈîôËØØ';\n        console.error('WebSocket ÈîôËØØ:', err);\n      };\n    },\n    sendSignal(event, data) {\n      if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n        const message = {\n          event: event,\n          data: data // data Â∑≤ÁªèÊòØÂØπË±°ÔºåÂ∞ÜË¢´ JSON.stringify Â∫èÂàóÂåñ\n        };\n        this.ws.send(JSON.stringify(message));\n      } else {\n        console.warn('WebSocket Êú™ËøûÊé•ÔºåÊó†Ê≥ïÂèëÈÄÅ‰ø°‰ª§:', event);\n      }\n    },\n    /* ================= Â™í‰ΩìÂàùÂßãÂåñ ================= */\n    async initMedia() {\n      if (this.localStream) return;\n      try {\n        this.localStream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true\n        });\n        this.$refs.localVideo.srcObject = this.localStream;\n      } catch (error) {\n        console.error(\"Ëé∑ÂèñÂ™í‰ΩìÊµÅÂ§±Ë¥•:\", error);\n      }\n    },\n    /* ================= ÂèëÂ∏ÉËÄÖ (UpPC) ÊµÅÁ®ã ================= */\n    createUpPeerConnection() {\n      if (this.upPC) {\n        this.upPC.close();\n      }\n      this.upPC = new RTCPeerConnection(this.iceServers);\n\n      // 1. Ê∑ªÂä†Êú¨Âú∞ËΩ®ÈÅì\n      this.localStream.getTracks().forEach(track => {\n        this.upPC.addTrack(track, this.localStream);\n      });\n\n      // 2. ICE candidate ÁîüÊàêÊó∂ÂèëÈÄÅÁªô SFU (up_candidate)\n      this.upPC.onicecandidate = e => {\n        if (e.candidate) {\n          // ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"up_candidate\"\n          this.sendSignal('up_candidate', {\n            candidate: e.candidate.toJSON()\n          });\n        }\n      };\n\n      // 3. ÁõëÂê¨ËøûÊé•Áä∂ÊÄÅ\n      this.upPC.onconnectionstatechange = () => {\n        console.log(`‚¨ÜÔ∏è UpPC Áä∂ÊÄÅ: ${this.upPC.connectionState}`);\n      };\n    },\n    async startPublish() {\n      if (this.isPublisher) return;\n      if (!this.localStream) {\n        await this.initMedia();\n        if (!this.localStream) return;\n      }\n      this.createUpPeerConnection();\n\n      // 1. ÂàõÂª∫ offer\n      const offer = await this.upPC.createOffer();\n      await this.upPC.setLocalDescription(offer);\n      console.log('‚û°Ô∏è ÂèëÈÄÅ up_offer (Local SDP):', offer.sdp);\n\n      // 2. ÂèëÈÄÅ up_offer Áªô SFU (ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"up_offer\")\n      this.sendSignal('up_offer', {\n        uid: this.userId,\n        sdp: offer.sdp\n      });\n      this.isPublisher = true;\n    },\n    /* ================= ËÆ¢ÈòÖËÄÖ (DownPC) ÊµÅÁ®ã ================= */\n    createDownPeerConnection() {\n      if (this.downPC) {\n        return; // DownPC Âè™ÈúÄË¶ÅÂàõÂª∫‰∏ÄÊ¨°\n      }\n      this.downPC = new RTCPeerConnection(this.iceServers);\n\n      // 1. ÁõëÂê¨ËøúÁ´ØÊµÅÔºàÊâÄÊúâÁöÑËÆ¢ÈòÖÊµÅÈÉΩ‰ºöÈÄöËøáËøô‰∏™ÂõûË∞ÉÊî∂Âà∞Ôºâ\n      // WebRTCView.vue - createDownPeerConnection ÂÜÖÈÉ® (‰øÆÊ≠£)\n      this.downPC.ontrack = e => {\n        // 1. Ëé∑Âèñ MediaStreamÔºåËøôÊòØËøúÁ´ØËßÜÈ¢ëÂíåÈü≥È¢ëÁöÑÂÆπÂô®\n        const remoteStream = e.streams[0];\n\n        // 2. ‰ΩøÁî® Stream ID (ÂÆÉÂ∫îËØ•Âú®ÂçèÂïÜ‰∏≠Ë¢´ÂîØ‰∏ÄÁ°ÆÂÆö) ‰Ωú‰∏∫ÈîÆ\n        const pubId = remoteStream.id;\n        console.log('üéØ Êî∂Âà∞ËøúÁ´ØÊµÅ (DownPC), Stream ID:', pubId, 'Track Kind:', e.track.kind);\n\n        // 3. Â∞Ü Stream Â≠òÂÖ• Map (Â¶ÇÊûú Stream Â∑≤ÁªèÂ≠òÂú®ÔºåMap.set ‰ºöÊõ¥Êñ∞ÂÆÉ)\n        if (!this.downStreams.has(pubId)) {\n          // Â¶ÇÊûúÊòØÊñ∞ÁöÑ StreamÔºåÊàë‰ª¨‰ΩøÁî® remoteStream.id ‰Ωú‰∏∫ key\n          this.downStreams.set(pubId, remoteStream);\n        }\n        // Ê≥®ÊÑèÔºöÂ¶ÇÊûú Stream Â∑≤Â≠òÂú®Ôºåontrack ÂèØËÉΩÊòØ‰∏∫‰∫ÜÊ∑ªÂä†Âè¶‰∏Ä‰∏™ Track (‰æãÂ¶ÇÔºåÂÖàÊî∂ËßÜÈ¢ëÔºåÂêéÊî∂Èü≥È¢ë)\n        // Vue ÁöÑ Map ÂèòÊõ¥Ê£ÄÊµãÂèØËÉΩ‰ºöÊúâÈóÆÈ¢òÔºåÊúÄÂ•Ω‰ΩøÁî® Vue.set ÊàñÂº∫Âà∂Êõ¥Êñ∞„ÄÇ\n\n        // 4. Á°Æ‰øù Vue Ê∏≤ÊüìÂô®Êõ¥Êñ∞Âπ∂ÊåáÂêëÊ≠£Á°ÆÁöÑÊµÅ\n        this.$nextTick(() => {\n          // Êü•ÊâæÊàñÂàõÂª∫ÂØπÂ∫îËßÜÈ¢ëÂÖÉÁ¥†\n          const videoEl = this.$refs[`remoteVideo-${pubId}`];\n          if (videoEl && videoEl[0] && videoEl[0].srcObject !== remoteStream) {\n            videoEl[0].srcObject = remoteStream;\n            console.log(`‚úÖ ËßÜÈ¢ëÂÖÉÁ¥†ÁªëÂÆöÊàêÂäü: ${pubId}`);\n          }\n        });\n      };\n\n      // 2. ICE candidate ÁîüÊàêÊó∂ÂèëÈÄÅÁªô SFU (down_candidate)\n      this.downPC.onicecandidate = e => {\n        if (e.candidate) {\n          // ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"down_candidate\"\n          this.sendSignal('down_candidate', {\n            candidate: e.candidate.toJSON()\n          });\n        }\n      };\n\n      // 3. ÁõëÂê¨ËøûÊé•Áä∂ÊÄÅ\n      this.downPC.onconnectionstatechange = () => {\n        console.log(`‚¨áÔ∏è DownPC Áä∂ÊÄÅ: ${this.downPC.connectionState}`);\n      };\n    },\n    async handleDownOffer(payload) {\n      this.createDownPeerConnection();\n\n      // 1. ËÆæÁΩÆ SFU ÂèëÊù•ÁöÑ Offer ‰∏∫ËøúÁ´ØÊèèËø∞\n      await this.downPC.setRemoteDescription(new RTCSessionDescription({\n        type: 'offer',\n        sdp: payload.sdp\n      }));\n\n      // 2. ÂàõÂª∫ Answer\n      const answer = await this.downPC.createAnswer();\n      await this.downPC.setLocalDescription(answer);\n      console.log('‚û°Ô∏è ÂèëÈÄÅ down_answer (Local SDP):', answer.sdp);\n\n      // 3. ÂèëÈÄÅ down_answer Áªô SFU (ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"down_answer\")\n      // Ê≥®ÊÑèÔºöGo ÂêéÁ´ØÊ≤°Êúâ‰ΩøÁî® From Â≠óÊÆµÔºåÂè™ÈúÄË¶Å SDP\n      this.sendSignal('down_answer', {\n        sdp: answer.sdp\n      });\n\n      // Êõ¥Êñ∞ UI ÂàóË°®ÔºåÊ†áËÆ∞ËØ•ÂèëÂ∏ÉËÄÖÊ≠£Âú®Ë¢´ËÆ¢ÈòÖ\n      this.$set(this.onlinePublishers, payload.from, 'Ê≠£Âú®ËÆ¢ÈòÖ');\n    },\n    /* ================= ‰ø°‰ª§Â§ÑÁêÜ‰∏≠ÂøÉ ================= */\n    async handleSignal(msg) {\n      const event = msg.event;\n      let dataPayload = null;\n      try {\n        // Go ÊúçÂä°Âô®‰ΩøÁî® json.RawMessageÔºåÂâçÁ´ØÈúÄË¶ÅÂÜçÊ¨°Ëß£Êûê data Â≠óÊÆµ\n        if (msg.data) {\n          // Á°Æ‰øù data ÊòØÂ≠óÁ¨¶‰∏≤ÊâçËÉΩËß£Êûê\n          dataPayload = typeof msg.data === 'string' ? JSON.parse(msg.data) : msg.data;\n        }\n        switch (event) {\n          case 'up_answer':\n            if (!this.upPC) {\n              console.error(\"UpPC‰∏çÂ≠òÂú®\");\n              return;\n            }\n            await this.upPC.setRemoteDescription(new RTCSessionDescription({\n              type: 'answer',\n              sdp: dataPayload.sdp\n            }));\n            console.log('‚úÖ UpPC ËøûÊé•ÊàêÂäüÔºÅ');\n            break;\n          case 'down_offer':\n            // SFU ÂèëÊù•Êñ∞ÁöÑ Offer (ÂèØËÉΩÂåÖÂê´Êñ∞ÁöÑ Track)\n            await this.handleDownOffer(dataPayload);\n            break;\n          case 'up_candidate':\n          case 'down_candidate':\n            // Candidate ÁöÑ JSON ÁªìÊûÑ‰∏é RTCIceCandidateInit ÂÖºÂÆπ\n            if (dataPayload && dataPayload.candidate) {\n              const candidate = new RTCIceCandidate(dataPayload.candidate);\n              let targetPC = null;\n              if (event === 'up_candidate') {\n                targetPC = this.upPC;\n              } else if (event === 'down_candidate') {\n                targetPC = this.downPC;\n              }\n              if (targetPC && targetPC.remoteDescription) {\n                await targetPC.addIceCandidate(candidate);\n                console.log(`‚úÖ ${event} Candidate Ê∑ªÂä†ÊàêÂäü`);\n              } else if (targetPC) {\n                // ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÈúÄË¶ÅÁºìÂÜ≤ candidate Áõ¥Âà∞ setRemoteDescription ÂÆåÊàê\n                console.warn(`‚ö†Ô∏è ÁºìÂÜ≤ ${event} Candidate`);\n              }\n            }\n            break;\n          case 'user_join':\n          case 'user_leave':\n            // Â§ÑÁêÜÁî®Êà∑Âä†ÂÖ•/Á¶ªÂºÄÊàøÈó¥ÁöÑÈÄöÁü•\n            this.handleUserStatusUpdate(event, dataPayload);\n            break;\n          default:\n            console.warn('Êú™Áü• SFU ‰ø°‰ª§‰∫ã‰ª∂:', event);\n        }\n      } catch (e) {\n        console.error(`Â§ÑÁêÜ ${event} Ê∂àÊÅØÂ§±Ë¥•:`, e);\n      }\n    },\n    handleUserStatusUpdate(event, payload) {\n      // ÂÅáËÆæ SFU ÊúçÂä°Âô®ÂèëÈÄÅ‰∫Ü roomID Âíå userID ÁöÑÂàóË°®\n      // ÂÆûÈôÖÊÉÖÂÜµÔºöSFU Âè™‰ºöÈÄöÁü•Âì™‰∏™Áî®Êà∑ÂºÄÂßãÂèëÂ∏É (publish) ÊàñÂÅúÊ≠¢ÂèëÂ∏É (unpublish)\n\n      // ÁÆÄÂåñÔºöËøôÈáå‰ªÖÊºîÁ§∫Êõ¥Êñ∞Âú®Á∫øÂàóË°®\n      if (event === 'user_join') {\n        this.$set(this.onlinePublishers, payload.uid, 'Âú®Á∫ø/Êú™ÂèëÂ∏É');\n      } else if (event === 'user_leave') {\n        this.$delete(this.onlinePublishers, payload.uid);\n        // ÂêåÊó∂ÈúÄË¶ÅÊ∏ÖÁêÜ DownPC ÂØπÂ∫îÁöÑÊµÅ\n        this.downStreams.forEach((stream, pubId) => {\n          if (pubId === payload.uid) {\n            this.downStreams.delete(pubId);\n          }\n        });\n      }\n    },\n    /* ================= ÊåÇÊñ≠/Ê∏ÖÁêÜ ================= */\n    hangup() {\n      // ÂèëÈÄÅ unpublish ‰ø°‰ª§Áªô SFUÔºåËÆ©ÊúçÂä°Âô®Ê∏ÖÁêÜ UpPC ËµÑÊ∫ê\n      if (this.isPublisher) {\n        this.sendSignal('unpublish', {\n          uid: this.userId\n        });\n      }\n\n      // ÂÖ≥Èó≠ PeerConnections\n      if (this.upPC) {\n        this.upPC.close();\n        this.upPC = null;\n      }\n      if (this.downPC) {\n        this.downPC.close();\n        this.downPC = null;\n      }\n\n      // ÂÅúÊ≠¢Êú¨Âú∞ÊµÅ\n      if (this.localStream) {\n        this.localStream.getTracks().forEach(t => t.stop());\n        this.localStream = null;\n      }\n\n      // Ê∏ÖÁêÜ UI Áä∂ÊÄÅ\n      this.$refs.localVideo.srcObject = null;\n      this.downStreams = new Map();\n      this.isPublisher = false;\n      this.$delete(this.onlinePublishers, this.userId); // Ê∏ÖÁêÜËá™Â∑±ÂèëÂ∏ÉÁöÑËÆ∞ÂΩï\n      console.log('‚òéÔ∏è Â∑≤ÊåÇÊñ≠');\n    }\n  },\n  beforeDestroy() {\n    this.hangup();\n    if (this.ws) {\n      this.ws.close();\n    }\n  }\n};","map":{"version":3,"names":["WS_URL","_default","exports","default","name","data","upPC","downPC","localStream","ws","wsStatus","userId","Math","random","toString","slice","roomID","isPublisher","downStreams","Map","onlinePublishers","iceServers","urls","mounted","initSignalWS","initMedia","methods","WebSocket","onopen","console","log","onmessage","e","rawMsg","JSON","parse","event","handleSignal","error","onclose","hangup","onerror","err","sendSignal","readyState","OPEN","message","send","stringify","warn","navigator","mediaDevices","getUserMedia","video","audio","$refs","localVideo","srcObject","createUpPeerConnection","close","RTCPeerConnection","getTracks","forEach","track","addTrack","onicecandidate","candidate","toJSON","onconnectionstatechange","connectionState","startPublish","offer","createOffer","setLocalDescription","sdp","uid","createDownPeerConnection","ontrack","remoteStream","streams","pubId","id","kind","has","set","$nextTick","videoEl","handleDownOffer","payload","setRemoteDescription","RTCSessionDescription","type","answer","createAnswer","$set","from","msg","dataPayload","RTCIceCandidate","targetPC","remoteDescription","addIceCandidate","handleUserStatusUpdate","$delete","stream","delete","t","stop","beforeDestroy"],"sources":["src/views/utils/test2.vue"],"sourcesContent":["<template>\r\n  <div class=\"webrtc-container\">\r\n    <h2>üé• WebRTC SFU Demo</h2>\r\n\r\n    <div class=\"video-box\">\r\n      <div class=\"video-item\">\r\n        <h3>Êú¨Âú∞ËßÜÈ¢ë (ID: {{ userId }})</h3>\r\n        <video ref=\"localVideo\" autoplay muted playsinline></video>\r\n      </div>\r\n      <div v-for=\"([pubId, stream]) in downStreams.entries()\" :key=\"pubId\" class=\"video-item\">\r\n        <video :ref=\"'remoteVideo-' + pubId\" autoplay playsinline :srcObject=\"stream\"></video>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"actions\">\r\n      <el-button type=\"primary\" :disabled=\"isPublisher\" @click=\"startPublish\">ÂèëÂ∏ÉÊàëÁöÑÊµÅ</el-button>\r\n      <el-button type=\"danger\" @click=\"hangup\">ÂÅúÊ≠¢ÂèëÂ∏É / ÊåÇÊñ≠</el-button>\r\n    </div>\r\n\r\n    <div class=\"online-users-box\">\r\n      <h3>üë• ÊàøÈó¥ÂÜÖÂΩìÂâçÂèëÂ∏ÉËÄÖ</h3>\r\n      <div v-if=\"Object.keys(onlinePublishers).length === 0\">ÊöÇÊó†ÂÖ∂‰ªñÁî®Êà∑ÂèëÂ∏É</div>\r\n      <ul v-else>\r\n        <li v-for=\"(status, user) in onlinePublishers\" :key=\"user\">\r\n          Áî®Êà∑ ID: **{{ user }}** - Áä∂ÊÄÅ: {{ status }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <pre>WebSocket Áä∂ÊÄÅ: {{ wsStatus }}</pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst WS_URL = 'ws://localhost:8080'; // Âü∫Á°Ä WS URL\r\n\r\nexport default {\r\n  name: 'WebRTCView',\r\n\r\n  data() {\r\n    return {\r\n      // ================= WebRTC (SFU Ê®°Âºè) =================\r\n      upPC: null,         // ‰∏äË°å PeerConnection (ÂèëÂ∏É/Êé®ÊµÅ)\r\n      // Ê≥®ÊÑèÔºöDownPC Âú® Go ÂêéÁ´ØÊòØÂçï‰∏™ÂÆû‰æãÁî®‰∫éÊé•Êî∂ÊâÄÊúâÊµÅ„ÄÇÂâçÁ´Ø‰πüÂ∫îÂ¶ÇÊ≠§„ÄÇ\r\n      downPC: null,       // ‰∏ãË°å PeerConnection (ËÆ¢ÈòÖ/ÊãâÊµÅ)\r\n      localStream: null,  // Êú¨Âú∞Â™í‰ΩìÊµÅ\r\n\r\n      // ================= WebSocket ‰ø°‰ª§ =================\r\n      ws: null,\r\n      wsStatus: 'Êú™ËøûÊé•',\r\n      userId: 'client-' + Math.random().toString(36).slice(2, 8),\r\n      roomID: 'XGAZqWqNk6PAczWuHbQ4Av',\r\n      isPublisher: false, // Ê†áËÆ∞ÂΩìÂâçÊòØÂê¶Ê≠£Âú®ÂèëÂ∏É‰∏≠\r\n\r\n      // Â≠òÂÇ®ÊâÄÊúâËÆ¢ÈòÖÊµÅ Key: PublisherID, Value: MediaStream\r\n      downStreams: new Map(),\r\n      onlinePublishers: {}, // ÊàøÈó¥ÂÜÖÂú®Á∫øÂèëÂ∏ÉËÄÖÂàóË°® (‰ªÖÁî®‰∫é UI Â±ïÁ§∫)\r\n\r\n      iceServers: {\r\n        iceServers: [\r\n          { urls: 'stun:stun.l.google.com:19302' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.initSignalWS()\r\n    this.initMedia()\r\n  },\r\n\r\n  methods: {\r\n    /* ================= ‰ø°‰ª§ WS & ÊàøÈó¥ÁÆ°ÁêÜ ================= */\r\n    initSignalWS() {\r\n      // ‰∏•Ê†ºÂåπÈÖçÂêéÁ´Ø Go ÁöÑË∑ØÁî±ÂíåÂèÇÊï∞\r\n      this.ws = new WebSocket(`${WS_URL}/room/join?uid=${this.userId}&roomID=${this.roomID}`)\r\n\r\n      this.ws.onopen = () => {\r\n        this.wsStatus = 'Â∑≤ËøûÊé•';\r\n        console.log('üì° ‰ø°‰ª§ WS Â∑≤ËøûÊé•, userId=', this.userId)\r\n      }\r\n\r\n      this.ws.onmessage = async e => {\r\n        try {\r\n          const rawMsg = JSON.parse(e.data)\r\n          console.log('‚¨ÖÔ∏è Êî∂Âà∞ SFU ‰ø°‰ª§:', rawMsg.event, rawMsg.data)\r\n          await this.handleSignal(rawMsg)\r\n        } catch (error) {\r\n          console.error('‰ø°‰ª§Ê∂àÊÅØËß£ÊûêÂ§±Ë¥•:', error, e.data)\r\n        }\r\n      }\r\n\r\n      this.ws.onclose = () => {\r\n        this.wsStatus = 'Â∑≤Êñ≠ÂºÄ';\r\n        this.hangup();\r\n      }\r\n      this.ws.onerror = (err) => {\r\n        this.wsStatus = 'ÈîôËØØ';\r\n        console.error('WebSocket ÈîôËØØ:', err);\r\n      }\r\n    },\r\n\r\n    sendSignal(event, data) {\r\n      if (this.ws && this.ws.readyState === WebSocket.OPEN) {\r\n        const message = {\r\n          event: event,\r\n          data: data // data Â∑≤ÁªèÊòØÂØπË±°ÔºåÂ∞ÜË¢´ JSON.stringify Â∫èÂàóÂåñ\r\n        }\r\n        this.ws.send(JSON.stringify(message))\r\n      } else {\r\n        console.warn('WebSocket Êú™ËøûÊé•ÔºåÊó†Ê≥ïÂèëÈÄÅ‰ø°‰ª§:', event)\r\n      }\r\n    },\r\n\r\n    /* ================= Â™í‰ΩìÂàùÂßãÂåñ ================= */\r\n    async initMedia() {\r\n      if (this.localStream) return\r\n      try {\r\n        this.localStream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n          audio: true\r\n        })\r\n        this.$refs.localVideo.srcObject = this.localStream\r\n      } catch (error) {\r\n        console.error(\"Ëé∑ÂèñÂ™í‰ΩìÊµÅÂ§±Ë¥•:\", error)\r\n      }\r\n    },\r\n\r\n    /* ================= ÂèëÂ∏ÉËÄÖ (UpPC) ÊµÅÁ®ã ================= */\r\n    createUpPeerConnection() {\r\n      if (this.upPC) {\r\n        this.upPC.close()\r\n      }\r\n      this.upPC = new RTCPeerConnection(this.iceServers)\r\n\r\n      // 1. Ê∑ªÂä†Êú¨Âú∞ËΩ®ÈÅì\r\n      this.localStream.getTracks().forEach(track => {\r\n        this.upPC.addTrack(track, this.localStream)\r\n      })\r\n\r\n      // 2. ICE candidate ÁîüÊàêÊó∂ÂèëÈÄÅÁªô SFU (up_candidate)\r\n      this.upPC.onicecandidate = e => {\r\n        if (e.candidate) {\r\n          // ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"up_candidate\"\r\n          this.sendSignal('up_candidate', { candidate: e.candidate.toJSON() })\r\n        }\r\n      }\r\n\r\n      // 3. ÁõëÂê¨ËøûÊé•Áä∂ÊÄÅ\r\n      this.upPC.onconnectionstatechange = () => {\r\n        console.log(`‚¨ÜÔ∏è UpPC Áä∂ÊÄÅ: ${this.upPC.connectionState}`)\r\n      }\r\n    },\r\n\r\n    async startPublish() {\r\n      if (this.isPublisher) return;\r\n\r\n      if (!this.localStream) {\r\n        await this.initMedia()\r\n        if (!this.localStream) return;\r\n      }\r\n      this.createUpPeerConnection()\r\n\r\n      // 1. ÂàõÂª∫ offer\r\n      const offer = await this.upPC.createOffer()\r\n      await this.upPC.setLocalDescription(offer)\r\n\r\n      console.log('‚û°Ô∏è ÂèëÈÄÅ up_offer (Local SDP):', offer.sdp)\r\n\r\n      // 2. ÂèëÈÄÅ up_offer Áªô SFU (ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"up_offer\")\r\n      this.sendSignal('up_offer', { uid: this.userId, sdp: offer.sdp })\r\n      this.isPublisher = true\r\n    },\r\n\r\n    /* ================= ËÆ¢ÈòÖËÄÖ (DownPC) ÊµÅÁ®ã ================= */\r\n    createDownPeerConnection() {\r\n      if (this.downPC) {\r\n        return // DownPC Âè™ÈúÄË¶ÅÂàõÂª∫‰∏ÄÊ¨°\r\n      }\r\n\r\n      this.downPC = new RTCPeerConnection(this.iceServers)\r\n\r\n      // 1. ÁõëÂê¨ËøúÁ´ØÊµÅÔºàÊâÄÊúâÁöÑËÆ¢ÈòÖÊµÅÈÉΩ‰ºöÈÄöËøáËøô‰∏™ÂõûË∞ÉÊî∂Âà∞Ôºâ\r\n      // WebRTCView.vue - createDownPeerConnection ÂÜÖÈÉ® (‰øÆÊ≠£)\r\n      this.downPC.ontrack = e => {\r\n        // 1. Ëé∑Âèñ MediaStreamÔºåËøôÊòØËøúÁ´ØËßÜÈ¢ëÂíåÈü≥È¢ëÁöÑÂÆπÂô®\r\n        const remoteStream = e.streams[0];\r\n\r\n        // 2. ‰ΩøÁî® Stream ID (ÂÆÉÂ∫îËØ•Âú®ÂçèÂïÜ‰∏≠Ë¢´ÂîØ‰∏ÄÁ°ÆÂÆö) ‰Ωú‰∏∫ÈîÆ\r\n        const pubId = remoteStream.id;\r\n\r\n        console.log('üéØ Êî∂Âà∞ËøúÁ´ØÊµÅ (DownPC), Stream ID:', pubId, 'Track Kind:', e.track.kind);\r\n\r\n        // 3. Â∞Ü Stream Â≠òÂÖ• Map (Â¶ÇÊûú Stream Â∑≤ÁªèÂ≠òÂú®ÔºåMap.set ‰ºöÊõ¥Êñ∞ÂÆÉ)\r\n        if (!this.downStreams.has(pubId)) {\r\n          // Â¶ÇÊûúÊòØÊñ∞ÁöÑ StreamÔºåÊàë‰ª¨‰ΩøÁî® remoteStream.id ‰Ωú‰∏∫ key\r\n          this.downStreams.set(pubId, remoteStream);\r\n        }\r\n        // Ê≥®ÊÑèÔºöÂ¶ÇÊûú Stream Â∑≤Â≠òÂú®Ôºåontrack ÂèØËÉΩÊòØ‰∏∫‰∫ÜÊ∑ªÂä†Âè¶‰∏Ä‰∏™ Track (‰æãÂ¶ÇÔºåÂÖàÊî∂ËßÜÈ¢ëÔºåÂêéÊî∂Èü≥È¢ë)\r\n        // Vue ÁöÑ Map ÂèòÊõ¥Ê£ÄÊµãÂèØËÉΩ‰ºöÊúâÈóÆÈ¢òÔºåÊúÄÂ•Ω‰ΩøÁî® Vue.set ÊàñÂº∫Âà∂Êõ¥Êñ∞„ÄÇ\r\n\r\n        // 4. Á°Æ‰øù Vue Ê∏≤ÊüìÂô®Êõ¥Êñ∞Âπ∂ÊåáÂêëÊ≠£Á°ÆÁöÑÊµÅ\r\n        this.$nextTick(() => {\r\n          // Êü•ÊâæÊàñÂàõÂª∫ÂØπÂ∫îËßÜÈ¢ëÂÖÉÁ¥†\r\n          const videoEl = this.$refs[`remoteVideo-${pubId}`];\r\n          if (videoEl && videoEl[0] && videoEl[0].srcObject !== remoteStream) {\r\n            videoEl[0].srcObject = remoteStream;\r\n            console.log(`‚úÖ ËßÜÈ¢ëÂÖÉÁ¥†ÁªëÂÆöÊàêÂäü: ${pubId}`);\r\n          }\r\n        });\r\n      };\r\n\r\n      // 2. ICE candidate ÁîüÊàêÊó∂ÂèëÈÄÅÁªô SFU (down_candidate)\r\n      this.downPC.onicecandidate = e => {\r\n        if (e.candidate) {\r\n          // ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"down_candidate\"\r\n          this.sendSignal('down_candidate', { candidate: e.candidate.toJSON() })\r\n        }\r\n      }\r\n\r\n      // 3. ÁõëÂê¨ËøûÊé•Áä∂ÊÄÅ\r\n      this.downPC.onconnectionstatechange = () => {\r\n        console.log(`‚¨áÔ∏è DownPC Áä∂ÊÄÅ: ${this.downPC.connectionState}`)\r\n      }\r\n    },\r\n\r\n    async handleDownOffer(payload) {\r\n      this.createDownPeerConnection()\r\n\r\n      // 1. ËÆæÁΩÆ SFU ÂèëÊù•ÁöÑ Offer ‰∏∫ËøúÁ´ØÊèèËø∞\r\n      await this.downPC.setRemoteDescription(new RTCSessionDescription({\r\n        type: 'offer',\r\n        sdp: payload.sdp\r\n      }))\r\n\r\n      // 2. ÂàõÂª∫ Answer\r\n      const answer = await this.downPC.createAnswer()\r\n      await this.downPC.setLocalDescription(answer)\r\n\r\n      console.log('‚û°Ô∏è ÂèëÈÄÅ down_answer (Local SDP):', answer.sdp)\r\n\r\n      // 3. ÂèëÈÄÅ down_answer Áªô SFU (ÂØπÂ∫îÂêéÁ´Ø Go ‰∏≠ÁöÑ case \"down_answer\")\r\n      // Ê≥®ÊÑèÔºöGo ÂêéÁ´ØÊ≤°Êúâ‰ΩøÁî® From Â≠óÊÆµÔºåÂè™ÈúÄË¶Å SDP\r\n      this.sendSignal('down_answer', { sdp: answer.sdp })\r\n\r\n      // Êõ¥Êñ∞ UI ÂàóË°®ÔºåÊ†áËÆ∞ËØ•ÂèëÂ∏ÉËÄÖÊ≠£Âú®Ë¢´ËÆ¢ÈòÖ\r\n      this.$set(this.onlinePublishers, payload.from, 'Ê≠£Âú®ËÆ¢ÈòÖ');\r\n    },\r\n\r\n    /* ================= ‰ø°‰ª§Â§ÑÁêÜ‰∏≠ÂøÉ ================= */\r\n    async handleSignal(msg) {\r\n      const event = msg.event\r\n      let dataPayload = null;\r\n\r\n      try {\r\n        // Go ÊúçÂä°Âô®‰ΩøÁî® json.RawMessageÔºåÂâçÁ´ØÈúÄË¶ÅÂÜçÊ¨°Ëß£Êûê data Â≠óÊÆµ\r\n        if (msg.data) {\r\n          // Á°Æ‰øù data ÊòØÂ≠óÁ¨¶‰∏≤ÊâçËÉΩËß£Êûê\r\n          dataPayload = (typeof msg.data === 'string') ? JSON.parse(msg.data) : msg.data;\r\n        }\r\n\r\n        switch (event) {\r\n          case 'up_answer':\r\n            if (!this.upPC) { console.error(\"UpPC‰∏çÂ≠òÂú®\"); return; }\r\n            await this.upPC.setRemoteDescription(new RTCSessionDescription({\r\n              type: 'answer',\r\n              sdp: dataPayload.sdp\r\n            }))\r\n            console.log('‚úÖ UpPC ËøûÊé•ÊàêÂäüÔºÅ');\r\n            break\r\n\r\n          case 'down_offer':\r\n            // SFU ÂèëÊù•Êñ∞ÁöÑ Offer (ÂèØËÉΩÂåÖÂê´Êñ∞ÁöÑ Track)\r\n            await this.handleDownOffer(dataPayload)\r\n            break\r\n\r\n          case 'up_candidate':\r\n          case 'down_candidate':\r\n            // Candidate ÁöÑ JSON ÁªìÊûÑ‰∏é RTCIceCandidateInit ÂÖºÂÆπ\r\n            if (dataPayload && dataPayload.candidate) {\r\n              const candidate = new RTCIceCandidate(dataPayload.candidate);\r\n\r\n              let targetPC = null;\r\n              if (event === 'up_candidate') {\r\n                targetPC = this.upPC;\r\n              } else if (event === 'down_candidate') {\r\n                targetPC = this.downPC;\r\n              }\r\n\r\n              if (targetPC && targetPC.remoteDescription) {\r\n                await targetPC.addIceCandidate(candidate)\r\n                console.log(`‚úÖ ${event} Candidate Ê∑ªÂä†ÊàêÂäü`);\r\n              } else if (targetPC) {\r\n                // ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÈúÄË¶ÅÁºìÂÜ≤ candidate Áõ¥Âà∞ setRemoteDescription ÂÆåÊàê\r\n                console.warn(`‚ö†Ô∏è ÁºìÂÜ≤ ${event} Candidate`);\r\n              }\r\n            }\r\n            break\r\n\r\n          case 'user_join':\r\n          case 'user_leave':\r\n            // Â§ÑÁêÜÁî®Êà∑Âä†ÂÖ•/Á¶ªÂºÄÊàøÈó¥ÁöÑÈÄöÁü•\r\n            this.handleUserStatusUpdate(event, dataPayload);\r\n            break;\r\n\r\n          default:\r\n            console.warn('Êú™Áü• SFU ‰ø°‰ª§‰∫ã‰ª∂:', event)\r\n        }\r\n      } catch (e) {\r\n        console.error(`Â§ÑÁêÜ ${event} Ê∂àÊÅØÂ§±Ë¥•:`, e);\r\n      }\r\n    },\r\n\r\n    handleUserStatusUpdate(event, payload) {\r\n      // ÂÅáËÆæ SFU ÊúçÂä°Âô®ÂèëÈÄÅ‰∫Ü roomID Âíå userID ÁöÑÂàóË°®\r\n      // ÂÆûÈôÖÊÉÖÂÜµÔºöSFU Âè™‰ºöÈÄöÁü•Âì™‰∏™Áî®Êà∑ÂºÄÂßãÂèëÂ∏É (publish) ÊàñÂÅúÊ≠¢ÂèëÂ∏É (unpublish)\r\n\r\n      // ÁÆÄÂåñÔºöËøôÈáå‰ªÖÊºîÁ§∫Êõ¥Êñ∞Âú®Á∫øÂàóË°®\r\n      if (event === 'user_join') {\r\n        this.$set(this.onlinePublishers, payload.uid, 'Âú®Á∫ø/Êú™ÂèëÂ∏É');\r\n      } else if (event === 'user_leave') {\r\n        this.$delete(this.onlinePublishers, payload.uid);\r\n        // ÂêåÊó∂ÈúÄË¶ÅÊ∏ÖÁêÜ DownPC ÂØπÂ∫îÁöÑÊµÅ\r\n        this.downStreams.forEach((stream, pubId) => {\r\n          if (pubId === payload.uid) {\r\n            this.downStreams.delete(pubId);\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /* ================= ÊåÇÊñ≠/Ê∏ÖÁêÜ ================= */\r\n    hangup() {\r\n      // ÂèëÈÄÅ unpublish ‰ø°‰ª§Áªô SFUÔºåËÆ©ÊúçÂä°Âô®Ê∏ÖÁêÜ UpPC ËµÑÊ∫ê\r\n      if (this.isPublisher) {\r\n        this.sendSignal('unpublish', { uid: this.userId });\r\n      }\r\n\r\n      // ÂÖ≥Èó≠ PeerConnections\r\n      if (this.upPC) {\r\n        this.upPC.close();\r\n        this.upPC = null;\r\n      }\r\n      if (this.downPC) {\r\n        this.downPC.close();\r\n        this.downPC = null;\r\n      }\r\n\r\n      // ÂÅúÊ≠¢Êú¨Âú∞ÊµÅ\r\n      if (this.localStream) {\r\n        this.localStream.getTracks().forEach(t => t.stop());\r\n        this.localStream = null;\r\n      }\r\n\r\n      // Ê∏ÖÁêÜ UI Áä∂ÊÄÅ\r\n      this.$refs.localVideo.srcObject = null;\r\n      this.downStreams = new Map();\r\n      this.isPublisher = false;\r\n      this.$delete(this.onlinePublishers, this.userId); // Ê∏ÖÁêÜËá™Â∑±ÂèëÂ∏ÉÁöÑËÆ∞ÂΩï\r\n      console.log('‚òéÔ∏è Â∑≤ÊåÇÊñ≠');\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.hangup();\r\n    if (this.ws) {\r\n      this.ws.close();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Ê†∑Âºè‰øùÊåÅ‰∏çÂèò */\r\n.webrtc-container {\r\n  padding: 20px;\r\n}\r\n\r\n.video-box {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.video-item h3 {\r\n  font-size: 16px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\nvideo {\r\n  width: 320px;\r\n  height: 240px;\r\n  background: #222;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.online-users-box {\r\n  margin-top: 30px;\r\n  padding: 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n}\r\n\r\n.online-users-box ul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.online-users-box li {\r\n  padding: 8px 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px dashed #f0f0f0;\r\n}\r\n\r\n.online-users-box li:hover {\r\n  background-color: #f9f9f9;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}