{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.reduce.js\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _default = exports.default = {\n  name: 'ChatView',\n  data() {\n    return {\n      sidebarCollapsed: false,\n      // ‰æßËæπÊ†èÊòØÂê¶ÊäòÂè†\n      isMobile: false,\n      // ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\n      search: '',\n      // ÊêúÁ¥¢Ê°ÜÂÜÖÂÆπ\n      activeMenu: 'message',\n      // ÂΩìÂâçÊøÄÊ¥ªÁöÑËèúÂçïÈ°π\n      contacts: [{\n        contactId: '111',\n        contact_name: 'Ê∏ÖÈ£éÂæêÂæê',\n        contact_avatar: 'https://q3.itc.cn/images01/20240824/945fc6b9550c4de8853e22848b619f50.jpeg',\n        contact_status: 'online',\n        last_contact_time: '14:32',\n        lastMessage: 'Â•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫ÜÔºåÊòéÂ§©ËßÅÔºÅ',\n        lastMessageType: 'text',\n        unread_count: 0\n      }, {\n        contactId: '222',\n        contact_name: 'Ê≤âÈáçÁöÑÁà±',\n        contact_avatar: 'https://mjzjcdn.heycross.com/240601/u/ddwo6zwjgu80/b59855eb-9b0c-4291-9be2-56237c23b85f.jpg',\n        contact_status: 'online',\n        last_contact_time: 'Êò®Â§©',\n        lastMessage: 'È°πÁõÆÊñπÊ°àÂ∑≤ÁªèÂèëÈÄÅÂà∞ÊÇ®ÈÇÆÁÆ±ÔºåËØ∑Êü•Êî∂',\n        lastMessageType: 'text',\n        unread_count: 3\n      }, {\n        contactId: '333',\n        contact_name: 'ÁéãÁªèÁêÜ',\n        contact_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/8666b7c384360229440b4d45b6ed8cbc.png',\n        contact_status: 'offline',\n        last_contact_time: 'Âë®‰∏Ä',\n        lastMessage: 'Â≠£Â∫¶Êä•Âëä.pdf',\n        lastMessageType: 'file',\n        unread_count: 0\n      }, {\n        contactId: '444',\n        contact_name: 'ÊäÄÊúØÊîØÊåÅ',\n        contact_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/dfdd661625852bbf34fded8ae159a1cd.png',\n        contact_status: 'online',\n        last_contact_time: '‰∏äÂë®',\n        lastMessage: 'ÈóÆÈ¢òÂ∑≤Áªè‰øÆÂ§çÔºåËØ∑ÊµãËØïÁ°ÆËÆ§',\n        lastMessageType: 'text',\n        unread_count: 0\n      }],\n      // ËÅîÁ≥ª‰∫∫ÂàóË°®\n      groups: [{\n        group_id: '5',\n        group_name: '‰∫ßÂìÅÂºÄÂèëÁªÑ',\n        group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/15bd703716eb575eb049d376ef18625e.png',\n        last_message_time: '10:25',\n        last_message_author: 'ËµµÂ∑•Á®ãÂ∏à',\n        last_message: 'ÂêéÁ´ØAPIÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü'\n      }, {\n        group_id: '6',\n        group_name: 'Â∏ÇÂú∫ÈÉ®',\n        group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/2f7e3cc5e3e5a3d0e681096b58281846.png',\n        last_message_time: 'Âë®‰∫î',\n        last_message_author: 'ÊùéËê•ÈîÄ',\n        last_message: 'Êñ∞Ê¥ªÂä®ÊñπÊ°àÂ∑≤Êõ¥Êñ∞'\n      }],\n      // Áæ§ÁªÑÂàóË°®\n      currentContactId: \"111\",\n      // ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\n      inputMessage: '',\n      //ËæìÂÖ•Ê°Ü‰ø°ÊÅØ\n      isTyping: false //ÊòØÂê¶Ê≠£Âú®ËæìÂÖ•\n    };\n  },\n  computed: {\n    //Êü•ËØ¢Áî®Êà∑ÂàóË°®\n    users() {\n      return this.$store.getters['message/getUserList'];\n    },\n    // ÂΩìÂâçÁôªÂΩïÁî®Êà∑‰ø°ÊÅØ\n    userInfo() {\n      return this.$store.state.user.userInfo || {};\n    },\n    /**\r\n    * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâËÅîÁ≥ª‰∫∫\r\n    */\n    filteredContacts() {\n      if (!this.search) return this.contacts;\n      return this.contacts.filter(c => c.contact_name.includes(this.search) || c.lastMessage.includes(this.search));\n    },\n    /**\r\n    * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâÁæ§ÁªÑ\r\n    */\n    filteredGroups() {\n      if (!this.search) return this.groups;\n      return this.groups.filter(g => g.group_name.includes(this.search) || g.last_message.includes(this.search));\n    },\n    /**\r\n     * ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂØπË±°\r\n     */\n    currentContact() {\n      return this.contacts.find(c => c.contactId === this.currentContactId) || this.groups.find(g => g.group_id === this.currentContactId) || {};\n    },\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂêçÁß∞\r\n     */\n    currentContactName() {\n      return this.currentContact.contact_name || this.currentContact.group_name || '';\n    },\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂ§¥ÂÉè\r\n     */\n    currentContactAvatar() {\n      return this.currentContact.contact_avatar || this.currentContact.group_avatar || '';\n    },\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\r\n     */\n    currentContactStatus() {\n      return this.currentContact.contact_status || 'online';\n    },\n    /**\r\n     * ÊâÄÊúâËÅîÁ≥ª‰∫∫Êú™ËØªÊ∂àÊÅØÊÄªÊï∞\r\n     */\n    unreadTotal() {\n      return this.contacts.reduce((sum, c) => sum + (c.unread_count || 0), 0);\n    },\n    // ‰ªéVuex Store ‰∏≠Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØ\n    messages() {\n      console.log('this.currentContactId===' + this.currentContactId);\n      console.log(\"Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØÔºö\", this.$store.getters['message/getMessages'](this.currentContactId));\n      return this.$store.getters['message/getMessages'](this.currentContactId);\n    }\n  },\n  methods: {\n    /**\r\n     * ÂàáÊç¢‰æßËæπÊ†èÊäòÂè†Áä∂ÊÄÅ\r\n     */\n    toggleSidebar() {\n      this.sidebarCollapsed = !this.sidebarCollapsed;\n    },\n    /**\r\n      * ÊòæÁ§∫‰æßËæπÊ†èÔºàÁßªÂä®Á´ØÔºâ\r\n      */\n    showSidebar() {\n      this.sidebarCollapsed = false;\n    },\n    /**\r\n      * ËèúÂçïÈÄâÊã©‰∫ã‰ª∂Â§ÑÁêÜ\r\n      * @param {string} index ÈÄâ‰∏≠ÁöÑËèúÂçïÈ°πÁ¥¢Âºï\r\n      */\n    handleMenuSelect(index) {\n      this.activeMenu = index;\n    },\n    /**\r\n      * ÈÄâÊã©ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑ\r\n      * @param {string} id ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n      */\n    selectContact(id) {\n      this.currentContactId = id;\n      // TODO: Âä†ËΩΩÂØπÂ∫îËÅäÂ§©ËÆ∞ÂΩï\n    },\n    /**\r\n     * Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\r\n     * @param {string} time Êó∂Èó¥Â≠óÁ¨¶‰∏≤\r\n     * @returns {string}\r\n     */\n    formatTime(time) {\n      if (!time) return '';\n      const m = (0, _moment.default)(time);\n      if (!m.isValid()) return ''; // Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\n\n      return m.format('YYYY-MM-DD HH:mm:ss'); // ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\n    },\n    /**\r\n      * ËæìÂÖ•Ê°ÜÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜÔºàÂõûËΩ¶ÂèëÈÄÅÊ∂àÊÅØÔºâ\r\n      * @param {KeyboardEvent} e\r\n      */\n    handleInputKeydown(e) {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        this.sendMessage();\n      }\n    },\n    /**\r\n     * ÂèëÈÄÅÊ∂àÊÅØ\r\n     */\n    sendMessage() {\n      if (!this.inputMessage.trim()) return;\n      console.log('[Chat] üí¨ ÂèëÈÄÅÊ∂àÊÅØ:', this.inputMessage);\n      const content = this.inputMessage.trim();\n      const receiverId = this.currentContactId;\n      const senderId = this.userInfo.userId;\n      const messagePayload = {\n        messageId: 'client-' + Date.now(),\n        // ‰∏¥Êó∂ IDÔºåÂêéÁª≠ÂèØÊúçÂä°Á´ØÂõûÂ°´\n        senderId: senderId,\n        //ÂèëÈÄÅÁî®Êà∑ÔºöÂÖàÂÜôÊ≠ª\n        reciverId: receiverId,\n        content,\n        targetType: 'user',\n        messageType: 'ÊñáÊú¨',\n        sendTime: new Date().toISOString(),\n        readStatus: 'sent'\n      };\n      this.$ws.send({\n        cmd: 100001,\n        data: {\n          messageId: 'client-' + Date.now(),\n          senderId: senderId,\n          reciverId: receiverId,\n          content: content,\n          targetType: 'user',\n          messageType: 'ÊñáÊú¨',\n          sendTime: new Date().toISOString(),\n          readStatus: 'sent'\n        }\n      });\n\n      // 2Ô∏è‚É£ ÂêåÊ≠•ÂÜôÂÖ• Vuex Ê∂àÊÅØÊ®°ÂùóÔºàÊ≥®ÊÑèÂ∞ÅË£ÖÊÄßÔºâ\n      // ÂêëÊüê‰∏™‰ºöËØùËøΩÂä†‰∏ÄÊù°Ê∂àÊÅØ\n      this.$store.commit('message/ADD_MESSAGE', {\n        contactId: receiverId,\n        message: messagePayload\n      });\n\n      // ‚úÖ ÈáçÁΩÆÊåáÂÆö‰ºöËØùÊú™ËØªÊ∂àÊÅØÊï∞‰∏∫ 0ÔºàÂ∑≤ËØªÔºâ\n      this.$store.commit('message/RESET_UNREAD', receiverId);\n      console.log('Áî®Êà∑ „Äê111„ÄëÊ∂àÊÅØ‰∏∫Ôºö===');\n      console.log(this.$store.getters['message/getMessages'](\"111\"));\n      console.log('Áî®Êà∑ „Äê222„ÄëÊ∂àÊÅØ‰∏∫Ôºö===');\n      console.log(this.$store.getters['message/getMessages'](\"222\"));\n\n      //ÊÉÖÂÜµËæìÂÖ•Ê°ÜÂπ∂ÊªöÂä®Âà∞Â∫ïÈÉ®\n      this.inputMessage = '';\n      // ÊªöÂä®Âà∞Â∫ïÈÉ®\n      this.$nextTick(() => {\n        if (this.$refs.chatBody) {\n          this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\n        }\n      });\n    },\n    /**\r\n     * ÈÄÄÂá∫ÁôªÂΩï\r\n     */\n    logout() {\n      // TODO: ÈÄÄÂá∫ÁôªÂΩïÈÄªËæë\n      this.$message.success('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');\n    },\n    /**\r\n    * Ê†πÊçÆÁ™óÂè£Â§ßÂ∞èÂà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n    */\n    handleResize() {\n      this.isMobile = true;\n      if (this.isMobile) {\n        this.sidebarCollapsed = true;\n      } else {\n        this.sidebarCollapsed = false;\n      }\n    }\n  },\n  mounted() {\n    /** Êü•ËØ¢Áî®Êà∑ÂàóË°® */\n    this.$ws.send({\n      cmd: 100003,\n      data: {}\n    });\n    // ÂàùÂßãÂåñÊó∂Âà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´ØÔºåÂπ∂ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ\n    this.handleResize();\n    window.addEventListener('resize', this.handleResize);\n    // ËÅäÂ§©Âå∫ÂüüÊªöÂä®Âà∞Â∫ïÈÉ®\n    this.$nextTick(() => {\n      if (this.$refs.chatBody) {\n        this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\n      }\n    });\n  },\n  beforeDestroy() {\n    // ÁßªÈô§Á™óÂè£Â§ßÂ∞èÂèòÂåñÁõëÂê¨\n    window.removeEventListener('resize', this.handleResize);\n  }\n};","map":{"version":3,"names":["_moment","_interopRequireDefault","require","_default","exports","default","name","data","sidebarCollapsed","isMobile","search","activeMenu","contacts","contactId","contact_name","contact_avatar","contact_status","last_contact_time","lastMessage","lastMessageType","unread_count","groups","group_id","group_name","group_avatar","last_message_time","last_message_author","last_message","currentContactId","inputMessage","isTyping","computed","users","$store","getters","userInfo","state","user","filteredContacts","filter","c","includes","filteredGroups","g","currentContact","find","currentContactName","currentContactAvatar","currentContactStatus","unreadTotal","reduce","sum","messages","console","log","methods","toggleSidebar","showSidebar","handleMenuSelect","index","selectContact","id","formatTime","time","m","moment","isValid","format","handleInputKeydown","e","key","shiftKey","preventDefault","sendMessage","trim","content","receiverId","senderId","userId","messagePayload","messageId","Date","now","reciverId","targetType","messageType","sendTime","toISOString","readStatus","$ws","send","cmd","commit","message","$nextTick","$refs","chatBody","scrollTop","scrollHeight","logout","$message","success","handleResize","mounted","window","addEventListener","beforeDestroy","removeEventListener"],"sources":["src/views/ChatView.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-app\">\r\n    <!-- ‰æßËæπÂØºËà™Ê†è -->\r\n    <aside :class=\"['sidebar', { 'sidebar-collapsed': sidebarCollapsed }]\" ref=\"sidebar\">\r\n      <!-- Â∫îÁî®Ê†áÈ¢ò -->\r\n      <div class=\"sidebar-title-bar\">\r\n        <span class=\"sidebar-title\">\r\n          <i class=\"el-icon-message\" style=\"margin-right: 5px;\"></i>\r\n          Á´ôÂÜÖ‰ø°\r\n        </span>\r\n        <el-button icon=\"el-icon-arrow-left\" @click=\"toggleSidebar\" circle class=\"sidebar-toggle-btn\"\r\n          v-show=\"isMobile\" />\r\n      </div>\r\n      <!-- ÊêúÁ¥¢Ê°Ü -->\r\n      <div class=\"sidebar-search\">\r\n        <el-input v-model=\"search\" placeholder=\"ÊêúÁ¥¢ÂØπËØù...\" size=\"small\" clearable />\r\n      </div>\r\n      <!-- ÂØºËà™ËèúÂçï -->\r\n      <el-menu :default-active=\"activeMenu\" class=\"sidebar-menu\" :collapse=\"sidebarCollapsed\"\r\n        @select=\"handleMenuSelect\">\r\n        <el-menu-item index=\"message\">\r\n          <i class=\"el-icon-message\"></i>\r\n          <span slot=\"title\">Ê∂àÊÅØ</span>\r\n          <el-badge :value=\"unreadTotal\" class=\"menu-badge\" v-if=\"unreadTotal > 0\" />\r\n        </el-menu-item>\r\n        <el-menu-item index=\"group\">\r\n          <i class=\"el-icon-user-solid\"></i>\r\n          <span slot=\"title\">Áæ§ÁªÑ</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"setting\">\r\n          <i class=\"el-icon-setting\"></i>\r\n          <span slot=\"title\">ËÆæÁΩÆ</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n      <!-- ËÅîÁ≥ª‰∫∫ÂàóË°® -->\r\n      <div class=\"sidebar-list\">\r\n        <div class=\"sidebar-list-title\">ÊúÄËøëËÅîÁ≥ª‰∫∫</div>\r\n        <div class=\"sidebar-list-scroll\">\r\n          <div v-for=\"contact in filteredContacts\" :key=\"contact.contactId\"\r\n            :class=\"['contact-item', { active: contact.contactId === currentContactId }]\"\r\n            @click=\"selectContact(contact.contactId)\">\r\n            <div class=\"avatar-wrap\">\r\n              <img :src=\"contact.contact_avatar\" class=\"avatar\" />\r\n              <span class=\"status-dot\" :class=\"contact.contact_status === 'online' ? 'online' : 'offline'\"></span>\r\n            </div>\r\n            <div class=\"contact-info\">\r\n              <div class=\"contact-top\">\r\n                <span class=\"contact-name\">{{ contact.contact_name }}\r\n                </span>\r\n                <span class=\"contact-time\">{{ contact.last_contact_time }}</span>\r\n              </div>\r\n              <div class=\"contact-bottom\">\r\n                <span v-if=\"contact.lastMessageType === 'file'\">\r\n                  <i class=\"el-icon-document\"></i>\r\n                  {{ contact.lastMessage }}\r\n                </span>\r\n                <span v-else>{{ contact.lastMessage }}</span>\r\n              </div>\r\n            </div>\r\n            <el-badge :value=\"contact.unread_count\" class=\"contact-badge\" v-if=\"contact.unread_count > 0\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"sidebar-list-title\">Áæ§ÁªÑ</div>\r\n        <div class=\"sidebar-list-scroll\">\r\n          <div v-for=\"group in filteredGroups\" :key=\"group.group_id\"\r\n            :class=\"['contact-item', { active: group.group_id === currentContactId }]\"\r\n            @click=\"selectContact(group.group_id)\">\r\n            <div class=\"avatar-wrap\">\r\n              <img :src=\"group.group_avatar\" class=\"avatar\" />\r\n            </div>\r\n            <div class=\"contact-info\">\r\n              <div class=\"contact-top\">\r\n                <span class=\"contact-name\">{{ group.group_name }}</span>\r\n                <span class=\"contact-time\">{{ group.last_message_time }}</span>\r\n              </div>\r\n              <div class=\"contact-bottom\">\r\n                <span>\r\n                  <span class=\"contact-group-author\">{{ group.last_message_author }}: </span>\r\n                  {{ group.last_message }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Áî®Êà∑‰ø°ÊÅØ -->\r\n      <div class=\"sidebar-account\">\r\n        <img :src=\"userInfo.avatarUrl\" class=\"avatar\" />\r\n        <div class=\"account-info\">\r\n          <div class=\"account-name\">{{ userInfo.userName }}</div>\r\n          <div class=\"account-status\">\r\n            <span class=\"status-dot online\"></span>\r\n            Âú®Á∫ø\r\n          </div>\r\n        </div>\r\n        <el-button icon=\"el-icon-switch-button\" type=\"text\" @click=\"logout\"></el-button>\r\n      </div>\r\n    </aside>\r\n    <!-- ‰∏ªËÅäÂ§©Âå∫Âüü -->\r\n    <main class=\"chat-main\">\r\n      <!-- È°∂ÈÉ®ËÅäÂ§©‰ø°ÊÅØÊ†è -->\r\n      <header class=\"chat-header\">\r\n        <div class=\"chat-header-left\">\r\n          <el-button icon=\"el-icon-menu\" @click=\"showSidebar\" circle class=\"sidebar-show-btn\" v-show=\"isMobile\" />\r\n          <div class=\"avatar-wrap\">\r\n            <img :src=\"currentContactAvatar\" class=\"avatar\" />\r\n            <span class=\"status-dot\" :class=\"currentContactStatus === 'online' ? 'online' : 'offline'\"></span>\r\n          </div>\r\n          <div>\r\n            <div class=\"chat-header-name\">{{ currentContactName }}</div>\r\n            <div class=\"chat-header-status\">\r\n              <span class=\"status-dot online\"></span>\r\n              Âú®Á∫ø {{ currentContactId }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"chat-header-actions\">\r\n          <el-button icon=\"el-icon-search\" circle />\r\n          <el-button icon=\"el-icon-phone\" circle />\r\n          <el-button icon=\"el-icon-video-camera\" circle />\r\n          <el-button icon=\"el-icon-more\" circle />\r\n        </div>\r\n      </header>\r\n      <!-- ËÅäÂ§©Ê∂àÊÅØÂå∫Âüü -->\r\n      <div class=\"chat-body\" ref=\"chatBody\">\r\n        <div class=\"chat-date-divider\">\r\n          ‰ªäÂ§© 14:25\r\n        </div>\r\n        <div v-for=\"msg in messages\" :key=\"msg.messageId\"\r\n          :class=\"['chat-message', msg.senderId === userInfo.userId ? 'self' : 'other']\">\r\n          <img v-if=\"msg.senderId !== userInfo.userId\" :src=\"currentContactAvatar\" class=\"avatar msg-avatar\" />\r\n          <div class=\"msg-content-wrap\">\r\n            <div class=\"msg-meta\" v-if=\"msg.senderId !== userInfo.userId\">\r\n              <span class=\"msg-name\">{{ currentContactName }}</span>\r\n              <span class=\"msg-time\">{{ formatTime(msg.sendTime) }}</span>\r\n            </div>\r\n            <div v-if=\"msg.messageType === 'ÊñáÊú¨'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <span class=\"msg-text\">{{ msg.content }}</span>\r\n            </div>\r\n            <div v-else-if=\"msg.messageType === 'ÂõæÁâá'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <img :src=\"msg.attachment_url\" class=\"msg-img\" />\r\n              <div class=\"msg-file-meta\">\r\n                <span>{{ msg.attachment_name }}</span>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"msg.messageType === 'Êñá‰ª∂'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <i class=\"el-icon-document\"></i>\r\n              <span>{{ msg.attachment_name }}</span>\r\n            </div>\r\n            <div v-else-if=\"msg.messageType === 'ËØ≠Èü≥'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <i class=\"el-icon-microphone\"></i>\r\n              <span>ËØ≠Èü≥Ê∂àÊÅØ</span>\r\n            </div>\r\n            <div class=\"msg-meta-bottom\" v-if=\"msg.senderId === userInfo.userId\">\r\n              <span class=\"msg-time\">{{ formatTime(msg.sendTime) }}</span>\r\n              <i v-if=\"msg.readStatus === 'read'\" class=\"el-icon-check\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- ÂØπÊñπÊ≠£Âú®ËæìÂÖ• -->\r\n        <div v-if=\"isTyping\" class=\"chat-message other\">\r\n          <img :src=\"currentContactAvatar\" class=\"avatar msg-avatar\" />\r\n          <div class=\"msg-content-wrap\">\r\n            <div class=\"msg-bubble left\">\r\n              <span class=\"typing-dot\"></span>\r\n              <span class=\"typing-dot\"></span>\r\n              <span class=\"typing-dot\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Â∫ïÈÉ®ËæìÂÖ•Âå∫Âüü -->\r\n      <footer class=\"chat-footer\">\r\n        <div class=\"chat-footer-actions\">\r\n          <el-button circle>üòä</el-button>\r\n          <el-button circle>üîó</el-button>\r\n          <div style=\"flex:1\"></div>\r\n          <el-button icon=\"el-icon-more\" circle />\r\n        </div>\r\n        <div class=\"chat-footer-input\">\r\n          <el-input type=\"textarea\" v-model=\"inputMessage\" :autosize=\"{ minRows: 2, maxRows: 2, maxHeight: 100 }\"\r\n            placeholder=\"ËæìÂÖ•Ê∂àÊÅØ...\" ref=\"input\" @keydown.native=\"handleInputKeydown\" class=\"msg-input\" />\r\n          <el-button icon=\"el-icon-position\" type=\"primary\" circle @click=\"sendMessage\" class=\"send-btn\" />\r\n        </div>\r\n      </footer>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nexport default {\r\n  name: 'ChatView',\r\n  data() {\r\n    return {\r\n      sidebarCollapsed: false,  // ‰æßËæπÊ†èÊòØÂê¶ÊäòÂè†\r\n      isMobile: false,// ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n      search: '', // ÊêúÁ¥¢Ê°ÜÂÜÖÂÆπ\r\n      activeMenu: 'message',// ÂΩìÂâçÊøÄÊ¥ªÁöÑËèúÂçïÈ°π\r\n      contacts: [\r\n        {\r\n          contactId: '111',\r\n          contact_name: 'Ê∏ÖÈ£éÂæêÂæê',\r\n          contact_avatar: 'https://q3.itc.cn/images01/20240824/945fc6b9550c4de8853e22848b619f50.jpeg',\r\n          contact_status: 'online',\r\n          last_contact_time: '14:32',\r\n          lastMessage: 'Â•ΩÁöÑÔºåÊàëÊòéÁôΩ‰∫ÜÔºåÊòéÂ§©ËßÅÔºÅ',\r\n          lastMessageType: 'text',\r\n          unread_count: 0\r\n        },\r\n        {\r\n          contactId: '222',\r\n          contact_name: 'Ê≤âÈáçÁöÑÁà±',\r\n          contact_avatar: 'https://mjzjcdn.heycross.com/240601/u/ddwo6zwjgu80/b59855eb-9b0c-4291-9be2-56237c23b85f.jpg',\r\n          contact_status: 'online',\r\n          last_contact_time: 'Êò®Â§©',\r\n          lastMessage: 'È°πÁõÆÊñπÊ°àÂ∑≤ÁªèÂèëÈÄÅÂà∞ÊÇ®ÈÇÆÁÆ±ÔºåËØ∑Êü•Êî∂',\r\n          lastMessageType: 'text',\r\n          unread_count: 3\r\n        },\r\n        {\r\n          contactId: '333',\r\n          contact_name: 'ÁéãÁªèÁêÜ',\r\n          contact_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/8666b7c384360229440b4d45b6ed8cbc.png',\r\n          contact_status: 'offline',\r\n          last_contact_time: 'Âë®‰∏Ä',\r\n          lastMessage: 'Â≠£Â∫¶Êä•Âëä.pdf',\r\n          lastMessageType: 'file',\r\n          unread_count: 0\r\n        },\r\n        {\r\n          contactId: '444',\r\n          contact_name: 'ÊäÄÊúØÊîØÊåÅ',\r\n          contact_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/dfdd661625852bbf34fded8ae159a1cd.png',\r\n          contact_status: 'online',\r\n          last_contact_time: '‰∏äÂë®',\r\n          lastMessage: 'ÈóÆÈ¢òÂ∑≤Áªè‰øÆÂ§çÔºåËØ∑ÊµãËØïÁ°ÆËÆ§',\r\n          lastMessageType: 'text',\r\n          unread_count: 0\r\n        }\r\n      ], // ËÅîÁ≥ª‰∫∫ÂàóË°®\r\n      groups: [\r\n        {\r\n          group_id: '5',\r\n          group_name: '‰∫ßÂìÅÂºÄÂèëÁªÑ',\r\n          group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/15bd703716eb575eb049d376ef18625e.png',\r\n          last_message_time: '10:25',\r\n          last_message_author: 'ËµµÂ∑•Á®ãÂ∏à',\r\n          last_message: 'ÂêéÁ´ØAPIÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü'\r\n        },\r\n        {\r\n          group_id: '6',\r\n          group_name: 'Â∏ÇÂú∫ÈÉ®',\r\n          group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/2f7e3cc5e3e5a3d0e681096b58281846.png',\r\n          last_message_time: 'Âë®‰∫î',\r\n          last_message_author: 'ÊùéËê•ÈîÄ',\r\n          last_message: 'Êñ∞Ê¥ªÂä®ÊñπÊ°àÂ∑≤Êõ¥Êñ∞'\r\n        }\r\n      ],// Áæ§ÁªÑÂàóË°®\r\n      currentContactId: \"111\", // ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n      inputMessage: '',//ËæìÂÖ•Ê°Ü‰ø°ÊÅØ\r\n      isTyping: false//ÊòØÂê¶Ê≠£Âú®ËæìÂÖ•\r\n    };\r\n  },\r\n  computed: {\r\n    //Êü•ËØ¢Áî®Êà∑ÂàóË°®\r\n    users() {\r\n      return this.$store.getters['message/getUserList'];\r\n    },\r\n    // ÂΩìÂâçÁôªÂΩïÁî®Êà∑‰ø°ÊÅØ\r\n    userInfo() {\r\n      return this.$store.state.user.userInfo || {}\r\n    },\r\n    /**\r\n   * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâËÅîÁ≥ª‰∫∫\r\n   */\r\n    filteredContacts() {\r\n      if (!this.search) return this.contacts;\r\n      return this.contacts.filter(c => c.contact_name.includes(this.search) || c.lastMessage.includes(this.search));\r\n    },\r\n    /**\r\n   * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâÁæ§ÁªÑ\r\n   */\r\n    filteredGroups() {\r\n      if (!this.search) return this.groups;\r\n      return this.groups.filter(g => g.group_name.includes(this.search) || g.last_message.includes(this.search));\r\n    },\r\n    /**\r\n     * ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂØπË±°\r\n     */\r\n    currentContact() {\r\n      return (\r\n        this.contacts.find(c => c.contactId === this.currentContactId) ||\r\n        this.groups.find(g => g.group_id === this.currentContactId) ||\r\n        {}\r\n      );\r\n    },\r\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂêçÁß∞\r\n     */\r\n    currentContactName() {\r\n      return this.currentContact.contact_name || this.currentContact.group_name || '';\r\n    },\r\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂ§¥ÂÉè\r\n     */\r\n    currentContactAvatar() {\r\n      return this.currentContact.contact_avatar || this.currentContact.group_avatar || '';\r\n    },\r\n    /**\r\n     * ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\r\n     */\r\n    currentContactStatus() {\r\n      return this.currentContact.contact_status || 'online';\r\n    },\r\n    /**\r\n     * ÊâÄÊúâËÅîÁ≥ª‰∫∫Êú™ËØªÊ∂àÊÅØÊÄªÊï∞\r\n     */\r\n    unreadTotal() {\r\n      return this.contacts.reduce((sum, c) => sum + (c.unread_count || 0), 0);\r\n    },\r\n    // ‰ªéVuex Store ‰∏≠Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØ\r\n    messages() {\r\n      console.log('this.currentContactId===' + this.currentContactId)\r\n      console.log(\"Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØÔºö\", this.$store.getters['message/getMessages'](this.currentContactId));\r\n      return this.$store.getters['message/getMessages'](this.currentContactId);\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * ÂàáÊç¢‰æßËæπÊ†èÊäòÂè†Áä∂ÊÄÅ\r\n     */\r\n    toggleSidebar() {\r\n      this.sidebarCollapsed = !this.sidebarCollapsed;\r\n    },\r\n    /**\r\n      * ÊòæÁ§∫‰æßËæπÊ†èÔºàÁßªÂä®Á´ØÔºâ\r\n      */\r\n    showSidebar() {\r\n      this.sidebarCollapsed = false;\r\n    },\r\n    /**\r\n      * ËèúÂçïÈÄâÊã©‰∫ã‰ª∂Â§ÑÁêÜ\r\n      * @param {string} index ÈÄâ‰∏≠ÁöÑËèúÂçïÈ°πÁ¥¢Âºï\r\n      */\r\n    handleMenuSelect(index) {\r\n      this.activeMenu = index;\r\n    },\r\n    /**\r\n      * ÈÄâÊã©ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑ\r\n      * @param {string} id ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n      */\r\n    selectContact(id) {\r\n      this.currentContactId = id;\r\n      // TODO: Âä†ËΩΩÂØπÂ∫îËÅäÂ§©ËÆ∞ÂΩï\r\n    },\r\n    /**\r\n     * Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\r\n     * @param {string} time Êó∂Èó¥Â≠óÁ¨¶‰∏≤\r\n     * @returns {string}\r\n     */\r\n    formatTime(time) {\r\n      if (!time) return '';\r\n\r\n      const m = moment(time);\r\n\r\n      if (!m.isValid()) return '';  // Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\r\n\r\n      return m.format('YYYY-MM-DD HH:mm:ss');  // ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\r\n    },\r\n    /**\r\n      * ËæìÂÖ•Ê°ÜÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜÔºàÂõûËΩ¶ÂèëÈÄÅÊ∂àÊÅØÔºâ\r\n      * @param {KeyboardEvent} e\r\n      */\r\n    handleInputKeydown(e) {\r\n      if (e.key === 'Enter' && !e.shiftKey) {\r\n        e.preventDefault();\r\n        this.sendMessage();\r\n      }\r\n    },\r\n    /**\r\n     * ÂèëÈÄÅÊ∂àÊÅØ\r\n     */\r\n    sendMessage() {\r\n      if (!this.inputMessage.trim()) return;\r\n\r\n      console.log('[Chat] üí¨ ÂèëÈÄÅÊ∂àÊÅØ:', this.inputMessage)\r\n\r\n      const content = this.inputMessage.trim();\r\n\r\n      const receiverId = this.currentContactId;\r\n\r\n      const senderId = this.userInfo.userId;\r\n\r\n      const messagePayload = {\r\n        messageId: 'client-' + Date.now(), // ‰∏¥Êó∂ IDÔºåÂêéÁª≠ÂèØÊúçÂä°Á´ØÂõûÂ°´\r\n        senderId: senderId,//ÂèëÈÄÅÁî®Êà∑ÔºöÂÖàÂÜôÊ≠ª\r\n        reciverId: receiverId,\r\n        content,\r\n        targetType: 'user',\r\n        messageType: 'ÊñáÊú¨',\r\n        sendTime: new Date().toISOString(),\r\n        readStatus: 'sent'\r\n      };\r\n\r\n      this.$ws.send(\r\n        {\r\n          cmd: 100001,\r\n          data: {\r\n            messageId: 'client-' + Date.now(),\r\n            senderId: senderId,\r\n            reciverId: receiverId,\r\n            content: content,\r\n            targetType: 'user',\r\n            messageType: 'ÊñáÊú¨',\r\n            sendTime: new Date().toISOString(),\r\n            readStatus: 'sent'\r\n          }\r\n        }\r\n      )\r\n\r\n      // 2Ô∏è‚É£ ÂêåÊ≠•ÂÜôÂÖ• Vuex Ê∂àÊÅØÊ®°ÂùóÔºàÊ≥®ÊÑèÂ∞ÅË£ÖÊÄßÔºâ\r\n      // ÂêëÊüê‰∏™‰ºöËØùËøΩÂä†‰∏ÄÊù°Ê∂àÊÅØ\r\n      this.$store.commit('message/ADD_MESSAGE', {\r\n        contactId: receiverId,\r\n        message: messagePayload\r\n      });\r\n\r\n      // ‚úÖ ÈáçÁΩÆÊåáÂÆö‰ºöËØùÊú™ËØªÊ∂àÊÅØÊï∞‰∏∫ 0ÔºàÂ∑≤ËØªÔºâ\r\n      this.$store.commit('message/RESET_UNREAD', receiverId);\r\n\r\n      console.log('Áî®Êà∑ „Äê111„ÄëÊ∂àÊÅØ‰∏∫Ôºö===')\r\n      console.log(this.$store.getters['message/getMessages'](\"111\"))\r\n\r\n      console.log('Áî®Êà∑ „Äê222„ÄëÊ∂àÊÅØ‰∏∫Ôºö===')\r\n      console.log(this.$store.getters['message/getMessages'](\"222\"))\r\n\r\n      //ÊÉÖÂÜµËæìÂÖ•Ê°ÜÂπ∂ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n      this.inputMessage = '';\r\n      // ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n      this.$nextTick(() => {\r\n        if (this.$refs.chatBody) {\r\n          this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * ÈÄÄÂá∫ÁôªÂΩï\r\n     */\r\n    logout() {\r\n      // TODO: ÈÄÄÂá∫ÁôªÂΩïÈÄªËæë\r\n      this.$message.success('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');\r\n    },\r\n    /**\r\n * Ê†πÊçÆÁ™óÂè£Â§ßÂ∞èÂà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n */\r\n    handleResize() {\r\n      this.isMobile = true\r\n      if (this.isMobile) {\r\n        this.sidebarCollapsed = true;\r\n      } else {\r\n        this.sidebarCollapsed = false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    /** Êü•ËØ¢Áî®Êà∑ÂàóË°® */\r\n    this.$ws.send({\r\n      cmd: 100003,\r\n      data: {}\r\n    });\r\n    // ÂàùÂßãÂåñÊó∂Âà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´ØÔºåÂπ∂ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ\r\n    this.handleResize();\r\n    window.addEventListener('resize', this.handleResize);\r\n    // ËÅäÂ§©Âå∫ÂüüÊªöÂä®Âà∞Â∫ïÈÉ®\r\n    this.$nextTick(() => {\r\n      if (this.$refs.chatBody) {\r\n        this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\r\n      }\r\n    });\r\n  },\r\n  beforeDestroy() {\r\n    // ÁßªÈô§Á™óÂè£Â§ßÂ∞èÂèòÂåñÁõëÂê¨\r\n    window.removeEventListener('resize', this.handleResize);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-app {\r\n  display: flex;\r\n  height: 83vh;\r\n  background: #f1f2f6;\r\n  font-family: 'Inter', 'Segoe UI', 'sans-serif';\r\n  overflow: hidden;\r\n}\r\n\r\n.sidebar {\r\n  width: 260px;\r\n  min-width: 220px;\r\n  background: #fff;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  transition: width 0.3s;\r\n  z-index: 10;\r\n}\r\n\r\n.sidebar-collapsed {\r\n  width: 0 !important;\r\n  min-width: 0 !important;\r\n  overflow: hidden;\r\n}\r\n\r\n.sidebar-title-bar {\r\n  padding: 3px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.sidebar-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #6C5CE7;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.sidebar-toggle-btn {\r\n  margin-left: 8px;\r\n}\r\n\r\n.sidebar-search {\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.sidebar-search .el-input {\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(108, 92, 231, 0.08);\r\n  background: #fff;\r\n  padding: 4px 8px;\r\n  border: 1px solid #e0e0e0;\r\n  transition: box-shadow 0.2s, border-color 0.2s;\r\n}\r\n\r\n.sidebar-search .el-input .el-input__inner {\r\n  border-radius: 12px;\r\n  background: transparent;\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n  font-size: 15px;\r\n  color: #333;\r\n  padding: 8px 12px;\r\n}\r\n\r\n.sidebar-search .el-input .el-input__inner:focus {\r\n  border: none;\r\n  box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.15);\r\n  outline: none;\r\n}\r\n\r\n.sidebar-menu {\r\n  border: none;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.menu-badge {\r\n  float: right;\r\n  margin-left: 8px;\r\n}\r\n\r\n.sidebar-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding-bottom: 8px;\r\n}\r\n\r\n.sidebar-list-title {\r\n  font-size: 13px;\r\n  font-weight: bold;\r\n  color: #888;\r\n  padding: 10px 16px 4px 16px;\r\n  background: #fff;\r\n}\r\n\r\n.sidebar-list-scroll {\r\n  max-height: 180px;\r\n  overflow-y: auto;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n.contact-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 16px;\r\n  cursor: pointer;\r\n  border-radius: 6px;\r\n  position: relative;\r\n  transition: background 0.2s;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.contact-item.active,\r\n.contact-item:hover {\r\n  background: #e6e6fa;\r\n}\r\n\r\n.avatar-wrap {\r\n  position: relative;\r\n  margin-right: 12px;\r\n}\r\n\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  border: 2px solid #fff;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);\r\n}\r\n\r\n.status-dot {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  border: 2px solid #fff;\r\n}\r\n\r\n.status-dot.online {\r\n  background: #00B894;\r\n}\r\n\r\n.status-dot.offline {\r\n  background: #BBBBBB;\r\n}\r\n\r\n.contact-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.contact-top {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.contact-name {\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  color: #222;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.contact-time {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-left: 8px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.contact-bottom {\r\n  font-size: 13px;\r\n  color: #666;\r\n  display: flex;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.contact-group-author {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.contact-badge {\r\n  position: absolute;\r\n  right: 12px;\r\n  top: 12px;\r\n}\r\n\r\n.sidebar-account {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  border-top: 1px solid #e0e0e0;\r\n  background: #fafafa;\r\n}\r\n\r\n.sidebar-account .avatar {\r\n  margin-right: 10px;\r\n}\r\n\r\n.account-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.account-name {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #222;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.account-status {\r\n  font-size: 12px;\r\n  color: #00B894;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.chat-main {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #f8f9fa;\r\n  height: 85vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.chat-header {\r\n  background: #fff;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\r\n  padding: 0px 0px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.chat-header-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.sidebar-show-btn {\r\n  margin-right: 8px;\r\n}\r\n\r\n.chat-header-name {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #222;\r\n}\r\n\r\n.chat-header-status {\r\n  font-size: 12px;\r\n  color: #00B894;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.chat-header-actions .el-button {\r\n  margin-left: 8px;\r\n  font-size: 20px;\r\n  background: transparent !important;\r\n  box-shadow: none !important;\r\n  border: none !important;\r\n}\r\n\r\n\r\n.chat-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 18px 24px;\r\n  background: #f8f9fa;\r\n  position: relative;\r\n}\r\n\r\n.chat-date-divider {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.chat-date-divider span,\r\n.chat-date-divider {\r\n  font-size: 12px;\r\n  background: #e0e0e0;\r\n  color: #666;\r\n  padding: 3px 12px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.chat-message {\r\n  display: flex;\r\n  align-items: flex-end;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.chat-message.other {\r\n  flex-direction: row;\r\n}\r\n\r\n.chat-message.self {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.msg-avatar {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  margin: 0 8px;\r\n}\r\n\r\n.msg-content-wrap {\r\n  max-width: 70%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n.chat-message.self .msg-content-wrap {\r\n  align-items: flex-end;\r\n}\r\n\r\n.msg-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.msg-name {\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  color: #555;\r\n  margin-right: 8px;\r\n}\r\n\r\n.msg-time {\r\n  font-size: 12px;\r\n  color: #bbb;\r\n}\r\n\r\n.msg-bubble {\r\n  padding: 12px 16px;\r\n  border-radius: 18px;\r\n  background: #fff;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);\r\n  font-size: 15px;\r\n  color: #222;\r\n  margin-bottom: 2px;\r\n  word-break: break-all;\r\n  max-width: 100%;\r\n}\r\n\r\n.msg-bubble.left {\r\n  border-radius: 18px 18px 18px 4px;\r\n}\r\n\r\n.msg-bubble.right {\r\n  background: #6C5CE7;\r\n  color: #fff;\r\n  border-radius: 18px 18px 4px 18px;\r\n}\r\n\r\n.msg-img {\r\n  max-width: 180px;\r\n  border-radius: 8px;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.msg-file-meta {\r\n  font-size: 12px;\r\n  color: #888;\r\n  margin-top: 2px;\r\n}\r\n\r\n.msg-meta-bottom {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 4px;\r\n  font-size: 12px;\r\n  color: #bbb;\r\n}\r\n\r\n.typing-dot {\r\n  display: inline-block;\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #bbb;\r\n  border-radius: 50%;\r\n  margin-right: 2px;\r\n  animation: typingBounce 1s infinite;\r\n}\r\n\r\n.typing-dot:nth-child(2) {\r\n  animation-delay: 0.2s;\r\n}\r\n\r\n.typing-dot:nth-child(3) {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n@keyframes typingBounce {\r\n\r\n  0%,\r\n  100% {\r\n    opacity: 0.3;\r\n    transform: translateY(0);\r\n  }\r\n\r\n  50% {\r\n    opacity: 1;\r\n    transform: translateY(-6px);\r\n  }\r\n}\r\n\r\n.chat-footer {\r\n  background: #fff;\r\n  border-top: 1px solid #e0e0e0;\r\n  padding: 12px 18px;\r\n  height: 135px;\r\n}\r\n\r\n.chat-footer-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.chat-footer-actions .el-button {\r\n  background: transparent !important;\r\n  box-shadow: none !important;\r\n  border: none !important;\r\n}\r\n\r\n.chat-footer-input {\r\n  display: flex;\r\n  align-items: flex-end;\r\n}\r\n\r\n/* LML */\r\n.msg-input {\r\n  border-radius: 12px;\r\n  /* ÂúÜËßí */\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\r\n  /* Âç°ÁâáÈò¥ÂΩ± */\r\n  padding: 8px;\r\n  background-color: #fff;\r\n  border: 1px solid #e0e0e0;\r\n  transition: box-shadow 0.2s ease, border-color 0.2s ease;\r\n}\r\n\r\n/* ËæìÂÖ•Ê°ÜËÅöÁÑ¶Êó∂ÁöÑÊïàÊûú */\r\n.msg-input .el-textarea__inner:focus {\r\n  outline: none;\r\n  border-color: #6c5ce7;\r\n  /* ÁÑ¶ÁÇπËæπÊ°ÜËâ≤ÔºàÂåπÈÖçÊåâÈíÆËâ≤Ôºâ */\r\n  box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.2);\r\n}\r\n\r\n/* ÂÜÖÈÉ® textarea Ë∞ÉÊï¥ */\r\n.msg-input .el-textarea__inner {\r\n  border: none !important;\r\n  /* ÂéªËæπÊ°Ü */\r\n  box-shadow: none !important;\r\n  /* ÂéªÈò¥ÂΩ± */\r\n  outline: none !important;\r\n  /* ÂéªÁÑ¶ÁÇπÈ´ò‰∫Æ */\r\n  /* border: none; */\r\n  /* box-shadow: none; */\r\n  resize: none;\r\n  font-size: 15px;\r\n  color: #333;\r\n  background-color: transparent;\r\n  /* ÁªßÊâøÂ§ñÂ±ÇËÉåÊôØ */\r\n  padding: 10px 12px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.send-btn {\r\n  margin-left: 10px;\r\n  background-color: #6c5ce7;\r\n  border-color: #6c5ce7;\r\n  font-size: 20px;\r\n  color: white;\r\n  /* ËÆæÁΩÆ icon È¢úËâ≤‰∏∫ÁôΩËâ≤ */\r\n}\r\n\r\n@media (max-width: 1024px) {\r\n  .sidebar {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    height: 100vh;\r\n    z-index: 20;\r\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\r\n  }\r\n\r\n  .sidebar-collapsed {\r\n    width: 0 !important;\r\n    min-width: 0 !important;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .chat-body {\r\n    padding: 8px 4px;\r\n  }\r\n\r\n  .chat-footer {\r\n    padding: 8px 4px;\r\n  }\r\n\r\n  .chat-header {\r\n    padding: 8px 4px;\r\n  }\r\n}\r\n</style>\r\n\r\n<style>\r\n/* ÂÜÖÈÉ® textarea Ë∞ÉÊï¥ */\r\n.msg-input .el-textarea__inner {\r\n  border: none !important;\r\n  /* ÂéªËæπÊ°Ü */\r\n  box-shadow: none !important;\r\n  /* ÂéªÈò¥ÂΩ± */\r\n  outline: none !important;\r\n  /* ÂéªÁÑ¶ÁÇπÈ´ò‰∫Æ */\r\n  /* border: none; */\r\n  /* box-shadow: none; */\r\n  resize: none;\r\n  font-size: 15px;\r\n  color: #333;\r\n  background-color: transparent;\r\n  /* ÁªßÊâøÂ§ñÂ±ÇËÉåÊôØ */\r\n  padding: 10px 12px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.sidebar-search .el-input .el-input__inner {\r\n  border-radius: 12px;\r\n  background: transparent;\r\n  border: none !important;\r\n  box-shadow: none !important;\r\n  font-size: 15px;\r\n  color: #333;\r\n  padding: 8px 12px;\r\n}\r\n\r\n.sidebar-search .el-input__prefix {\r\n  margin-right: 50px !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}