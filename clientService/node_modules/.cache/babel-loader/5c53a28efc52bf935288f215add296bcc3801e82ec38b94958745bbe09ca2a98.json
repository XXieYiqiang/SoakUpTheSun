{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _file = require(\"@/api/file\");\nvar _default = exports.default = {\n  name: 'BreadCrumb',\n  props: {\n    // 文件类型\n    fileType: {\n      required: true,\n      type: Number\n    },\n    // 文件路径\n    filePath: {\n      require: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      fileTypeMap: {\n        1: '全部图片',\n        2: '全部文档',\n        3: '全部视频',\n        4: '全部音乐',\n        5: '其他',\n        6: '回收站'\n      },\n      pageData: {\n        currentPage: 1,\n        pageCount: 50,\n        total: 0\n      },\n      isShowInput: false,\n      //  是否展示路径输入框\n      inputFilePath: '' //  路径输入\n    };\n  },\n  computed: {\n    /**\r\n     * 面包屑导航栏数组\r\n     */\n    breadCrumbList: {\n      get() {\n        let filePath = this.$route.query.filePath;\n        let filePathList = filePath ? filePath.split('/') : [];\n        let res = []; //  返回结果数组\n        let _path = []; //  存放祖先路径\n        for (let i = 0; i < filePathList.length; i++) {\n          if (filePathList[i]) {\n            _path.push(filePathList[i]);\n            res.push({\n              path: _path.join('/'),\n              name: filePathList[i]\n            });\n          } else if (i === 0) {\n            //  根目录\n            filePathList[i] = '';\n            _path.push(filePathList[i]);\n            res.push({\n              path: '/',\n              name: this.fileType === 0 ? '全部文件' : this.fileType === 8 ? '我的分享' : this.$route.name === 'Share' ? '全部分享' : ''\n            });\n          }\n        }\n        return res;\n      },\n      set() {\n        return [];\n      }\n    }\n  },\n  watch: {\n    '$route.query': {\n      immediate: true,\n      handler(newQuery) {\n        console.log('watch 路由跳转');\n        console.log(newQuery);\n        this.$emit('getTableDataByType');\n      }\n    }\n  },\n  methods: {\n    /**\r\n     * 点击面包屑导航栏空白处\r\n     */\n    handleClickBreadCrumbSelf() {\n      if (this.fileType === 0) {\n        this.inputFilePath = this.filePath;\n        this.isShowInput = true;\n        this.$nextTick(() => {\n          this.$refs.filePathInputRef.focus();\n        });\n      }\n    },\n    /**\r\n     * 路径输入框失去焦点或用户按下回车时触发\r\n     */\n    handleInputBlurEnter() {\n      this.isShowInput = false;\n      if (this.inputFilePath !== this.filePath) {\n        const fixInputFilePath = this.inputFilePath.endsWith('/') ? this.inputFilePath.slice(0, -1) : this.inputFilePath;\n        this.$router.push({\n          query: {\n            filePath: `${fixInputFilePath}`,\n            fileType: 0\n          }\n        });\n      }\n    },\n    // 获取文件参数\n    getRouteQuery(item) {\n      let routeName = this.$route.name;\n      if (routeName === 'Share') {\n        // 当前是查看他人分享列表的页面\n        return {\n          query: {\n            filePath: item.path\n          }\n        };\n      } else if (this.fileType === 8) {\n        // 当前是我的已分享列表页面\n        return {\n          query: {\n            fileType: 8,\n            filePath: item.path,\n            shareBatchNum: item.path === '/' ? undefined : this.$route.query.shareBatchNum //  当查看的是根目录，批次号置空\n          }\n        };\n      } else {\n        // 网盘页面\n        return {\n          query: {\n            filePath: item.path,\n            fileType: 0\n          }\n        };\n      }\n    }\n  }\n};","map":{"version":3,"names":["_file","require","_default","exports","default","name","props","fileType","required","type","Number","filePath","String","data","fileTypeMap","pageData","currentPage","pageCount","total","isShowInput","inputFilePath","computed","breadCrumbList","get","$route","query","filePathList","split","res","_path","i","length","push","path","join","set","watch","immediate","handler","newQuery","console","log","$emit","methods","handleClickBreadCrumbSelf","$nextTick","$refs","filePathInputRef","focus","handleInputBlurEnter","fixInputFilePath","endsWith","slice","$router","getRouteQuery","item","routeName","shareBatchNum","undefined"],"sources":["src/components/file/components/BreadCrumb.vue"],"sourcesContent":["<template>\r\n    <div class=\"breadcrumb-wrapper tech-breadcrumb-wrapper\">\r\n        <div class=\"title tech-title\">当前位置：</div>\r\n        <el-input class=\"file-path-input tech-input\" ref=\"filePathInputRef\" placeholder=\"请输入路径\" v-model=\"inputFilePath\" size=\"mini\"\r\n            :autofocus=\"true\" v-show=\"isShowInput\" @blur=\"handleInputBlurEnter\"\r\n            @change=\"handleInputBlurEnter\"></el-input>\r\n            \r\n        <div class=\"breadcrumb-box tech-breadcrumb-box\" :class=\"{ 'able-input tech-able-input': fileType === 0 }\" v-show=\"!isShowInput\"\r\n            @click.self=\"handleClickBreadCrumbSelf\">\r\n            <el-breadcrumb v-if=\"![0, 8].includes(fileType) && !['Share'].includes($route.name)\"\r\n                separator-class=\"el-icon-arrow-right tech-separator\">\r\n                <el-breadcrumb-item class=\"tech-breadcrumb-item\">{{ fileTypeMap[fileType] }}</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n            <el-breadcrumb v-else separator-class=\"el-icon-arrow-right tech-separator\">\r\n                <el-breadcrumb-item v-for=\"(item, index) in breadCrumbList\" :key=\"index\" :to=\"getRouteQuery(item)\" class=\"tech-breadcrumb-item\">{{\r\n                    item.name }}</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getFileListByPath } from '@/api/file'\r\nexport default {\r\n    name: 'BreadCrumb',\r\n    props: {\r\n        // 文件类型\r\n        fileType: {\r\n            required: true,\r\n            type: Number\r\n        },\r\n        // 文件路径\r\n        filePath: {\r\n            require: true,\r\n            type: String\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            fileTypeMap: {\r\n                1: '全部图片',\r\n                2: '全部文档',\r\n                3: '全部视频',\r\n                4: '全部音乐',\r\n                5: '其他',\r\n                6: '回收站'\r\n            },\r\n            pageData: {\r\n                currentPage: 1,\r\n                pageCount: 50,\r\n                total: 0\r\n            },\r\n            isShowInput: false, //  是否展示路径输入框\r\n            inputFilePath: '' //  路径输入\r\n        }\r\n    },\r\n    computed: {\r\n        /**\r\n         * 面包屑导航栏数组\r\n         */\r\n        breadCrumbList: {\r\n            get() {\r\n                let filePath = this.$route.query.filePath\r\n                let filePathList = filePath ? filePath.split('/') : []\r\n                let res = [] //  返回结果数组\r\n                let _path = [] //  存放祖先路径\r\n                for (let i = 0; i < filePathList.length; i++) {\r\n                    if (filePathList[i]) {\r\n                        _path.push(filePathList[i])\r\n                        res.push({\r\n                            path: _path.join('/'),\r\n                            name: filePathList[i]\r\n                        })\r\n                    } else if (i === 0) {\r\n                        //  根目录\r\n                        filePathList[i] = ''\r\n                        _path.push(filePathList[i])\r\n                        res.push({\r\n                            path: '/',\r\n                            name:\r\n                                this.fileType === 0\r\n                                    ? '全部文件'\r\n                                    : this.fileType === 8\r\n                                        ? '我的分享'\r\n                                        : this.$route.name === 'Share'\r\n                                            ? '全部分享'\r\n                                            : ''\r\n                        })\r\n                    }\r\n                }\r\n                return res\r\n            },\r\n            set() {\r\n                return []\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        '$route.query': {\r\n            immediate: true,\r\n            handler(newQuery) {\r\n                console.log('watch 路由跳转')\r\n                console.log(newQuery)\r\n                this.$emit('getTableDataByType')\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * 点击面包屑导航栏空白处\r\n         */\r\n        handleClickBreadCrumbSelf() {\r\n            if (this.fileType === 0) {\r\n                this.inputFilePath = this.filePath\r\n                this.isShowInput = true\r\n                this.$nextTick(() => {\r\n                    this.$refs.filePathInputRef.focus()\r\n                })\r\n            }\r\n        },\r\n        /**\r\n         * 路径输入框失去焦点或用户按下回车时触发\r\n         */\r\n        handleInputBlurEnter() {\r\n            this.isShowInput = false\r\n            if (this.inputFilePath !== this.filePath) {\r\n                const fixInputFilePath = this.inputFilePath.endsWith('/')\r\n                    ? this.inputFilePath.slice(0, -1)\r\n                    : this.inputFilePath\r\n                this.$router.push({\r\n                    query: { filePath: `${fixInputFilePath}`, fileType: 0 }\r\n                })\r\n            }\r\n        },\r\n        // 获取文件参数\r\n        getRouteQuery(item) {\r\n            let routeName = this.$route.name\r\n            if (routeName === 'Share') {\r\n                // 当前是查看他人分享列表的页面\r\n                return { query: { filePath: item.path } }\r\n            } else if (this.fileType === 8) {\r\n                // 当前是我的已分享列表页面\r\n                return {\r\n                    query: {\r\n                        fileType: 8,\r\n                        filePath: item.path,\r\n                        shareBatchNum:\r\n                            item.path === '/' ? undefined : this.$route.query.shareBatchNum //  当查看的是根目录，批次号置空\r\n                    }\r\n                }\r\n            } else {\r\n                // 网盘页面\r\n                return { query: { filePath: item.path, fileType: 0 } }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* ================= 赛博朋克主题变量 ================= */\r\n@bg-dark: #0f1219;\r\n@bg-panel: rgba(26, 31, 44, 0.7);\r\n@primary-color: #00f2ff; /* Cyber Cyan - 霓虹青色 */\r\n@accent-color: #7d2ae8;  /* Neon Purple */\r\n@text-main: #e2e8f0; // 浅色主文本\r\n@text-sub: #94a3b8;  // 辅助文本\r\n@border-color: rgba(255, 255, 255, 0.08); // 用于主要边框\r\n@hover-bg: rgba(0, 242, 255, 0.1); // 悬停背景\r\n\r\n.breadcrumb-wrapper.tech-breadcrumb-wrapper {\r\n    padding: 5px 0; // 调整 padding\r\n    height: 40px; // 调整高度\r\n    line-height: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: @bg-dark;\r\n    color: @text-sub;\r\n    border-bottom: 1px solid @border-color; // 增加底部细线\r\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n\r\n    .title.tech-title {\r\n        height: 30px;\r\n        line-height: 30px;\r\n        color: @text-main;\r\n        font-weight: 500;\r\n        margin-left: 10px;\r\n    }\r\n    \r\n    // 路径输入框样式\r\n    .file-path-input.tech-input {\r\n        flex: 1;\r\n        font-size: 14px;\r\n        margin-right: 10px;\r\n\r\n        ::v-deep .el-input__inner {\r\n            height: 30px;\r\n            line-height: 30px;\r\n            background-color: @bg-panel;\r\n            border: 1px solid @border-color;\r\n            color: @primary-color;\r\n            box-shadow: 0 0 5px rgba(0, 242, 255, 0.3);\r\n            transition: all 0.3s;\r\n            \r\n            &:focus {\r\n                border-color: @primary-color;\r\n                box-shadow: 0 0 10px @primary-color;\r\n            }\r\n        }\r\n    }\r\n\r\n    .breadcrumb-box.tech-breadcrumb-box {\r\n        padding: 0 8px;\r\n        flex: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        margin-right: 10px;\r\n        \r\n        &.able-input.tech-able-input {\r\n            cursor: pointer;\r\n            border: 1px dashed transparent; // 默认透明虚线\r\n            transition: all 0.2s;\r\n            \r\n            &:hover {\r\n                background: @hover-bg;\r\n                border: 1px dashed @primary-color; // 悬停时显示霓虹虚线边框\r\n                box-shadow: 0 0 5px rgba(0, 242, 255, 0.5);\r\n            }\r\n        }\r\n        \r\n        // El-Breadcrumb 整体样式\r\n        ::v-deep .el-breadcrumb {\r\n            height: 30px;\r\n            line-height: 30px;\r\n            \r\n            .el-breadcrumb__separator {\r\n                font-weight: bold;\r\n                color: @accent-color; // 分隔符使用紫色霓虹\r\n            }\r\n            \r\n            .el-breadcrumb__item {\r\n                .el-breadcrumb__inner {\r\n                    color: @text-sub; // 默认文本颜色\r\n                    transition: all 0.2s;\r\n\r\n                    &.is-link {\r\n                        color: @primary-color; // 链接颜色\r\n                        font-weight: 500;\r\n                        text-shadow: 0 0 5px rgba(0, 242, 255, 0.3);\r\n\r\n                        &:hover {\r\n                            color: @primary-color;\r\n                            text-shadow: 0 0 10px @primary-color; // 悬停光效增强\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                // 最后一个元素，非链接\r\n                &:last-child .el-breadcrumb__inner {\r\n                    color: @text-main;\r\n                    font-weight: bold;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}