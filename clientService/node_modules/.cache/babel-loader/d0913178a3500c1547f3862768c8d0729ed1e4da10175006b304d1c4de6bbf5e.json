{"ast":null,"code":"import { renameFile } from '@/api/file';\nexport default {\n  name: 'RenameFileDialog',\n  data() {\n    return {\n      visible: false,\n      //  对话框是否可见\n      form: {\n        fileName: ''\n      },\n      formRules: {\n        fileName: [{\n          required: true,\n          message: '请输入文件名称',\n          trigger: 'blur'\n        }]\n      },\n      sureBtnLoading: false\n    };\n  },\n  methods: {\n    /**\r\n     * 重命名文件对话框 | 对话框打开的回调\r\n     * @description 表单项回显原本的文件名\r\n     */\n    handleDialogOpen() {\n      this.form.fileName = this.oldFileName;\n    },\n    /**\r\n     * 重命名文件对话框 | 对话框关闭的回调\r\n     * @description 关闭对话框，重置表单\r\n     */\n    handleDialogClose() {\n      this.$refs['renameFileForm'].resetFields();\n      this.visible = false;\n      this.callback('cancel');\n    },\n    /**\r\n     * 重命名文件对话框 | 确定按钮点击事件\r\n     * @description 校验表单，校验通过后调用重命名文件接口\r\n     * @param {string} formName 表单ref值\r\n     */\n    handleDialogSure(formName) {\n      this.sureBtnLoading = true;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          renameFile({\n            userFileId: this.userFileId,\n            fileName: this.form.fileName\n          }).then(res => {\n            this.sureBtnLoading = false;\n            console.log('res====handleDialogSure\t');\n            console.log(res);\n            if (res.data.code === 200) {\n              this.$message.success('重命名成功');\n              this.$refs[formName].resetFields();\n              this.visible = false;\n              this.callback('confirm');\n            } else {\n              this.$message.error(res.message);\n            }\n          }).catch(() => {\n            this.sureBtnLoading = false;\n          });\n        } else {\n          this.sureBtnLoading = false;\n          return false;\n        }\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}