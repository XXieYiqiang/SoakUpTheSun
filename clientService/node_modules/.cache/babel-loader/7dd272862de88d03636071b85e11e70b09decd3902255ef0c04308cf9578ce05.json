{"ast":null,"code":"import { mapGetters } from 'vuex';\nexport default {\n  name: 'FileTable',\n  props: {\n    // 文件类型\n    fileType: {\n      required: true,\n      type: Number\n    },\n    // 文件路径\n    filePath: {\n      required: true,\n      type: String\n    },\n    // 文件列表\n    fileList: {\n      required: true,\n      type: Array\n    },\n    // 文件加载状态\n    loading: {\n      required: true,\n      type: Boolean\n    }\n  },\n  data() {\n    return {\n      officeFileType: ['ppt', 'pptx', 'doc', 'docx', 'xls', 'xlsx'],\n      sortedFileList: [] //  排序后的表格数据\n    };\n  },\n  computed: {\n    //  selectedColumnList: 判断当前用户设置的左侧栏是否折叠\n    ...mapGetters(['selectedColumnList']),\n    // 路由名称\n    routeName() {\n      return this.$route.name;\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return this.$store.state.common.screenWidth;\n    }\n  },\n  watch: {\n    /**\r\n     * 文件路径变化时清空表格已选行\r\n     */\n    filePath() {\n      this.clearSelectedTable();\n      this.$refs.multipleTable.clearSort();\n    },\n    /**\r\n     * 文件类型变化时清空表格已选行\r\n     */\n    fileType() {\n      this.clearSelectedTable();\n      this.$refs.multipleTable.clearSort();\n    },\n    /**\r\n     * 文件列表变化时清空表格已选行\r\n     */\n    fileList() {\n      this.clearSelectedTable();\n      this.$refs.multipleTable.clearSort();\n      this.sortedFileList = this.fileList;\n    }\n  },\n  methods: {\n    /**\r\n     * 当表格的排序条件发生变化的时候会触发该事件\r\n     */\n    handleSortChange() {\n      this.sortedFileList = this.$refs.multipleTable.tableData;\n    },\n    /**\r\n     * 表格某一行右键事件\r\n     * @description 打开右键菜单\r\n     * @param {object} row 当前行数据\r\n     * @param {object} column 当前列数据\r\n     * @param {object} event 当前右键元素\r\n     */\n    handleContextMenu(row, column, event) {\n      // 阻止右键事件冒泡\n      event.cancelBubble = true;\n      // xs 以上的屏幕\n      if (this.screenWidth > 768) {\n        event.preventDefault();\n        this.$refs.multipleTable.setCurrentRow(row); //  选中当前行\n        this.$openBox.contextMenu({\n          selectedFile: row,\n          domEvent: event\n        }).then(res => {\n          this.$refs.multipleTable.setCurrentRow(); //  取消当前选中行\n          if (res === 'confirm') {\n            this.$emit('getTableDataByType'); //  刷新文件列表\n            // this.$store.dispatch('showStorage') //  刷新存储容量\n          }\n        });\n      }\n    },\n    /**\r\n     * 清空表格已选行\r\n     * @description 用于父组件调用 | 本组件调用，请勿删除\r\n     */\n    clearSelectedTable() {\n      this.$refs.multipleTable.clearSelection();\n    },\n    /**\r\n     * 表格选择项发生变化时的回调函数\r\n     * @param {[]} selection 勾选的行数据\r\n     */\n    handleSelectRow(selection) {\n      this.$store.commit('changeSelectedFiles', selection);\n      this.$store.commit('changeIsBatchOperation', selection.length !== 0);\n    },\n    /**\r\n     * 更多图标点击事件\r\n     * @description 打开右键菜单\r\n     * @param {object} row 当前行数据\r\n     * @param {object} event 当前右键元素\r\n     */\n    handleClickMore(row, event) {\n      this.$refs.multipleTable.setCurrentRow(row); //  选中当前行\n      this.$openBox.contextMenu({\n        selectedFile: row,\n        domEvent: event\n      }).then(res => {\n        this.$refs.multipleTable.setCurrentRow(); //  取消当前选中行\n        if (res === 'confirm') {\n          //外部方法\n          this.$emit('getTableDataByType'); //  刷新文件列表\n          // 外层依赖\n          // this.$store.dispatch('showStorage') //  刷新存储容量\n        }\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}