{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.set.difference.v2.js\");\nrequire(\"core-js/modules/es.set.intersection.v2.js\");\nrequire(\"core-js/modules/es.set.is-disjoint-from.v2.js\");\nrequire(\"core-js/modules/es.set.is-subset-of.v2.js\");\nrequire(\"core-js/modules/es.set.is-superset-of.v2.js\");\nrequire(\"core-js/modules/es.set.symmetric-difference.v2.js\");\nrequire(\"core-js/modules/es.set.union.v2.js\");\nvar _default = exports.default = {\n  name: 'FileTimeLine',\n  props: {\n    // 文件列表\n    fileList: {\n      required: true,\n      type: Array\n    }\n  },\n  data() {\n    return {\n      reverse: true\n    };\n  },\n  computed: {\n    //  按年-月-日分组排序\n    imageTimelineData() {\n      let res = [];\n      //  去重，获取返回的所有日期年-月-日\n      let uploadTimeSet = new Set(this.fileList.map(item => item.uploadTime.split(' ')[0]));\n      let uploadDate = [...uploadTimeSet];\n      //  分组\n      uploadDate.forEach(element => {\n        res.push({\n          uploadDate: element,\n          imageList: this.fileList.filter(item => item.uploadTime.split(' ')[0] === element) //  过滤\n        });\n      });\n      return res;\n    },\n    // 图标大小\n    gridSize() {\n      return this.$store.getters.gridSize;\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return this.$store.state.common.screenWidth;\n    }\n  },\n  methods: {\n    /**\r\n     * 文件鼠标右键事件\r\n     * @param {object} item 文件信息\r\n     * @param {number} index 文件索引\r\n     * @param {object} event 鼠标事件信息\r\n     */\n    handleContextMenu(item, index, event) {\n      // 阻止右键事件冒泡\n      event.cancelBubble = true;\n      // xs 以上的屏幕\n      if (this.screenWidth > 768) {\n        this.selectedFile = item;\n        if (!this.isBatchOperation) {\n          event.preventDefault();\n          this.$openBox.contextMenu({\n            selectedFile: item,\n            domEvent: event\n          }).then(res => {\n            this.selectedFile = {};\n            if (res === 'confirm') {\n              this.$emit('getTableDataByType'); //  刷新文件列表\n              this.$store.dispatch('showStorage'); //  刷新存储容量\n            }\n          });\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","fileList","required","type","Array","data","reverse","computed","imageTimelineData","res","uploadTimeSet","Set","map","item","uploadTime","split","uploadDate","forEach","element","push","imageList","filter","gridSize","$store","getters","screenWidth","state","common","methods","handleContextMenu","index","event","cancelBubble","selectedFile","isBatchOperation","preventDefault","$openBox","contextMenu","domEvent","then","$emit","dispatch"],"sources":["src/components/file/components/FileTimeLine.vue"],"sourcesContent":["<template>\r\n    <div class=\"image-timeline-wrapper tech-timeline-wrapper\">\r\n        <div class=\"radio tech-radio-group\">\r\n            排序：\r\n            <el-radio-group v-model=\"reverse\">\r\n                <el-radio :label=\"true\">倒序</el-radio>\r\n                <el-radio :label=\"false\">正序</el-radio>\r\n            </el-radio-group>\r\n        </div>\r\n        <el-timeline\r\n            class=\"image-timeline-list tech-timeline-list\"\r\n            :reverse=\"reverse\"\r\n            v-if=\"imageTimelineData.length\"\r\n        >\r\n            <el-timeline-item\r\n                class=\"image-timeline-item tech-timeline-item\"\r\n                v-for=\"(item, index) in imageTimelineData\"\r\n                :key=\"index\"\r\n                :timestamp=\"item.uploadDate\"\r\n                color=\"#00f2ff\" placement=\"top\"\r\n            >\r\n                <ul class=\"image-list tech-image-list\">\r\n                    <li\r\n                        class=\"image-item tech-image-item\"\r\n                        v-for=\"(image, imageIndex) in item.imageList\"\r\n                        :key=\"`${index}-${imageIndex}`\"\r\n                        :style=\"`width: ${gridSize + 40}px; `\"\r\n                        @click=\"$file.handleImgPreview(imageIndex, {}, item.imageList)\"\r\n                        @contextmenu.prevent=\"handleContextMenu(item, imageIndex, $event)\"\r\n                    >\r\n                        <img\r\n                            class=\"image\"\r\n                            :src=\"$file.getMinImgStream(image)\"\r\n                            :alt=\"$file.getFileNameComplete(image)\"\r\n                            :style=\"`width: ${gridSize}px; height: ${gridSize}px;`\"\r\n                        />\r\n                        <div\r\n                            class=\"image-name tech-image-name\"\r\n                            v-html=\"$file.getFileNameComplete(image, true)\"\r\n                        ></div>\r\n                    </li>\r\n                </ul>\r\n            </el-timeline-item>\r\n        </el-timeline>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'FileTimeLine',\r\n    props: {\r\n        // 文件列表\r\n        fileList: {\r\n            required: true,\r\n            type: Array\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            reverse: true\r\n        }\r\n    },\r\n    computed: {\r\n        //  按年-月-日分组排序\r\n        imageTimelineData() {\r\n            let res = []\r\n            //  去重，获取返回的所有日期年-月-日\r\n            let uploadTimeSet = new Set(\r\n                this.fileList.map((item) => item.uploadTime.split(' ')[0])\r\n            )\r\n            let uploadDate = [...uploadTimeSet]\r\n            //  分组\r\n            uploadDate.forEach((element) => {\r\n                res.push({\r\n                    uploadDate: element,\r\n                    imageList: this.fileList.filter(\r\n                        (item) => item.uploadTime.split(' ')[0] === element\r\n                    ) //  过滤\r\n                })\r\n            })\r\n            return res\r\n        },\r\n        // 图标大小\r\n        gridSize() {\r\n            return this.$store.getters.gridSize\r\n        },\r\n        // 屏幕宽度\r\n        screenWidth() {\r\n            return this.$store.state.common.screenWidth\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * 文件鼠标右键事件\r\n         * @param {object} item 文件信息\r\n         * @param {number} index 文件索引\r\n         * @param {object} event 鼠标事件信息\r\n         */\r\n        handleContextMenu(item, index, event) {\r\n            // 阻止右键事件冒泡\r\n            event.cancelBubble = true\r\n            // xs 以上的屏幕\r\n            if (this.screenWidth > 768) {\r\n                this.selectedFile = item\r\n                if (!this.isBatchOperation) {\r\n                    event.preventDefault()\r\n                    this.$openBox\r\n                        .contextMenu({\r\n                            selectedFile: item,\r\n                            domEvent: event\r\n                        })\r\n                        .then((res) => {\r\n                            this.selectedFile = {}\r\n                            if (res === 'confirm') {\r\n                                this.$emit('getTableDataByType') //  刷新文件列表\r\n                                this.$store.dispatch('showStorage') //  刷新存储容量\r\n                            }\r\n                        })\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* ================= 赛博朋克主题变量 ================= */\r\n@bg-dark: #0f1219;\r\n@bg-panel: rgba(26, 31, 44, 0.7);\r\n@primary-color: #00f2ff; /* Cyber Cyan - 霓虹青色 */\r\n@accent-color: #7d2ae8;  /* Neon Purple */\r\n@text-main: #e2e8f0; // 浅色主文本\r\n@text-sub: #94a3b8;  // 辅助文本\r\n@border-color: rgba(255, 255, 255, 0.08); // 用于主要边框\r\n@hover-bg: rgba(0, 242, 255, 0.1); // 悬停背景\r\n@danger-color: #ff4949; // 危险/高亮关键词颜色\r\n\r\n/* Mixin for scrollbar (手动实现原 Stylus Mixin) */\r\n.setScrollbar(@width, @track-color, @thumb-color) {\r\n  &::-webkit-scrollbar {\r\n    width: @width;\r\n    height: @width;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: @track-color;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: @thumb-color;\r\n    border-radius: @width / 2;\r\n  }\r\n}\r\n\r\n.image-timeline-wrapper.tech-timeline-wrapper {\r\n    margin-top: 20px;\r\n    height: calc(100vh - 215px);\r\n    overflow-y: auto;\r\n    background-color: @bg-dark;\r\n    color: @text-main;\r\n    .setScrollbar(6px, transparent, rgba(148, 163, 184, 0.4)); // 赛博朋克滚动条\r\n    padding: 0 20px; // 左右增加一些内边距\r\n}\r\n\r\n.radio.tech-radio-group {\r\n    color: @text-sub;\r\n    font-size: 14px;\r\n    margin-bottom: 20px;\r\n\r\n    // 调整 El-Radio 样式\r\n    ::v-deep .el-radio {\r\n        color: @text-sub;\r\n    }\r\n    ::v-deep .el-radio__input.is-checked .el-radio__inner {\r\n        background: @primary-color;\r\n        border-color: @primary-color;\r\n        box-shadow: 0 0 8px @primary-color;\r\n    }\r\n    ::v-deep .el-radio__input.is-checked + .el-radio__label {\r\n        color: @primary-color;\r\n    }\r\n    ::v-deep .el-radio__inner {\r\n        background-color: rgba(255, 255, 255, 0.1);\r\n        border: 1px solid @text-sub;\r\n    }\r\n}\r\n\r\n.image-timeline-list.tech-timeline-list {\r\n    margin-top: 10px;\r\n    \r\n    // 覆盖 Element UI Timeline 样式\r\n    ::v-deep .el-timeline-item__tail {\r\n        border-left: 2px solid @border-color; // 时间线连接线颜色\r\n    }\r\n    ::v-deep .el-timeline-item__node {\r\n        background-color: @primary-color !important; // 节点颜色\r\n        box-shadow: 0 0 10px @primary-color; // 节点光效\r\n    }\r\n    \r\n    .image-timeline-item.tech-timeline-item {\r\n        \r\n        // 覆盖时间戳样式\r\n        ::v-deep .el-timeline-item__timestamp {\r\n            color: @primary-color; // 时间戳颜色\r\n            font-size: 16px;\r\n            font-weight: bold;\r\n            padding-bottom: 10px;\r\n        }\r\n\r\n        .image-list.tech-image-list {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            list-style: none;\r\n            padding: 0; // 重置 ul padding\r\n\r\n            .image-item.tech-image-item {\r\n                margin: 0 16px 16px 0;\r\n                padding: 8px;\r\n                text-align: center;\r\n                cursor: pointer;\r\n                background-color: @bg-panel; // 文件项背景色\r\n                border: 1px solid @border-color; // 边框\r\n                border-radius: 6px; // 圆角\r\n                transition: all 0.3s ease;\r\n                \r\n                img.image {\r\n                    border-radius: 4px;\r\n                }\r\n\r\n                &:hover {\r\n                    background: @hover-bg;\r\n                    border-color: @primary-color;\r\n                    box-shadow: 0 0 15px @primary-color; // 悬停霓虹光效\r\n                    transform: translateY(-2px);\r\n                    \r\n                    .image-name.tech-image-name {\r\n                        color: @primary-color;\r\n                        text-shadow: 0 0 8px rgba(0, 242, 255, 0.7);\r\n                        font-weight: bold;\r\n                    }\r\n                }\r\n\r\n                .image-name.tech-image-name {\r\n                    margin-top: 8px;\r\n                    height: 44px;\r\n                    line-height: 22px;\r\n                    font-size: 12px;\r\n                    color: @text-main;\r\n                    word-break: break-all;\r\n                    // setEllipsis(2) 替换为原生 CSS\r\n                    overflow: hidden;\r\n                    text-overflow: ellipsis;\r\n                    display: -webkit-box;\r\n                    -webkit-line-clamp: 2;\r\n                    -webkit-box-orient: vertical;\r\n\r\n                    ::v-deep .keyword {\r\n                        color: @danger-color; // 关键词高亮\r\n                        font-weight: bold;\r\n                        text-shadow: 0 0 5px @danger-color;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;iCAgDA;EACAA,IAAA;EACAC,KAAA;IACA;IACAC,QAAA;MACAC,QAAA;MACAC,IAAA,EAAAC;IACA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA;IACAC,kBAAA;MACA,IAAAC,GAAA;MACA;MACA,IAAAC,aAAA,OAAAC,GAAA,CACA,KAAAV,QAAA,CAAAW,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAC,UAAA,CAAAC,KAAA,SACA;MACA,IAAAC,UAAA,OAAAN,aAAA;MACA;MACAM,UAAA,CAAAC,OAAA,CAAAC,OAAA;QACAT,GAAA,CAAAU,IAAA;UACAH,UAAA,EAAAE,OAAA;UACAE,SAAA,OAAAnB,QAAA,CAAAoB,MAAA,CACAR,IAAA,IAAAA,IAAA,CAAAC,UAAA,CAAAC,KAAA,aAAAG,OACA;QACA;MACA;MACA,OAAAT,GAAA;IACA;IACA;IACAa,SAAA;MACA,YAAAC,MAAA,CAAAC,OAAA,CAAAF,QAAA;IACA;IACA;IACAG,YAAA;MACA,YAAAF,MAAA,CAAAG,KAAA,CAAAC,MAAA,CAAAF,WAAA;IACA;EACA;EACAG,OAAA;IACA;AACA;AACA;AACA;AACA;AACA;IACAC,kBAAAhB,IAAA,EAAAiB,KAAA,EAAAC,KAAA;MACA;MACAA,KAAA,CAAAC,YAAA;MACA;MACA,SAAAP,WAAA;QACA,KAAAQ,YAAA,GAAApB,IAAA;QACA,UAAAqB,gBAAA;UACAH,KAAA,CAAAI,cAAA;UACA,KAAAC,QAAA,CACAC,WAAA;YACAJ,YAAA,EAAApB,IAAA;YACAyB,QAAA,EAAAP;UACA,GACAQ,IAAA,CAAA9B,GAAA;YACA,KAAAwB,YAAA;YACA,IAAAxB,GAAA;cACA,KAAA+B,KAAA;cACA,KAAAjB,MAAA,CAAAkB,QAAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}