{"ast":null,"code":"import NavBar from './knowledge/components/NavBar.vue';\nimport KnowledgeList from './knowledge/components/KnowledgeList.vue';\nimport FileList from './knowledge/components/FileList.vue';\nimport { getFileListByType, createKnowledge, deleteKnowledgeFile } from '@/api/knowledge';\nimport KnowledgeCreateModal from './knowledge/components/KnowledgeCreateModal.vue';\nexport default {\n  components: {\n    NavBar,\n    KnowledgeList,\n    FileList,\n    KnowledgeCreateModal\n  },\n  data() {\n    return {\n      selectedCard: '业务文档库',\n      knowledgeCode: '',\n      fileList: [],\n      showCreate: false,\n      //知识库创建弹框\n      getDataList: '-1'\n    };\n  },\n  methods: {\n    /**\r\n     * \r\n     * @param data 知识库上传文件\r\n     */\n    handleFileUpload(data) {\n      console.log('上传文件数据：', data);\n      this.getList(this.knowledgeCode);\n    },\n    /*\r\n      * 删除文件操作\r\n      * @param row 文件行数据\r\n      */\n    handleFileDelete(data) {\n      const param = {\n        fileId: data.id\n      };\n      deleteKnowledgeFile(param).then(res => {\n        if (res.data.code === 200) {\n          this.$message.success('文件删除成功');\n          this.getList(this.knowledgeCode); // 刷新文件列表\n        } else {\n          this.$message.error(res.data.message || '文件删除失败，请稍后重试');\n        }\n      }).catch(err => {\n        console.error('删除文件失败:', err);\n        this.$message.error('删除文件失败，请稍后重试');\n      });\n    },\n    /**\r\n     * 知识库创建操作\r\n     * @param data \r\n     */\n    async handleCreate(data) {\n      console.log('创建知识库数据：', data);\n      if (!data || data.name === null || data.name === '' || data.name === undefined) {\n        this.$message.error('知识库名称不能为空');\n        return;\n      }\n      if (!data || data.name === null || data.name === '' || data.name === undefined) {\n        this.$message.error('知识库描述不能为空');\n        return;\n      }\n      const param = {\n        ...data\n      };\n      const res = await createKnowledge(param);\n      console.log('创建知识库返回结果：');\n      console.log(res);\n      if (res.data.code === 200) {\n        this.$message.success('知识库创建成功');\n        this.showCreate = false; // 关闭弹窗\n\n        this.$refs.knowledgeList.getList(); // 刷新知识库列表\n\n        this.$refs.knowledgeList.handleClose();\n      } else {\n        this.$message.error(res.data.message || '知识库创建失败，请稍后重试');\n      }\n      // TODO: 发送请求保存 data\n    },\n    /**\r\n     * \r\n     * @param val 子组件上传操作后，获取初始知识库编码\r\n     */\n    handleFileListLoadding(val) {\n      this.getList(val);\n    },\n    /**\r\n     * \r\n     * @param card 文件卡片点击触发\r\n     */\n    handleCardClick(card) {\n      this.selectedCard = card.name;\n      this.knowledgeCode = card.knowledgeCode;\n      this.getList(card.knowledgeCode);\n    },\n    /**\r\n     * \r\n     * @param code 查询文件列表数据\r\n     */\n    async getList(code) {\n      const param = {\n        knowledgeCode: code\n      };\n      const res = await getFileListByType(param);\n      if (res.data.code === 200) {\n        this.fileList = res.data.data;\n      }\n    },\n    /**\r\n     * 知识库列表刷新触发操作\r\n     */\n    handleLoadding() {\n      console.log('知识库列表刷新触发操作');\n      this.$refs.knowledgeList.getList(); // 刷新知识库列表\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}