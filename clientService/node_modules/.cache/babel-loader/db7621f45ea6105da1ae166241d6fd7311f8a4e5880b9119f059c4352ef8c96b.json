{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nrequire(\"core-js/modules/es.iterator.find.js\");\nrequire(\"core-js/modules/es.iterator.reduce.js\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\n// ÈÄªËæë‰ª£Á†Å‰øùÊåÅÂÆåÂÖ®‰∏çÂèò\nvar _default = exports.default = {\n  name: 'ChatView',\n  data() {\n    return {\n      sidebarCollapsed: false,\n      // ‰æßËæπÊ†èÊòØÂê¶ÊäòÂè†\n      isMobile: false,\n      // ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\n      search: '',\n      // ÊêúÁ¥¢Ê°ÜÂÜÖÂÆπ\n      activeMenu: 'message',\n      // ÂΩìÂâçÊøÄÊ¥ªÁöÑËèúÂçïÈ°π\n      groups: [{\n        group_id: '5',\n        group_name: '‰∫ßÂìÅÂºÄÂèëÁªÑ',\n        group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/15bd703716eb575eb049d376ef18625e.png',\n        last_message_time: '10:25',\n        last_message_author: 'ËµµÂ∑•Á®ãÂ∏à',\n        last_message: 'ÂêéÁ´ØAPIÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü'\n      }, {\n        group_id: '6',\n        group_name: 'Â∏ÇÂú∫ÈÉ®',\n        group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/2f7e3cc5e3e5a3d0e681096b58281846.png',\n        last_message_time: 'Âë®‰∫î',\n        last_message_author: 'ÊùéËê•ÈîÄ',\n        last_message: 'Êñ∞Ê¥ªÂä®ÊñπÊ°àÂ∑≤Êõ¥Êñ∞'\n      }],\n      // Áæ§ÁªÑÂàóË°®\n      currentContactId: '',\n      // ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\n      inputMessage: '',\n      //ËæìÂÖ•Ê°Ü‰ø°ÊÅØ\n      isTyping: false //ÊòØÂê¶Ê≠£Âú®ËæìÂÖ•\n    };\n  },\n  computed: {\n    isOnline() {\n      return this.$store.getters['user/isLogin'];\n    },\n    // ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\n    statusText() {\n      return this.currentContact?.Status === 'online' ? 'üü¢ ONLINE' : 'üî¥ OFFLINE';\n    },\n    //Êü•ËØ¢Áî®Êà∑ÂàóË°®\n    userList() {\n      return this.$store.getters['message/getUserList'];\n    },\n    // ÂΩìÂâçÁôªÂΩïÁî®Êà∑‰ø°ÊÅØ\n    userInfo() {\n      return this.$store.state.user.userInfo || {};\n    },\n    /**\r\n    * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâËÅîÁ≥ª‰∫∫\r\n    */\n    filteredContacts() {\n      if (!this.search) return this.userList;\n      return this.userList.filter(c => c.UserName.includes(this.search) || c.UserIntroduction.includes(this.search));\n    },\n    /**\r\n    * Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâÁæ§ÁªÑ\r\n    */\n    filteredGroups() {\n      if (!this.search) return this.groups;\n      return this.groups.filter(g => g.group_name.includes(this.search) || g.last_message.includes(this.search));\n    },\n    /**\r\n    ¬†* ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂØπË±°\r\n    ¬†*/\n    currentContact() {\n      return this.userList.find(c => c.UserID === this.currentContactId) || this.groups.find(g => g.group_id === this.currentContactId) || {};\n    },\n    /**\r\n    ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂêçÁß∞\r\n    ¬†*/\n    currentContactName() {\n      return this.currentContact.UserName || this.currentContact.group_name || '';\n    },\n    /**\r\n    ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂ§¥ÂÉè\r\n    ¬†*/\n    currentContactAvatar() {\n      return this.currentContact.AvatarURL || this.currentContact.group_avatar || '';\n    },\n    /**\r\n    ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\r\n    ¬†*/\n    currentContactStatus() {\n      return this.currentContact.Status || '';\n    },\n    /**\r\n    ¬†* ÊâÄÊúâËÅîÁ≥ª‰∫∫Êú™ËØªÊ∂àÊÅØÊÄªÊï∞\r\n    ¬†*/\n    unreadTotal() {\n      return this.userList.reduce((sum, c) => sum + (c.unread_count || 0), 0);\n    },\n    // ‰ªéVuex Store ‰∏≠Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØ\n    messages() {\n      console.log('this.currentContactId===' + this.currentContactId);\n      console.log(\"Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØÔºö\", this.$store.getters['message/getMessages'](this.currentContactId));\n      return this.$store.getters['message/getMessages'](this.currentContactId);\n    }\n  },\n  methods: {\n    /**\r\n    ¬†* ÂàáÊç¢‰æßËæπÊ†èÊäòÂè†Áä∂ÊÄÅ\r\n    ¬†*/\n    toggleSidebar() {\n      this.sidebarCollapsed = !this.sidebarCollapsed;\n    },\n    /**\r\n    ¬† * ÊòæÁ§∫‰æßËæπÊ†èÔºàÁßªÂä®Á´ØÔºâ\r\n    ¬† */\n    showSidebar() {\n      this.sidebarCollapsed = false;\n    },\n    /**\r\n    ¬† * ËèúÂçïÈÄâÊã©‰∫ã‰ª∂Â§ÑÁêÜ\r\n    ¬† * @param {string} index ÈÄâ‰∏≠ÁöÑËèúÂçïÈ°πÁ¥¢Âºï\r\n    ¬† */\n    handleMenuSelect(index) {\n      this.activeMenu = index;\n    },\n    /**\r\n    ¬† * ÈÄâÊã©ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑ\r\n    ¬† * @param {string} id ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n    ¬† */\n    selectContact(id) {\n      this.currentContactId = id;\n      // TODO: Âä†ËΩΩÂØπÂ∫îËÅäÂ§©ËÆ∞ÂΩï\n    },\n    /**\r\n    ¬†* Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\r\n    ¬†* @param {string} time Êó∂Èó¥Â≠óÁ¨¶‰∏≤\r\n    ¬†* @returns {string}\r\n    ¬†*/\n    formatTime(time) {\n      if (!time) return '';\n      const m = (0, _moment.default)(time);\n      if (!m.isValid()) return ''; // Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\n\n      return m.format('YYYY-MM-DD HH:mm:ss'); // ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\n    },\n    formatTime2(time) {\n      if (!time) return '';\n      const m = (0, _moment.default)(time);\n      if (!m.isValid()) return ''; // Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\n\n      return m.format('HH:mm:ss'); // ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\n    },\n    /**\r\n    ¬† * ËæìÂÖ•Ê°ÜÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜÔºàÂõûËΩ¶ÂèëÈÄÅÊ∂àÊÅØÔºâ\r\n    ¬† * @param {KeyboardEvent} e\r\n    ¬† */\n    handleInputKeydown(e) {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        this.sendMessage();\n      }\n    },\n    /**\r\n    ¬†* ÂèëÈÄÅÊ∂àÊÅØ\r\n    ¬†*/\n    sendMessage() {\n      if (!this.inputMessage.trim()) return;\n      console.log('[Chat] üí¨ ÂèëÈÄÅÊ∂àÊÅØ:', this.inputMessage);\n      const content = this.inputMessage.trim();\n      const receiverId = this.currentContactId;\n      const senderId = this.userInfo.userId;\n      const messagePayload = {\n        messageId: 'client-' + Date.now(),\n        // ‰∏¥Êó∂ IDÔºåÂêéÁª≠ÂèØÊúçÂä°Á´ØÂõûÂ°´\n        senderId: senderId,\n        //ÂèëÈÄÅÁî®Êà∑ÔºöÂÖàÂÜôÊ≠ª\n        reciverId: receiverId,\n        content,\n        targetType: 'user',\n        messageType: 'ÊñáÊú¨',\n        sendTime: new Date().toISOString(),\n        readStatus: 'sent'\n      };\n      this.$ws.send({\n        cmd: 100001,\n        data: {\n          messageId: 'client-' + Date.now(),\n          senderId: senderId,\n          reciverId: receiverId,\n          content: content,\n          targetType: 'user',\n          messageType: 'ÊñáÊú¨',\n          sendTime: new Date().toISOString(),\n          readStatus: 'sent'\n        }\n      });\n\n      // 2Ô∏è‚É£ ÂêåÊ≠•ÂÜôÂÖ• Vuex Ê∂àÊÅØÊ®°ÂùóÔºàÊ≥®ÊÑèÂ∞ÅË£ÖÊÄßÔºâ\n      // ÂêëÊüê‰∏™‰ºöËØùËøΩÂä†‰∏ÄÊù°Ê∂àÊÅØ\n      this.$store.commit('message/ADD_MESSAGE', {\n        contactId: receiverId,\n        message: messagePayload\n      });\n\n      // ‚úÖ ÈáçÁΩÆÊåáÂÆö‰ºöËØùÊú™ËØªÊ∂àÊÅØÊï∞‰∏∫ 0ÔºàÂ∑≤ËØªÔºâ\n      this.$store.commit('message/RESET_UNREAD', receiverId);\n      console.log('Áî®Êà∑ „Äê111„ÄëÊ∂àÊÅØ‰∏∫Ôºö===');\n      console.log(this.$store.getters['message/getMessages'](\"111\"));\n      console.log('Áî®Êà∑ „Äê222„ÄëÊ∂àÊÅØ‰∏∫Ôºö===');\n      console.log(this.$store.getters['message/getMessages'](\"222\"));\n\n      //ÊÉÖÂÜµËæìÂÖ•Ê°ÜÂπ∂ÊªöÂä®Âà∞Â∫ïÈÉ®\n      this.inputMessage = '';\n      // ÊªöÂä®Âà∞Â∫ïÈÉ®\n      this.$nextTick(() => {\n        if (this.$refs.chatBody) {\n          this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\n        }\n      });\n    },\n    /**\r\n    ¬†* ÈÄÄÂá∫ÁôªÂΩï\r\n    ¬†*/\n    logout() {\n      // TODO: ÈÄÄÂá∫ÁôªÂΩïÈÄªËæë\n\n      this.$store.dispatch('user/logout');\n      this.$message.success('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');\n    },\n    /**\r\n    * Ê†πÊçÆÁ™óÂè£Â§ßÂ∞èÂà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n    */\n    handleResize() {\n      this.isMobile = true;\n      if (this.isMobile) {\n        this.sidebarCollapsed = true;\n      } else {\n        this.sidebarCollapsed = false;\n      }\n    }\n  },\n  mounted() {\n    /** Êü•ËØ¢Áî®Êà∑ÂàóË°® */\n    if (this.$ws) {\n      this.$ws.send({\n        cmd: 100003,\n        data: {}\n      });\n    }\n\n    // ÂàùÂßãÂåñÊó∂Âà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´ØÔºåÂπ∂ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ\n    this.handleResize();\n    window.addEventListener('resize', this.handleResize);\n    // ËÅäÂ§©Âå∫ÂüüÊªöÂä®Âà∞Â∫ïÈÉ®\n    this.$nextTick(() => {\n      if (this.$refs.chatBody) {\n        this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\n      }\n    });\n  },\n  beforeDestroy() {\n    // ÁßªÈô§Á™óÂè£Â§ßÂ∞èÂèòÂåñÁõëÂê¨\n    window.removeEventListener('resize', this.handleResize);\n  }\n};","map":{"version":3,"names":["_moment","_interopRequireDefault","require","_default","exports","default","name","data","sidebarCollapsed","isMobile","search","activeMenu","groups","group_id","group_name","group_avatar","last_message_time","last_message_author","last_message","currentContactId","inputMessage","isTyping","computed","isOnline","$store","getters","statusText","currentContact","Status","userList","userInfo","state","user","filteredContacts","filter","c","UserName","includes","UserIntroduction","filteredGroups","g","find","UserID","currentContactName","currentContactAvatar","AvatarURL","currentContactStatus","unreadTotal","reduce","sum","unread_count","messages","console","log","methods","toggleSidebar","showSidebar","handleMenuSelect","index","selectContact","id","formatTime","time","m","moment","isValid","format","formatTime2","handleInputKeydown","e","key","shiftKey","preventDefault","sendMessage","trim","content","receiverId","senderId","userId","messagePayload","messageId","Date","now","reciverId","targetType","messageType","sendTime","toISOString","readStatus","$ws","send","cmd","commit","contactId","message","$nextTick","$refs","chatBody","scrollTop","scrollHeight","logout","dispatch","$message","success","handleResize","mounted","window","addEventListener","beforeDestroy","removeEventListener"],"sources":["src/views/ChatView.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-app cyber-theme\">\r\n    <div class=\"tech-bg-grid\"></div>\r\n\r\n    <aside :class=\"['sidebar', 'glass-panel', { 'sidebar-collapsed': sidebarCollapsed }]\" ref=\"sidebar\">\r\n      <div class=\"sidebar-title-bar\">\r\n        <span class=\"sidebar-title\">\r\n          <span class=\"logo-text\">GIM<span class=\"highlight\">MSG</span></span>\r\n        </span>\r\n        <el-button icon=\"el-icon-arrow-left\" @click=\"toggleSidebar\" circle class=\"tech-btn-icon\" v-show=\"isMobile\" />\r\n      </div>\r\n      <div class=\"sidebar-search\">\r\n        <el-input v-model=\"search\" placeholder=\"SEARCH DATA...\" size=\"small\" clearable class=\"tech-input-search\">\r\n          <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\r\n        </el-input>\r\n      </div>\r\n      <el-menu :default-active=\"activeMenu\" class=\"sidebar-menu tech-menu\" :collapse=\"sidebarCollapsed\"\r\n        @select=\"handleMenuSelect\">\r\n        <el-menu-item index=\"message\">\r\n          <i class=\"el-icon-chat-dot-square\"></i>\r\n          <span slot=\"title\">ÈÄöËÆØÊµÅ</span>\r\n          <el-badge :value=\"unreadTotal\" class=\"menu-badge tech-badge\" v-if=\"unreadTotal > 0\" />\r\n        </el-menu-item>\r\n        <el-menu-item index=\"group\">\r\n          <i class=\"el-icon-connection\"></i>\r\n          <span slot=\"title\">Âçè‰ΩúÁªÑ</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"setting\">\r\n          <i class=\"el-icon-setting\"></i>\r\n          <span slot=\"title\">Á≥ªÁªüËÆæÁΩÆ</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n      \r\n      <div class=\"sidebar-list custom-scrollbar\">\r\n        <div class=\"sidebar-list-title\">ACTIVE LINKS</div>\r\n        <div class=\"sidebar-list-scroll\">\r\n          <template v-if=\"filteredContacts.length > 0\">\r\n            <div v-for=\"contact in filteredContacts\" :key=\"contact.UserID\"\r\n              :class=\"['contact-item', { active: contact.UserID === currentContactId }]\"\r\n              @click=\"selectContact(contact.UserID)\">\r\n              <div class=\"avatar-wrap\">\r\n                <img :src=\"contact.AvatarURL\" class=\"avatar\" />\r\n                <span class=\"status-dot\" :class=\"contact.Status === 'online' ? 'online' : 'offline'\"></span>\r\n              </div>\r\n              <div class=\"contact-info\">\r\n                <div class=\"contact-top\">\r\n                  <span class=\"contact-name\">{{ contact.UserName }}</span>\r\n                  <span class=\"contact-time\">{{ formatTime2(contact.LastOnlineTime) }}</span>\r\n                </div>\r\n                <div class=\"contact-bottom\">\r\n                  <span v-if=\"contact.lastMessageType === 'file'\" class=\"msg-preview\">\r\n                    <i class=\"el-icon-document\"></i> FILE\r\n                  </span>\r\n                  <span v-else class=\"msg-preview\">{{ contact.lastMessage }}</span>\r\n                </div>\r\n              </div>\r\n              <el-badge :value=\"contact.unread_count\" class=\"contact-badge tech-badge\" v-if=\"contact.unread_count > 0\" />\r\n            </div>\r\n          </template>\r\n          <el-empty v-else description=\"Êó†ÈìæÊé•‰ø°Âè∑\" :image-size=\"60\"></el-empty>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"sidebar-account\">\r\n        <div class=\"avatar-wrap mini\">\r\n           <img v-if=\"isOnline\" :src=\"userInfo.avatarUrl\" class=\"avatar\" />\r\n           <img v-else src=\"@/assets/images/common/default.jpg\" class=\"avatar\" />\r\n           <div class=\"scan-line\"></div>\r\n        </div>\r\n        <div class=\"account-info\">\r\n          <div class=\"account-name\">{{ userInfo?.userName || 'GUEST_USER' }}</div>\r\n          <div class=\"account-status\">\r\n            <span :class=\"['status-dot', isOnline ? 'online' : 'offline']\"></span>\r\n            {{ isOnline ? 'ONLINE' : 'OFFLINE' }}\r\n          </div>\r\n        </div>\r\n        <el-button icon=\"el-icon-switch-button\" class=\"tech-btn-icon danger\" circle @click=\"logout\"></el-button>\r\n      </div>\r\n    </aside>\r\n\r\n    <main class=\"chat-main\">\r\n      <header class=\"chat-header glass-panel\">\r\n        <div class=\"chat-header-left\" style=\"width:1000px;display: flex;\">\r\n          <el-button icon=\"el-icon-menu\" @click=\"showSidebar\" circle class=\"tech-btn-icon mobile-menu\" v-show=\"isMobile\" />\r\n          <div class=\"avatar-wrap header-avatar\">\r\n            <img v-if=\"currentContactAvatar\" :src=\"currentContactAvatar\" class=\"avatar\" />\r\n            <img v-else src=\"@/assets/images/common/default.jpg\" class=\"avatar\" />\r\n          </div>\r\n          <div>\r\n            <div class=\"chat-header-name\">{{ currentContactName || 'Êú™ÈÄâÊã©ÁªàÁ´Ø' }}</div>\r\n            <div class=\"chat-header-status\">\r\n              <span class=\"status-dot\" :class=\"currentContactStatus === 'online' ? 'online' : 'offline'\"></span>\r\n              {{ statusText }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"chat-header-actions\">\r\n          <el-button icon=\"el-icon-search\" circle class=\"tech-btn-icon\" />\r\n          <el-button icon=\"el-icon-phone-outline\" circle class=\"tech-btn-icon\" />\r\n          <el-button icon=\"el-icon-more\" circle class=\"tech-btn-icon\" />\r\n        </div>\r\n      </header>\r\n\r\n      <div class=\"chat-body custom-scrollbar\" ref=\"chatBody\">\r\n        <div class=\"chat-date-divider\">\r\n          <span>SYSTEM LOG: {{ new Date().toLocaleDateString() }}</span>\r\n        </div>\r\n        \r\n        <div v-for=\"msg in messages\" :key=\"msg.messageId\"\r\n          :class=\"['chat-message', msg.senderId === userInfo.userId ? 'self' : 'other']\">\r\n          <img v-if=\"msg.senderId !== userInfo.userId\" :src=\"currentContactAvatar\" class=\"avatar msg-avatar\" />\r\n          \r\n          <div class=\"msg-content-wrap\">\r\n            <div class=\"msg-meta\" v-if=\"msg.senderId !== userInfo.userId\">\r\n              <span class=\"msg-name\">{{ currentContactName }}</span>\r\n              <span class=\"msg-time\">{{ formatTime(msg.sendTime) }}</span>\r\n            </div>\r\n\r\n            <div v-if=\"msg.messageType === 'ÊñáÊú¨'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <span class=\"msg-text\">{{ msg.content }}</span>\r\n            </div>\r\n\r\n            <div v-else-if=\"msg.messageType === 'ÂõæÁâá'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <img :src=\"msg.attachment_url\" class=\"msg-img\" />\r\n              <div class=\"msg-file-meta\">IMG_DATA</div>\r\n            </div>\r\n\r\n            <div v-else-if=\"msg.messageType === 'Êñá‰ª∂'\"\r\n              :class=\"['msg-bubble', msg.senderId === userInfo.userId ? 'right' : 'left']\">\r\n              <i class=\"el-icon-document\"></i>\r\n              <span>{{ msg.attachment_name }}</span>\r\n            </div>\r\n            \r\n            <div class=\"msg-meta-bottom\" v-if=\"msg.senderId === userInfo.userId\">\r\n               <span class=\"msg-time\">{{ formatTime(msg.sendTime) }}</span>\r\n               <i v-if=\"msg.readStatus === 'read'\" class=\"el-icon-check\" style=\"color:#00f2ff\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"isTyping\" class=\"chat-message other\">\r\n          <img :src=\"currentContactAvatar\" class=\"avatar msg-avatar\" />\r\n          <div class=\"msg-content-wrap\">\r\n            <div class=\"msg-bubble left typing-bubble\">\r\n              <span class=\"typing-dot\"></span>\r\n              <span class=\"typing-dot\"></span>\r\n              <span class=\"typing-dot\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <footer class=\"chat-footer glass-panel\">\r\n        <div class=\"chat-footer-actions\">\r\n          <el-button circle class=\"tech-btn-icon\"><i class=\"el-icon-picture-outline\"></i></el-button>\r\n          <el-button circle class=\"tech-btn-icon\"><i class=\"el-icon-folder-opened\"></i></el-button>\r\n          <div style=\"flex:1\"></div>\r\n        </div>\r\n        <div class=\"chat-footer-input\">\r\n          <div class=\"input-wrapper\">\r\n             <el-input type=\"textarea\" v-model=\"inputMessage\" \r\n              :autosize=\"{ minRows: 2, maxRows: 2, maxHeight: 100 }\"\r\n              placeholder=\"ËæìÂÖ•Êåá‰ª§...\" ref=\"input\" \r\n              @keydown.native=\"handleInputKeydown\" \r\n              class=\"msg-input tech-textarea\" />\r\n          </div>\r\n          <el-button type=\"primary\" circle @click=\"sendMessage\" class=\"send-btn\">\r\n             <i class=\"el-icon-position\"></i>\r\n          </el-button>\r\n        </div>\r\n      </footer>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// ÈÄªËæë‰ª£Á†Å‰øùÊåÅÂÆåÂÖ®‰∏çÂèò\r\nimport moment from 'moment'\r\nexport default {\r\n¬† name: 'ChatView',\r\n¬† data() {\r\n¬† ¬† return {\r\n¬† ¬† ¬† sidebarCollapsed: false, ¬†// ‰æßËæπÊ†èÊòØÂê¶ÊäòÂè†\r\n¬† ¬† ¬† isMobile: false,// ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n¬† ¬† ¬† search: '', // ÊêúÁ¥¢Ê°ÜÂÜÖÂÆπ\r\n¬† ¬† ¬† activeMenu: 'message',// ÂΩìÂâçÊøÄÊ¥ªÁöÑËèúÂçïÈ°π\r\n¬† ¬† ¬† groups: [\r\n¬† ¬† ¬† ¬† {\r\n¬† ¬† ¬† ¬† ¬† group_id: '5',\r\n¬† ¬† ¬† ¬† ¬† group_name: '‰∫ßÂìÅÂºÄÂèëÁªÑ',\r\n¬† ¬† ¬† ¬† ¬† group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/15bd703716eb575eb049d376ef18625e.png',\r\n¬† ¬† ¬† ¬† ¬† last_message_time: '10:25',\r\n¬† ¬† ¬† ¬† ¬† last_message_author: 'ËµµÂ∑•Á®ãÂ∏à',\r\n¬† ¬† ¬† ¬† ¬† last_message: 'ÂêéÁ´ØAPIÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫Ü'\r\n¬† ¬† ¬† ¬† },\r\n¬† ¬† ¬† ¬† {\r\n¬† ¬† ¬† ¬† ¬† group_id: '6',\r\n¬† ¬† ¬† ¬† ¬† group_name: 'Â∏ÇÂú∫ÈÉ®',\r\n¬† ¬† ¬† ¬† ¬† group_avatar: 'https://design.gemcoder.com/staticResource/echoAiSystemImages/2f7e3cc5e3e5a3d0e681096b58281846.png',\r\n¬† ¬† ¬† ¬† ¬† last_message_time: 'Âë®‰∫î',\r\n¬† ¬† ¬† ¬† ¬† last_message_author: 'ÊùéËê•ÈîÄ',\r\n¬† ¬† ¬† ¬† ¬† last_message: 'Êñ∞Ê¥ªÂä®ÊñπÊ°àÂ∑≤Êõ¥Êñ∞'\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ],// Áæ§ÁªÑÂàóË°®\r\n¬† ¬† ¬† currentContactId: '', // ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n¬† ¬† ¬† inputMessage: '',//ËæìÂÖ•Ê°Ü‰ø°ÊÅØ\r\n¬† ¬† ¬† isTyping: false//ÊòØÂê¶Ê≠£Âú®ËæìÂÖ•\r\n¬† ¬† };\r\n¬† },\r\n¬† computed: {\r\n¬† ¬† isOnline() {\r\n¬† ¬† ¬† return this.$store.getters['user/isLogin'];\r\n¬† ¬† },\r\n¬† ¬† // ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\r\n¬† ¬† statusText() {\r\n¬† ¬† ¬† return this.currentContact?.Status === 'online' ? 'üü¢ ONLINE' : 'üî¥ OFFLINE';\r\n¬† ¬† },\r\n¬† ¬† //Êü•ËØ¢Áî®Êà∑ÂàóË°®\r\n¬† ¬† userList() {\r\n¬† ¬† ¬† return this.$store.getters['message/getUserList'];\r\n¬† ¬† },\r\n¬† ¬† // ÂΩìÂâçÁôªÂΩïÁî®Êà∑‰ø°ÊÅØ\r\n¬† ¬† userInfo() {\r\n¬† ¬† ¬† return this.$store.state.user.userInfo || {}\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬†* Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâËÅîÁ≥ª‰∫∫\r\n¬† ¬†*/\r\n¬† ¬† filteredContacts() {\r\n¬† ¬† ¬† if (!this.search) return this.userList;\r\n¬† ¬† ¬† return this.userList.filter(c => c.UserName.includes(this.search) || c.UserIntroduction.includes(this.search));\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬†* Ê†πÊçÆÊêúÁ¥¢ÂÜÖÂÆπÁ≠õÈÄâÁæ§ÁªÑ\r\n¬† ¬†*/\r\n¬† ¬† filteredGroups() {\r\n¬† ¬† ¬† if (!this.search) return this.groups;\r\n¬† ¬† ¬† return this.groups.filter(g => g.group_name.includes(this.search) || g.last_message.includes(this.search));\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂΩìÂâçÈÄâ‰∏≠ÁöÑËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂØπË±°\r\n¬† ¬† ¬†*/\r\n¬† ¬† currentContact() {\r\n¬† ¬† ¬† return (\r\n¬† ¬† ¬† ¬† this.userList.find(c => c.UserID === this.currentContactId) ||\r\n¬† ¬† ¬† ¬† this.groups.find(g => g.group_id === this.currentContactId) ||\r\n¬† ¬† ¬† ¬† {}\r\n¬† ¬† ¬† );\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂêçÁß∞\r\n¬† ¬† ¬†*/\r\n¬† ¬† currentContactName() {\r\n¬† ¬† ¬† return this.currentContact.UserName || this.currentContact.group_name || '';\r\n¬† ¬† },\r\n\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑÂ§¥ÂÉè\r\n¬† ¬† ¬†*/\r\n¬† ¬† currentContactAvatar() {\r\n¬† ¬† ¬† return this.currentContact.AvatarURL || this.currentContact.group_avatar || '';\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂΩìÂâçËÅîÁ≥ª‰∫∫Âú®Á∫øÁä∂ÊÄÅ\r\n¬† ¬† ¬†*/\r\n¬† ¬† currentContactStatus() {\r\n¬† ¬† ¬† return this.currentContact.Status || '';\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÊâÄÊúâËÅîÁ≥ª‰∫∫Êú™ËØªÊ∂àÊÅØÊÄªÊï∞\r\n¬† ¬† ¬†*/\r\n¬† ¬† unreadTotal() {\r\n¬† ¬† ¬† return this.userList.reduce((sum, c) => sum + (c.unread_count || 0), 0);\r\n¬† ¬† },\r\n¬† ¬† // ‰ªéVuex Store ‰∏≠Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØ\r\n¬† ¬† messages() {\r\n¬† ¬† ¬† console.log('this.currentContactId===' + this.currentContactId)\r\n¬† ¬† ¬† console.log(\"Ëé∑ÂèñËÅäÂ§©‰ø°ÊÅØÔºö\", this.$store.getters['message/getMessages'](this.currentContactId));\r\n¬† ¬† ¬† return this.$store.getters['message/getMessages'](this.currentContactId);\r\n¬† ¬† },\r\n¬† },\r\n¬† methods: {\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂàáÊç¢‰æßËæπÊ†èÊäòÂè†Áä∂ÊÄÅ\r\n¬† ¬† ¬†*/\r\n¬† ¬† toggleSidebar() {\r\n¬† ¬† ¬† this.sidebarCollapsed = !this.sidebarCollapsed;\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬† * ÊòæÁ§∫‰æßËæπÊ†èÔºàÁßªÂä®Á´ØÔºâ\r\n¬† ¬† ¬† */\r\n¬† ¬† showSidebar() {\r\n¬† ¬† ¬† this.sidebarCollapsed = false;\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬† * ËèúÂçïÈÄâÊã©‰∫ã‰ª∂Â§ÑÁêÜ\r\n¬† ¬† ¬† * @param {string} index ÈÄâ‰∏≠ÁöÑËèúÂçïÈ°πÁ¥¢Âºï\r\n¬† ¬† ¬† */\r\n¬† ¬† handleMenuSelect(index) {\r\n¬† ¬† ¬† this.activeMenu = index;\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬† * ÈÄâÊã©ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑ\r\n¬† ¬† ¬† * @param {string} id ËÅîÁ≥ª‰∫∫ÊàñÁæ§ÁªÑID\r\n¬† ¬† ¬† */\r\n¬† ¬† selectContact(id) {\r\n¬† ¬† ¬† this.currentContactId = id;\r\n¬† ¬† ¬† // TODO: Âä†ËΩΩÂØπÂ∫îËÅäÂ§©ËÆ∞ÂΩï\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\r\n¬† ¬† ¬†* @param {string} time Êó∂Èó¥Â≠óÁ¨¶‰∏≤\r\n¬† ¬† ¬†* @returns {string}\r\n¬† ¬† ¬†*/\r\n¬† ¬† formatTime(time) {\r\n¬† ¬† ¬† if (!time) return '';\r\n\r\n¬† ¬† ¬† const m = moment(time);\r\n\r\n¬† ¬† ¬† if (!m.isValid()) return ''; ¬†// Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\r\n\r\n¬† ¬† ¬† return m.format('YYYY-MM-DD HH:mm:ss'); ¬†// ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\r\n¬† ¬† },\r\n¬† ¬† formatTime2(time) {\r\n¬† ¬† ¬† if (!time) return '';\r\n\r\n¬† ¬† ¬† const m = moment(time);\r\n\r\n¬† ¬† ¬† if (!m.isValid()) return ''; ¬†// Èò≤Ê≠¢ÈùûÊ≥ïÊó∂Èó¥Ê†ºÂºè\r\n\r\n¬† ¬† ¬† return m.format('HH:mm:ss'); ¬†// ËøîÂõûÂÆåÊï¥Êó∂Èó¥Ê†ºÂºè\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬† * ËæìÂÖ•Ê°ÜÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜÔºàÂõûËΩ¶ÂèëÈÄÅÊ∂àÊÅØÔºâ\r\n¬† ¬† ¬† * @param {KeyboardEvent} e\r\n¬† ¬† ¬† */\r\n¬† ¬† handleInputKeydown(e) {\r\n¬† ¬† ¬† if (e.key === 'Enter' && !e.shiftKey) {\r\n¬† ¬† ¬† ¬† e.preventDefault();\r\n¬† ¬† ¬† ¬† this.sendMessage();\r\n¬† ¬† ¬† }\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÂèëÈÄÅÊ∂àÊÅØ\r\n¬† ¬† ¬†*/\r\n¬† ¬† sendMessage() {\r\n¬† ¬† ¬† if (!this.inputMessage.trim()) return;\r\n\r\n¬† ¬† ¬† console.log('[Chat] üí¨ ÂèëÈÄÅÊ∂àÊÅØ:', this.inputMessage)\r\n\r\n¬† ¬† ¬† const content = this.inputMessage.trim();\r\n\r\n¬† ¬† ¬† const receiverId = this.currentContactId;\r\n\r\n¬† ¬† ¬† const senderId = this.userInfo.userId;\r\n\r\n¬† ¬† ¬† const messagePayload = {\r\n¬† ¬† ¬† ¬† messageId: 'client-' + Date.now(), // ‰∏¥Êó∂ IDÔºåÂêéÁª≠ÂèØÊúçÂä°Á´ØÂõûÂ°´\r\n¬† ¬† ¬† ¬† senderId: senderId,//ÂèëÈÄÅÁî®Êà∑ÔºöÂÖàÂÜôÊ≠ª\r\n¬† ¬† ¬† ¬† reciverId: receiverId,\r\n¬† ¬† ¬† ¬† content,\r\n¬† ¬† ¬† ¬† targetType: 'user',\r\n¬† ¬† ¬† ¬† messageType: 'ÊñáÊú¨',\r\n¬† ¬† ¬† ¬† sendTime: new Date().toISOString(),\r\n¬† ¬† ¬† ¬† readStatus: 'sent'\r\n¬† ¬† ¬† };\r\n\r\n¬† ¬† ¬† this.$ws.send(\r\n¬† ¬† ¬† ¬† {\r\n¬† ¬† ¬† ¬† ¬† cmd: 100001,\r\n¬† ¬† ¬† ¬† ¬† data: {\r\n¬† ¬† ¬† ¬† ¬† ¬† messageId: 'client-' + Date.now(),\r\n¬† ¬† ¬† ¬† ¬† ¬† senderId: senderId,\r\n¬† ¬† ¬† ¬† ¬† ¬† reciverId: receiverId,\r\n¬† ¬† ¬† ¬† ¬† ¬† content: content,\r\n¬† ¬† ¬† ¬† ¬† ¬† targetType: 'user',\r\n¬† ¬† ¬† ¬† ¬† ¬† messageType: 'ÊñáÊú¨',\r\n¬† ¬† ¬† ¬† ¬† ¬† sendTime: new Date().toISOString(),\r\n¬† ¬† ¬† ¬† ¬† ¬† readStatus: 'sent'\r\n¬† ¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† )\r\n\r\n¬† ¬† ¬† // 2Ô∏è‚É£ ÂêåÊ≠•ÂÜôÂÖ• Vuex Ê∂àÊÅØÊ®°ÂùóÔºàÊ≥®ÊÑèÂ∞ÅË£ÖÊÄßÔºâ\r\n¬† ¬† ¬† // ÂêëÊüê‰∏™‰ºöËØùËøΩÂä†‰∏ÄÊù°Ê∂àÊÅØ\r\n¬† ¬† ¬† this.$store.commit('message/ADD_MESSAGE', {\r\n¬† ¬† ¬† ¬† contactId: receiverId,\r\n¬† ¬† ¬† ¬† message: messagePayload\r\n¬† ¬† ¬† });\r\n\r\n¬† ¬† ¬† // ‚úÖ ÈáçÁΩÆÊåáÂÆö‰ºöËØùÊú™ËØªÊ∂àÊÅØÊï∞‰∏∫ 0ÔºàÂ∑≤ËØªÔºâ\r\n¬† ¬† ¬† this.$store.commit('message/RESET_UNREAD', receiverId);\r\n\r\n¬† ¬† ¬† console.log('Áî®Êà∑ „Äê111„ÄëÊ∂àÊÅØ‰∏∫Ôºö===')\r\n¬† ¬† ¬† console.log(this.$store.getters['message/getMessages'](\"111\"))\r\n\r\n¬† ¬† ¬† console.log('Áî®Êà∑ „Äê222„ÄëÊ∂àÊÅØ‰∏∫Ôºö===')\r\n¬† ¬† ¬† console.log(this.$store.getters['message/getMessages'](\"222\"))\r\n\r\n¬† ¬† ¬† //ÊÉÖÂÜµËæìÂÖ•Ê°ÜÂπ∂ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n¬† ¬† ¬† this.inputMessage = '';\r\n¬† ¬† ¬† // ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n¬† ¬† ¬† this.$nextTick(() => {\r\n¬† ¬† ¬† ¬† if (this.$refs.chatBody) {\r\n¬† ¬† ¬† ¬† ¬† this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\r\n¬† ¬† ¬† ¬† }\r\n¬† ¬† ¬† });\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬† ¬† ¬†* ÈÄÄÂá∫ÁôªÂΩï\r\n¬† ¬† ¬†*/\r\n¬† ¬† logout() {\r\n¬† ¬† ¬† // TODO: ÈÄÄÂá∫ÁôªÂΩïÈÄªËæë\r\n\r\n\r\n¬† ¬† ¬† this.$store.dispatch('user/logout');\r\n\r\n¬† ¬† ¬† this.$message.success('Â∑≤ÈÄÄÂá∫ÁôªÂΩï');\r\n¬† ¬† },\r\n¬† ¬† /**\r\n¬†* Ê†πÊçÆÁ™óÂè£Â§ßÂ∞èÂà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´Ø\r\n¬†*/\r\n¬† ¬† handleResize() {\r\n¬† ¬† ¬† this.isMobile = true\r\n¬† ¬† ¬† if (this.isMobile) {\r\n¬† ¬† ¬† ¬† this.sidebarCollapsed = true;\r\n¬† ¬† ¬† } else {\r\n¬† ¬† ¬† ¬† this.sidebarCollapsed = false;\r\n¬† ¬† ¬† }\r\n¬† ¬† }\r\n¬† },\r\n¬† mounted() {\r\n¬† ¬† /** Êü•ËØ¢Áî®Êà∑ÂàóË°® */\r\n¬† ¬† if (this.$ws) {\r\n¬† ¬† ¬† this.$ws.send({\r\n¬† ¬† ¬† ¬† cmd: 100003,\r\n¬† ¬† ¬† ¬† data: {}\r\n¬† ¬† ¬† });\r\n¬† ¬† }\r\n\r\n¬† ¬† // ÂàùÂßãÂåñÊó∂Âà§Êñ≠ÊòØÂê¶‰∏∫ÁßªÂä®Á´ØÔºåÂπ∂ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ\r\n¬† ¬† this.handleResize();\r\n¬† ¬† window.addEventListener('resize', this.handleResize);\r\n¬† ¬† // ËÅäÂ§©Âå∫ÂüüÊªöÂä®Âà∞Â∫ïÈÉ®\r\n¬† ¬† this.$nextTick(() => {\r\n¬† ¬† ¬† if (this.$refs.chatBody) {\r\n¬† ¬† ¬† ¬† this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight;\r\n¬† ¬† ¬† }\r\n¬† ¬† });\r\n¬† },\r\n¬† beforeDestroy() {\r\n¬† ¬† // ÁßªÈô§Á™óÂè£Â§ßÂ∞èÂèòÂåñÁõëÂê¨\r\n¬† ¬† window.removeEventListener('resize', this.handleResize);\r\n\r\n¬† }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n/* ================= ËµõÂçöÊúãÂÖã‰∏ªÈ¢òÂèòÈáè ================= */\r\n@bg-dark: #0f1219;\r\n@bg-panel: rgba(26, 31, 44, 0.7);\r\n@bg-message-other: rgba(255, 255, 255, 0.05);\r\n@primary-color: #00f2ff; /* ËµõÂçöÈùí */\r\n@accent-color: #7d2ae8;  /* ÈúìËôπÁ¥´ */\r\n@text-main: #e2e8f0;\r\n@text-sub: #94a3b8;\r\n@border-color: rgba(255, 255, 255, 0.08);\r\n\r\n/* ================= Âü∫Á°ÄÂ∏ÉÂ±Ä ================= */\r\n.chat-app {\r\n  display: flex;\r\n  height: 83vh;\r\n  background-color: @bg-dark;\r\n  font-family: 'Inter', 'Courier New', monospace;\r\n  overflow: hidden;\r\n  position: relative;\r\n  color: @text-main;\r\n}\r\n\r\n/* ËÉåÊôØÁΩëÊ†ºË£ÖÈ•∞ */\r\n.tech-bg-grid {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-image: \r\n    linear-gradient(@border-color 1px, transparent 1px),\r\n    linear-gradient(90deg, @border-color 1px, transparent 1px);\r\n  background-size: 40px 40px;\r\n  opacity: 0.1;\r\n  pointer-events: none;\r\n  z-index: 0;\r\n}\r\n\r\n/* ÁéªÁíÉÊãüÊÄÅÈù¢ÊùøÈÄöÁî®Á±ª */\r\n.glass-panel {\r\n  background: @bg-panel;\r\n  backdrop-filter: blur(12px);\r\n  -webkit-backdrop-filter: blur(12px);\r\n  border-right: 1px solid @border-color;\r\n  box-shadow: 5px 0 20px rgba(0,0,0,0.3);\r\n}\r\n\r\n/* ================= ‰æßËæπÊ†è ================= */\r\n.sidebar {\r\n  width: 280px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 10;\r\n  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  \r\n  &.sidebar-collapsed {\r\n    width: 0 !important;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n.sidebar-title-bar {\r\n  padding: 16px 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid @border-color;\r\n  \r\n  .sidebar-title {\r\n    font-size: 20px;\r\n    font-weight: 800;\r\n    letter-spacing: 2px;\r\n    color: #fff;\r\n    \r\n    .highlight {\r\n      color: @primary-color;\r\n      text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);\r\n    }\r\n  }\r\n}\r\n\r\n/* ÊêúÁ¥¢Ê°Ü */\r\n.sidebar-search {\r\n  padding: 16px;\r\n  \r\n  ::v-deep .tech-input-search .el-input__inner {\r\n    background: rgba(0, 0, 0, 0.3);\r\n    border: 1px solid @border-color;\r\n    color: #fff;\r\n    border-radius: 4px;\r\n    height: 36px;\r\n    &:focus {\r\n      border-color: @primary-color;\r\n      box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);\r\n    }\r\n  }\r\n  \r\n  ::v-deep .el-input__icon {\r\n    color: @text-sub;\r\n  }\r\n}\r\n\r\n/* ÂØºËà™ËèúÂçï */\r\n.tech-menu {\r\n  background: transparent !important;\r\n  border-right: none !important;\r\n  \r\n  ::v-deep .el-menu-item {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    color: @text-sub;\r\n    border-left: 3px solid transparent;\r\n    transition: all 0.3s;\r\n    \r\n    i { color: @text-sub; font-size: 18px; margin-right: 10px; }\r\n    \r\n    &:hover, &:focus {\r\n      background: rgba(255, 255, 255, 0.05) !important;\r\n      color: #fff;\r\n      i { color: #fff; }\r\n    }\r\n    \r\n    &.is-active {\r\n      background: linear-gradient(90deg, rgba(0, 242, 255, 0.1), transparent) !important;\r\n      color: @primary-color;\r\n      border-left-color: @primary-color;\r\n      text-shadow: 0 0 8px rgba(0, 242, 255, 0.4);\r\n      i { color: @primary-color; }\r\n    }\r\n  }\r\n}\r\n\r\n/* ËÅîÁ≥ª‰∫∫ÂàóË°® */\r\n.sidebar-list {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  \r\n  .sidebar-list-title {\r\n    font-size: 10px;\r\n    color: @text-sub;\r\n    padding: 10px 20px;\r\n    letter-spacing: 1px;\r\n    opacity: 0.7;\r\n  }\r\n  \r\n  .sidebar-list-scroll {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 0 10px;\r\n  }\r\n}\r\n\r\n.contact-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px;\r\n  margin-bottom: 4px;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  border: 1px solid transparent;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.03);\r\n    border-color: rgba(255, 255, 255, 0.05);\r\n  }\r\n  \r\n  &.active {\r\n    background: rgba(125, 42, 232, 0.15);\r\n    border-color: rgba(125, 42, 232, 0.3);\r\n    \r\n    .contact-name { color: @primary-color; }\r\n  }\r\n}\r\n\r\n.avatar-wrap {\r\n  position: relative;\r\n  margin-right: 12px;\r\n  \r\n  .avatar {\r\n    width: 42px;\r\n    height: 42px;\r\n    border-radius: 8px; /* ÊñπÂΩ¢ÂúÜËßíÊõ¥ÂÖ∑ÁßëÊäÄÊÑü */\r\n    border: 1px solid rgba(255,255,255,0.1);\r\n    object-fit: cover;\r\n  }\r\n  \r\n  .status-dot {\r\n    position: absolute;\r\n    bottom: -2px;\r\n    right: -2px;\r\n    width: 10px;\r\n    height: 10px;\r\n    border-radius: 50%;\r\n    border: 2px solid @bg-dark;\r\n    \r\n    &.online { background: #10b981; box-shadow: 0 0 5px #10b981; }\r\n    &.offline { background: #64748b; }\r\n  }\r\n}\r\n\r\n.contact-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n  \r\n  .contact-top {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 4px;\r\n    \r\n    .contact-name { font-size: 14px; font-weight: 600; color: #fff; }\r\n    .contact-time { font-size: 11px; color: @text-sub; font-family: 'Consolas', monospace; }\r\n  }\r\n  \r\n  .contact-bottom {\r\n    .msg-preview { font-size: 12px; color: @text-sub; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\r\n  }\r\n}\r\n\r\n/* ‰æßËæπÊ†èÂ∫ïÈÉ®Áî®Êà∑ */\r\n.sidebar-account {\r\n  padding: 16px;\r\n  background: rgba(0,0,0,0.2);\r\n  border-top: 1px solid @border-color;\r\n  display: flex;\r\n  align-items: center;\r\n  \r\n  .account-info {\r\n    flex: 1;\r\n    margin-left: 10px;\r\n    \r\n    .account-name { font-size: 14px; color: #fff; font-weight: bold; }\r\n    .account-status { font-size: 10px; color: @primary-color; margin-top: 2px; letter-spacing: 1px; }\r\n  }\r\n}\r\n\r\n/* ================= ‰∏ªËÅäÂ§©Âå∫ ================= */\r\n.chat-main {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: rgba(15, 18, 25, 0.6); /* ÈÄèÂá∫‰∏ÄÁÇπËÉåÊôØÁΩëÊ†º */\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n/* ËÅäÂ§©Â§¥ÈÉ® */\r\n.chat-header {\r\n  height: 64px;\r\n  padding: 0 24px;\r\n  border-bottom: 1px solid @border-color;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  \r\n  .chat-header-name {\r\n    font-size: 16px;\r\n    color: #fff;\r\n    font-weight: 600;\r\n    letter-spacing: 1px;\r\n  }\r\n  \r\n  .chat-header-status {\r\n    font-size: 12px;\r\n    color: @text-sub;\r\n    margin-top: 2px;\r\n    font-family: 'Consolas', monospace;\r\n  }\r\n}\r\n\r\n/* ÁßëÊäÄÊÑüÊåâÈíÆÈÄöÁî® */\r\n.tech-btn-icon {\r\n  background: transparent !important;\r\n  border: 1px solid rgba(255,255,255,0.1) !important;\r\n  color: @text-sub !important;\r\n  transition: all 0.3s;\r\n  \r\n  &:hover {\r\n    color: @primary-color !important;\r\n    border-color: @primary-color !important;\r\n    box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);\r\n    background: rgba(0, 242, 255, 0.05) !important;\r\n  }\r\n  \r\n  &.danger:hover {\r\n    color: #ff4d4f !important;\r\n    border-color: #ff4d4f !important;\r\n    box-shadow: 0 0 10px rgba(255, 77, 79, 0.2);\r\n  }\r\n}\r\n\r\n/* ËÅäÂ§©ÂÜÖÂÆπÂå∫ */\r\n.chat-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n  \r\n  .chat-date-divider {\r\n    text-align: center;\r\n    margin: 20px 0;\r\n    \r\n    span {\r\n      background: rgba(255,255,255,0.05);\r\n      padding: 4px 12px;\r\n      border-radius: 4px;\r\n      font-size: 11px;\r\n      color: @text-sub;\r\n      font-family: 'Consolas', monospace;\r\n      border: 1px solid rgba(255,255,255,0.05);\r\n    }\r\n  }\r\n}\r\n\r\n/* Ê∂àÊÅØÊ∞îÊ≥° */\r\n.chat-message {\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  \r\n  &.self {\r\n    flex-direction: row-reverse;\r\n    .msg-content-wrap { align-items: flex-end; }\r\n  }\r\n  \r\n  .msg-avatar {\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 6px;\r\n    border: 1px solid rgba(255,255,255,0.1);\r\n    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\r\n  }\r\n  \r\n  .msg-content-wrap {\r\n    max-width: 70%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin: 0 12px;\r\n  }\r\n  \r\n  .msg-meta {\r\n    margin-bottom: 6px;\r\n    .msg-name { color: @text-sub; font-size: 12px; margin-right: 8px; }\r\n    .msg-time { color: rgba(255,255,255,0.3); font-size: 11px; font-family: monospace; }\r\n  }\r\n  \r\n  .msg-bubble {\r\n    padding: 12px 16px;\r\n    position: relative;\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    word-break: break-all;\r\n    \r\n    /* ÂØπÊñπÊ∞îÊ≥° */\r\n    &.left {\r\n      background: @bg-message-other;\r\n      border: 1px solid rgba(255,255,255,0.08);\r\n      color: @text-main;\r\n      border-radius: 0 12px 12px 12px;\r\n      \r\n      &:before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0; left: -4px;\r\n        width: 8px; height: 8px;\r\n        border-top: 1px solid rgba(255,255,255,0.08);\r\n        border-left: 1px solid rgba(255,255,255,0.08);\r\n        background: inherit;\r\n        transform: rotate(-45deg);\r\n      }\r\n    }\r\n    \r\n    /* Ëá™Â∑±Ê∞îÊ≥° */\r\n    &.right {\r\n      background: linear-gradient(135deg, rgba(0, 242, 255, 0.1), rgba(125, 42, 232, 0.15));\r\n      border: 1px solid rgba(0, 242, 255, 0.3);\r\n      color: #fff;\r\n      border-radius: 12px 0 12px 12px;\r\n      box-shadow: 0 0 15px rgba(0, 242, 255, 0.05);\r\n      \r\n      &:before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0; right: -4px;\r\n        width: 8px; height: 8px;\r\n        border-top: 1px solid rgba(0, 242, 255, 0.3);\r\n        border-right: 1px solid rgba(0, 242, 255, 0.3);\r\n        background: rgba(125, 42, 232, 0.15); /* Match gradient end */\r\n        transform: rotate(45deg);\r\n      }\r\n    }\r\n    \r\n    .msg-img {\r\n      max-width: 240px;\r\n      border-radius: 4px;\r\n      border: 1px solid rgba(255,255,255,0.1);\r\n    }\r\n    \r\n    .msg-file-meta {\r\n      font-size: 10px;\r\n      color: rgba(255,255,255,0.5);\r\n      margin-top: 4px;\r\n      letter-spacing: 1px;\r\n    }\r\n  }\r\n  \r\n  .msg-meta-bottom {\r\n    margin-top: 6px;\r\n    font-size: 11px;\r\n    color: rgba(255,255,255,0.3);\r\n    font-family: monospace;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 5px;\r\n  }\r\n}\r\n\r\n/* Ê≠£Âú®ËæìÂÖ•Âä®Áîª */\r\n.typing-bubble {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding: 16px !important;\r\n}\r\n.typing-dot {\r\n  width: 4px; height: 4px;\r\n  background: @primary-color;\r\n  border-radius: 50%;\r\n  animation: typing 1.4s infinite ease-in-out both;\r\n  \r\n  &:nth-child(1) { animation-delay: -0.32s; }\r\n  &:nth-child(2) { animation-delay: -0.16s; }\r\n}\r\n@keyframes typing {\r\n  0%, 80%, 100% { transform: scale(0); }\r\n  40% { transform: scale(1); }\r\n}\r\n\r\n/* Â∫ïÈÉ®ËæìÂÖ•Ê°Ü */\r\n.chat-footer {\r\n  padding: 16px 24px;\r\n  border-top: 1px solid @border-color;\r\n  background: @bg-panel;\r\n  \r\n  .chat-footer-actions {\r\n    margin-bottom: 12px;\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .chat-footer-input {\r\n    display: flex;\r\n    align-items: flex-end;\r\n    gap: 12px;\r\n    \r\n    .input-wrapper {\r\n      flex: 1;\r\n      background: rgba(0,0,0,0.3);\r\n      border: 1px solid @border-color;\r\n      border-radius: 8px;\r\n      padding: 4px;\r\n      transition: all 0.3s;\r\n      \r\n      &:focus-within {\r\n        border-color: @primary-color;\r\n        box-shadow: 0 0 10px rgba(0, 242, 255, 0.1);\r\n      }\r\n    }\r\n    \r\n    .send-btn {\r\n      width: 42px; height: 42px;\r\n      background: linear-gradient(135deg, @primary-color, @accent-color);\r\n      border: none;\r\n      box-shadow: 0 4px 10px rgba(0, 242, 255, 0.3);\r\n      font-size: 18px;\r\n      \r\n      &:hover {\r\n        transform: translateY(-2px);\r\n        box-shadow: 0 6px 15px rgba(0, 242, 255, 0.5);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* Ê∑±Â∫¶Ë¶ÜÁõñËæìÂÖ•Ê°ÜÊ†∑Âºè */\r\n::v-deep .tech-textarea .el-textarea__inner {\r\n  background: transparent !important;\r\n  border: none !important;\r\n  color: #fff !important;\r\n  font-family: inherit;\r\n  box-shadow: none !important;\r\n  \r\n  &::placeholder { color: rgba(255,255,255,0.3); }\r\n}\r\n\r\n/* Badge Ê†∑ÂºèË¶ÜÁõñ */\r\n::v-deep .tech-badge .el-badge__content {\r\n  background-color: #ff4d4f;\r\n  border: none;\r\n  box-shadow: 0 0 5px #ff4d4f;\r\n  color: #fff;\r\n}\r\n\r\n/* Ëá™ÂÆö‰πâÊªöÂä®Êù° */\r\n.custom-scrollbar {\r\n  &::-webkit-scrollbar { width: 4px; }\r\n  &::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }\r\n  &::-webkit-scrollbar-track { background: transparent; }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .chat-app { height: 100vh; }\r\n  .sidebar { position: absolute; height: 100%; box-shadow: 10px 0 30px rgba(0,0,0,0.5); }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}