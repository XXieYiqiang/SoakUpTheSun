{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _store = _interopRequireDefault(require(\"@/store\"));\nvar _router = _interopRequireDefault(require(\"@/router\"));\nvar _auth = require(\"@/utils/auth\");\nconst service = _axios.default.create({\n  withCredentials: true,\n  timeout: 1000 * 60 * 10\n});\n\n// 请求拦截\nservice.interceptors.request.use(config => {\n  config.headers['Authorization'] = (0, _auth.getTokenType)() + ' ' + (0, _auth.getToken)();\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截\nservice.interceptors.response.use(response => {\n  console.log('response==', response);\n  if (response.data.code !== 200) {\n    if (response.data.code === 401) {\n      // 回退到登录页\n      _router.default.push('/login');\n    } else if (response.data.code === '3005' || response.data.code === '3007') {\n      // 登录过期 回退到登录页\n    } else {\n      // 错误提示\n      // Notify({ type: 'danger', message: response.data.message })\n      // return response\n    }\n    return response;\n    // return Promise.reject(new Error(response.data.message || 'Error'))\n  } else {\n    return response;\n  }\n}, error => {\n  // 错误提示\n  return Promise.reject(error);\n});\nvar _default = exports.default = service;","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_store","_router","_auth","service","axios","create","withCredentials","timeout","interceptors","request","use","config","headers","getTokenType","getToken","error","Promise","reject","response","console","log","data","code","router","push","_default","exports","default"],"sources":["C:/Users/Administrator/Desktop/GimChat/gimChatVue/src/utils/request.js"],"sourcesContent":["\r\nimport axios from 'axios'\r\nimport store from '@/store'\r\nimport router from '@/router'\r\nimport { getToken, getTokenType } from '@/utils/auth'\r\n\r\nconst service = axios.create({\r\n  withCredentials: true,\r\n  timeout: 1000*60*10\r\n})\r\n\r\n// 请求拦截\r\nservice.interceptors.request.use(\r\n  config => {\r\n    config.headers['Authorization'] = getTokenType() + ' ' + getToken()\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 响应拦截\r\nservice.interceptors.response.use(\r\n  response => {\r\n\r\n    console.log('response==',response)\r\n    if (response.data.code !== 200) {\r\n      if (response.data.code === 401) {\r\n        // 回退到登录页\r\n        router.push('/login')\r\n      } else if (\r\n        response.data.code === '3005' ||\r\n        response.data.code === '3007'\r\n      ) {\r\n        // 登录过期 回退到登录页\r\n      } else {\r\n        // 错误提示\r\n        // Notify({ type: 'danger', message: response.data.message })\r\n        // return response\r\n      }\r\n      return response\r\n      // return Promise.reject(new Error(response.data.message || 'Error'))\r\n    } else {\r\n      return response\r\n    }\r\n  },\r\n  error => {\r\n    // 错误提示\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";;;;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAEA,MAAMI,OAAO,GAAGC,cAAK,CAACC,MAAM,CAAC;EAC3BC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE,IAAI,GAAC,EAAE,GAAC;AACnB,CAAC,CAAC;;AAEF;AACAJ,OAAO,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAI;EACRA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,IAAAC,kBAAY,EAAC,CAAC,GAAG,GAAG,GAAG,IAAAC,cAAQ,EAAC,CAAC;EACnE,OAAOH,MAAM;AACf,CAAC,EACDI,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAZ,OAAO,CAACK,YAAY,CAACU,QAAQ,CAACR,GAAG,CAC/BQ,QAAQ,IAAI;EAEVC,OAAO,CAACC,GAAG,CAAC,YAAY,EAACF,QAAQ,CAAC;EAClC,IAAIA,QAAQ,CAACG,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;IAC9B,IAAIJ,QAAQ,CAACG,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;MAC9B;MACAC,eAAM,CAACC,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC,MAAM,IACLN,QAAQ,CAACG,IAAI,CAACC,IAAI,KAAK,MAAM,IAC7BJ,QAAQ,CAACG,IAAI,CAACC,IAAI,KAAK,MAAM,EAC7B;MACA;IAAA,CACD,MAAM;MACL;MACA;MACA;IAAA;IAEF,OAAOJ,QAAQ;IACf;EACF,CAAC,MAAM;IACL,OAAOA,QAAQ;EACjB;AACF,CAAC,EACDH,KAAK,IAAI;EACP;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAAA,IAAAU,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcxB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}