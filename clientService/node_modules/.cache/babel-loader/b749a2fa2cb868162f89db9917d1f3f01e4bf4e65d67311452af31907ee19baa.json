{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _onlyoffice = require(\"_r/onlyoffice.js\");\nvar _default = exports.default = {\n  name: 'AddFileDialog',\n  data() {\n    return {\n      visible: false,\n      //  对话框是否可见\n      form: {\n        fileName: ''\n      },\n      formRules: {\n        fileName: [{\n          required: true,\n          message: '请输入文件名称',\n          trigger: 'blur'\n        }]\n      },\n      sureBtnLoading: false\n    };\n  },\n  methods: {\n    /**\r\n     * 新建文件对话框 | 对话框关闭的回调\r\n     * @description 关闭对话框，重置表单\r\n     */\n    handleDialogClose() {\n      this.$refs['addFileForm'].resetFields();\n      this.visible = false;\n      this.callback('cancel');\n    },\n    /**\r\n     * 新建文件对话框 | 确定按钮点击事件\r\n     * @description 校验表单，校验通过后调用新建文件接口\r\n     * @param {string} formName 表单ref值\r\n     */\n    handleDialogSure(formName) {\n      this.sureBtnLoading = true;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          (0, _onlyoffice.createOfficeFile)({\n            extendName: this.extendName,\n            filePath: this.filePath,\n            fileName: this.form.fileName\n          }).then(res => {\n            this.sureBtnLoading = false;\n            if (res.success && res.code === 0) {\n              this.$message.success('文件创建成功');\n              this.$refs[formName].resetFields();\n              this.visible = false;\n              this.callback('confirm');\n            } else {\n              this.$message.warning(res.message);\n            }\n          }).catch(() => {\n            this.sureBtnLoading = false;\n          });\n        } else {\n          this.sureBtnLoading = false;\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["_onlyoffice","require","_default","exports","default","name","data","visible","form","fileName","formRules","required","message","trigger","sureBtnLoading","methods","handleDialogClose","$refs","resetFields","callback","handleDialogSure","formName","validate","valid","createOfficeFile","extendName","filePath","then","res","success","code","$message","warning","catch"],"sources":["src/components/file/dialog/addFile/Dialog.vue"],"sourcesContent":["<template>\r\n\t<!-- 新建文件对话框 -->\r\n\t<el-dialog\r\n\t\ttitle=\"新建文件\"\r\n\t\t:visible.sync=\"visible\"\r\n\t\t:close-on-click-modal=\"false\"\r\n\t\twidth=\"550px\"\r\n\t\t@close=\"handleDialogClose\"\r\n\t>\r\n\t\t<el-form\r\n\t\t\tclass=\"add-file-form\"\r\n\t\t\t:model=\"form\"\r\n\t\t\t:rules=\"formRules\"\r\n\t\t\tref=\"addFileForm\"\r\n\t\t\tlabel-width=\"100px\"\r\n\t\t\tlabel-position=\"top\"\r\n\t\t>\r\n\t\t\t<el-form-item label=\"文件名称\" prop=\"fileName\">\r\n\t\t\t\t<el-input\r\n\t\t\t\t\tv-model=\"form.fileName\"\r\n\t\t\t\t\tplaceholder=\"请输入文件名称\"\r\n\t\t\t\t\ttype=\"textarea\"\r\n\t\t\t\t\tautosize\r\n\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\tshow-word-limit\r\n\t\t\t\t></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"handleDialogClose\">取 消</el-button>\r\n\t\t\t<el-button\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\t:loading=\"sureBtnLoading\"\r\n\t\t\t\t@click=\"handleDialogSure('addFileForm')\"\r\n\t\t\t\t>确 定</el-button\r\n\t\t\t>\r\n\t\t</div>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { createOfficeFile } from '_r/onlyoffice.js'\r\n\r\nexport default {\r\n\tname: 'AddFileDialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvisible: false, //  对话框是否可见\r\n\t\t\tform: {\r\n\t\t\t\tfileName: ''\r\n\t\t\t},\r\n\t\t\tformRules: {\r\n\t\t\t\tfileName: [\r\n\t\t\t\t\t{ required: true, message: '请输入文件名称', trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tsureBtnLoading: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 新建文件对话框 | 对话框关闭的回调\r\n\t\t * @description 关闭对话框，重置表单\r\n\t\t */\r\n\t\thandleDialogClose() {\r\n\t\t\tthis.$refs['addFileForm'].resetFields()\r\n\t\t\tthis.visible = false\r\n\t\t\tthis.callback('cancel')\r\n\t\t},\r\n\t\t/**\r\n\t\t * 新建文件对话框 | 确定按钮点击事件\r\n\t\t * @description 校验表单，校验通过后调用新建文件接口\r\n\t\t * @param {string} formName 表单ref值\r\n\t\t */\r\n\t\thandleDialogSure(formName) {\r\n\t\t\tthis.sureBtnLoading = true\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tcreateOfficeFile({\r\n\t\t\t\t\t\textendName: this.extendName,\r\n\t\t\t\t\t\tfilePath: this.filePath,\r\n\t\t\t\t\t\tfileName: this.form.fileName\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\t\t\tif (res.success && res.code === 0) {\r\n\t\t\t\t\t\t\t\tthis.$message.success('文件创建成功')\r\n\t\t\t\t\t\t\t\tthis.$refs[formName].resetFields()\r\n\t\t\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\t\t\tthis.callback('confirm')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.warning(res.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"mappings":";;;;;;AAyCA,IAAAA,WAAA,GAAAC,OAAA;AAAA,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,IAAA;QACAC,QAAA;MACA;MACAC,SAAA;QACAD,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACA;AACA;AACA;AACA;IACAC,kBAAA;MACA,KAAAC,KAAA,gBAAAC,WAAA;MACA,KAAAX,OAAA;MACA,KAAAY,QAAA;IACA;IACA;AACA;AACA;AACA;AACA;IACAC,iBAAAC,QAAA;MACA,KAAAP,cAAA;MACA,KAAAG,KAAA,CAAAI,QAAA,EAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,IAAAC,4BAAA;YACAC,UAAA,OAAAA,UAAA;YACAC,QAAA,OAAAA,QAAA;YACAjB,QAAA,OAAAD,IAAA,CAAAC;UACA,GACAkB,IAAA,CAAAC,GAAA;YACA,KAAAd,cAAA;YACA,IAAAc,GAAA,CAAAC,OAAA,IAAAD,GAAA,CAAAE,IAAA;cACA,KAAAC,QAAA,CAAAF,OAAA;cACA,KAAAZ,KAAA,CAAAI,QAAA,EAAAH,WAAA;cACA,KAAAX,OAAA;cACA,KAAAY,QAAA;YACA;cACA,KAAAY,QAAA,CAAAC,OAAA,CAAAJ,GAAA,CAAAhB,OAAA;YACA;UACA,GACAqB,KAAA;YACA,KAAAnB,cAAA;UACA;QACA;UACA,KAAAA,cAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}