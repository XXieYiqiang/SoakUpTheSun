{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _file = require(\"@/api/file\");\nvar _default = exports.default = {\n  name: 'RenameFileDialog',\n  data() {\n    return {\n      visible: false,\n      //  对话框是否可见\n      form: {\n        fileName: ''\n      },\n      formRules: {\n        fileName: [{\n          required: true,\n          message: '请输入文件名称',\n          trigger: 'blur'\n        }]\n      },\n      sureBtnLoading: false\n    };\n  },\n  methods: {\n    /**\r\n     * 重命名文件对话框 | 对话框打开的回调\r\n     * @description 表单项回显原本的文件名\r\n     */\n    handleDialogOpen() {\n      this.form.fileName = this.oldFileName;\n    },\n    /**\r\n     * 重命名文件对话框 | 对话框关闭的回调\r\n     * @description 关闭对话框，重置表单\r\n     */\n    handleDialogClose() {\n      this.$refs['renameFileForm'].resetFields();\n      this.visible = false;\n      this.callback('cancel');\n    },\n    /**\r\n     * 重命名文件对话框 | 确定按钮点击事件\r\n     * @description 校验表单，校验通过后调用重命名文件接口\r\n     * @param {string} formName 表单ref值\r\n     */\n    handleDialogSure(formName) {\n      this.sureBtnLoading = true;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          (0, _file.renameFile)({\n            userFileId: this.userFileId,\n            fileName: this.form.fileName\n          }).then(res => {\n            this.sureBtnLoading = false;\n            console.log('res====handleDialogSure\t');\n            console.log(res);\n            if (res.data.code === 200) {\n              this.$message.success('重命名成功');\n              this.$refs[formName].resetFields();\n              this.visible = false;\n              this.callback('confirm');\n            } else {\n              this.$message.error(res.message);\n            }\n          }).catch(() => {\n            this.sureBtnLoading = false;\n          });\n        } else {\n          this.sureBtnLoading = false;\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["_file","require","_default","exports","default","name","data","visible","form","fileName","formRules","required","message","trigger","sureBtnLoading","methods","handleDialogOpen","oldFileName","handleDialogClose","$refs","resetFields","callback","handleDialogSure","formName","validate","valid","renameFile","userFileId","then","res","console","log","code","$message","success","error","catch"],"sources":["src/components/file/dialog/renameFile/Dialog.vue"],"sourcesContent":["<template>\r\n\t<!-- 重命名文件对话框 -->\r\n\t<el-dialog\r\n\t\ttitle=\"重命名文件\"\r\n\t\t:visible.sync=\"visible\"\r\n\t\t:close-on-click-modal=\"false\"\r\n\t\twidth=\"550px\"\r\n\t\t@open=\"handleDialogOpen\"\r\n\t\t@close=\"handleDialogClose\"\r\n\t>\r\n\t\t<el-form\r\n\t\t\tclass=\"rename-file-form\"\r\n\t\t\t:model=\"form\"\r\n\t\t\t:rules=\"formRules\"\r\n\t\t\tref=\"renameFileForm\"\r\n\t\t\tlabel-width=\"100px\"\r\n\t\t\tlabel-position=\"top\"\r\n\t\t>\r\n\t\t\t<el-form-item label=\"文件名称\" prop=\"fileName\">\r\n\t\t\t\t<el-input\r\n\t\t\t\t\tv-model=\"form.fileName\"\r\n\t\t\t\t\tplaceholder=\"请输入文件名称\"\r\n\t\t\t\t\ttype=\"textarea\"\r\n\t\t\t\t\tautosize\r\n\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\tshow-word-limit\r\n\t\t\t\t></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"handleDialogClose\">取 消</el-button>\r\n\t\t\t<el-button\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\t:loading=\"sureBtnLoading\"\r\n\t\t\t\t@click=\"handleDialogSure('renameFileForm')\"\r\n\t\t\t\t>确 定</el-button\r\n\t\t\t>\r\n\t\t</div>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { renameFile } from '@/api/file'\r\n\r\nexport default {\r\n\tname: 'RenameFileDialog',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvisible: false, //  对话框是否可见\r\n\t\t\tform: {\r\n\t\t\t\tfileName: ''\r\n\t\t\t},\r\n\t\t\tformRules: {\r\n\t\t\t\tfileName: [\r\n\t\t\t\t\t{ required: true, message: '请输入文件名称', trigger: 'blur' }\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tsureBtnLoading: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 重命名文件对话框 | 对话框打开的回调\r\n\t\t * @description 表单项回显原本的文件名\r\n\t\t */\r\n\t\thandleDialogOpen() {\r\n\t\t\tthis.form.fileName = this.oldFileName\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重命名文件对话框 | 对话框关闭的回调\r\n\t\t * @description 关闭对话框，重置表单\r\n\t\t */\r\n\t\thandleDialogClose() {\r\n\t\t\tthis.$refs['renameFileForm'].resetFields()\r\n\t\t\tthis.visible = false\r\n\t\t\tthis.callback('cancel')\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重命名文件对话框 | 确定按钮点击事件\r\n\t\t * @description 校验表单，校验通过后调用重命名文件接口\r\n\t\t * @param {string} formName 表单ref值\r\n\t\t */\r\n\t\thandleDialogSure(formName) {\r\n\t\t\tthis.sureBtnLoading = true\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\trenameFile({\r\n\t\t\t\t\t\tuserFileId: this.userFileId,\r\n\t\t\t\t\t\tfileName: this.form.fileName\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\t\t\tconsole.log('res====handleDialogSure\t')\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif (res.data.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.$message.success('重命名成功')\r\n\t\t\t\t\t\t\t\tthis.$refs[formName].resetFields()\r\n\t\t\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\t\t\tthis.callback('confirm')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error(res.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sureBtnLoading = false\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"mappings":";;;;;;AA0CA,IAAAA,KAAA,GAAAC,OAAA;AAAA,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,IAAA;QACAC,QAAA;MACA;MACAC,SAAA;QACAD,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACA;AACA;AACA;AACA;IACAC,iBAAA;MACA,KAAAR,IAAA,CAAAC,QAAA,QAAAQ,WAAA;IACA;IACA;AACA;AACA;AACA;IACAC,kBAAA;MACA,KAAAC,KAAA,mBAAAC,WAAA;MACA,KAAAb,OAAA;MACA,KAAAc,QAAA;IACA;IACA;AACA;AACA;AACA;AACA;IACAC,iBAAAC,QAAA;MACA,KAAAT,cAAA;MACA,KAAAK,KAAA,CAAAI,QAAA,EAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,IAAAC,gBAAA;YACAC,UAAA,OAAAA,UAAA;YACAlB,QAAA,OAAAD,IAAA,CAAAC;UACA,GACAmB,IAAA,CAAAC,GAAA;YACA,KAAAf,cAAA;YACAgB,OAAA,CAAAC,GAAA;YACAD,OAAA,CAAAC,GAAA,CAAAF,GAAA;YACA,IAAAA,GAAA,CAAAvB,IAAA,CAAA0B,IAAA;cACA,KAAAC,QAAA,CAAAC,OAAA;cACA,KAAAf,KAAA,CAAAI,QAAA,EAAAH,WAAA;cACA,KAAAb,OAAA;cACA,KAAAc,QAAA;YACA;cACA,KAAAY,QAAA,CAAAE,KAAA,CAAAN,GAAA,CAAAjB,OAAA;YACA;UACA,GACAwB,KAAA;YACA,KAAAtB,cAAA;UACA;QACA;UACA,KAAAA,cAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}