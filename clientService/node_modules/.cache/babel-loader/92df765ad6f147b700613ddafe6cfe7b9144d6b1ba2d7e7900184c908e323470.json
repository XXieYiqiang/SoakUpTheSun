{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.reduce.js\");\n/**\r\n * ðŸ“¬ Vuex ç«™å†…ä¿¡æ¶ˆæ¯æ¨¡å—\r\n * - å­˜å‚¨æ¯ä¸ªè”ç³»äººæˆ–ç¾¤ç»„çš„æ¶ˆæ¯åˆ—è¡¨\r\n * - ç®¡ç†æ¯ä¸ªä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ•°é‡\r\n */\nvar _default = exports.default = {\n  namespaced: true,\n  state: {\n    messageMap: {},\n    // { contactId: [message, ...] } æ¯ä¸ªä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨\n    unreadMap: {} // { contactId: unreadCount } æ¯ä¸ªä¼šè¯çš„æœªè¯»æ•°\n  },\n  mutations: {\n    /**\r\n     * âœ… å‘æŸä¸ªä¼šè¯è¿½åŠ ä¸€æ¡æ¶ˆæ¯\r\n     * @param {String} contactId ä¼šè¯ IDï¼ˆç”¨æˆ·ID æˆ– ç¾¤IDï¼‰\r\n     * @param {Object} message æ¶ˆæ¯å¯¹è±¡\r\n     */\n    ADD_MESSAGE(state, {\n      contactId,\n      message\n    }) {\n      if (!state.messageMap[contactId]) {\n        console.log(`[Vuex:message] åˆå§‹åŒ–ä¼šè¯æ¶ˆæ¯åˆ—è¡¨: ${contactId}`);\n        state.messageMap[contactId] = [];\n      }\n      console.log(`[Vuex:message] âž• æ·»åŠ æ¶ˆæ¯åˆ° ${contactId}:`, message);\n      state.messageMap[contactId].push(message);\n    },\n    /**\r\n     * âœ… æŒ‡å®šä¼šè¯æœªè¯»æ•° +1\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\n    INCREMENT_UNREAD(state, contactId) {\n      if (!state.unreadMap[contactId]) {\n        console.log(`[Vuex:message] åˆå§‹åŒ–æœªè¯»è®¡æ•°: ${contactId}`);\n        state.unreadMap[contactId] = 0;\n      }\n      state.unreadMap[contactId]++;\n      console.log(`[Vuex:message] ðŸ”´ æœªè¯»æ•° +1 (${contactId}):`, state.unreadMap[contactId]);\n    },\n    /**\r\n     * âœ… é‡ç½®æŒ‡å®šä¼šè¯æœªè¯»æ¶ˆæ¯æ•°ä¸º 0ï¼ˆå·²è¯»ï¼‰\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\n    RESET_UNREAD(state, contactId) {\n      console.log(`[Vuex:message] âœ… æ¸…é™¤æœªè¯»æ•°: ${contactId}`);\n      state.unreadMap[contactId] = 0;\n    },\n    /**\r\n     * âœ… æ¸…ç©ºæŒ‡å®šä¼šè¯æ‰€æœ‰æ¶ˆæ¯\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\n    CLEAR_MESSAGES(state, contactId) {\n      console.warn(`[Vuex:message] âš ï¸ æ¸…ç©ºæ¶ˆæ¯: ${contactId}`);\n      state.messageMap[contactId] = [];\n    }\n  },\n  getters: {\n    /**\r\n     * ðŸŸ¢ èŽ·å–æŒ‡å®šä¼šè¯çš„æ¶ˆæ¯æ•°ç»„\r\n     */\n    getMessages: state => contactId => {\n      return state.messageMap[contactId] || [];\n    },\n    /**\r\n     * ðŸŸ¡ èŽ·å–æŒ‡å®šä¼šè¯çš„æœªè¯»æ•°\r\n     */\n    getUnread: state => contactId => {\n      return state.unreadMap[contactId] || 0;\n    },\n    /**\r\n     * ðŸ”´ èŽ·å–æ‰€æœ‰ä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ€»å’Œ\r\n     */\n    getTotalUnread: state => {\n      const total = Object.values(state.unreadMap).reduce((a, b) => a + b, 0);\n      console.log(`[Vuex:message] ðŸ”¢ æ€»æœªè¯»æ•°: ${total}`);\n      return total;\n    }\n  }\n};","map":{"version":3,"names":["_default","exports","default","namespaced","state","messageMap","unreadMap","mutations","ADD_MESSAGE","contactId","message","console","log","push","INCREMENT_UNREAD","RESET_UNREAD","CLEAR_MESSAGES","warn","getters","getMessages","getUnread","getTotalUnread","total","Object","values","reduce","a","b"],"sources":["C:/Users/Administrator/Desktop/GimChat/gimChatVue/src/store/module/message.js"],"sourcesContent":["/**\r\n * ðŸ“¬ Vuex ç«™å†…ä¿¡æ¶ˆæ¯æ¨¡å—\r\n * - å­˜å‚¨æ¯ä¸ªè”ç³»äººæˆ–ç¾¤ç»„çš„æ¶ˆæ¯åˆ—è¡¨\r\n * - ç®¡ç†æ¯ä¸ªä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ•°é‡\r\n */\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state: {\r\n    messageMap: {},   // { contactId: [message, ...] } æ¯ä¸ªä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨\r\n    unreadMap: {}     // { contactId: unreadCount } æ¯ä¸ªä¼šè¯çš„æœªè¯»æ•°\r\n  },\r\n\r\n  mutations: {\r\n    /**\r\n     * âœ… å‘æŸä¸ªä¼šè¯è¿½åŠ ä¸€æ¡æ¶ˆæ¯\r\n     * @param {String} contactId ä¼šè¯ IDï¼ˆç”¨æˆ·ID æˆ– ç¾¤IDï¼‰\r\n     * @param {Object} message æ¶ˆæ¯å¯¹è±¡\r\n     */\r\n    ADD_MESSAGE(state, { contactId, message }) {\r\n      if (!state.messageMap[contactId]) {\r\n        console.log(`[Vuex:message] åˆå§‹åŒ–ä¼šè¯æ¶ˆæ¯åˆ—è¡¨: ${contactId}`);\r\n        state.messageMap[contactId] = [];\r\n      }\r\n      console.log(`[Vuex:message] âž• æ·»åŠ æ¶ˆæ¯åˆ° ${contactId}:`, message);\r\n      state.messageMap[contactId].push(message);\r\n    },\r\n\r\n    /**\r\n     * âœ… æŒ‡å®šä¼šè¯æœªè¯»æ•° +1\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\r\n    INCREMENT_UNREAD(state, contactId) {\r\n      if (!state.unreadMap[contactId]) {\r\n        console.log(`[Vuex:message] åˆå§‹åŒ–æœªè¯»è®¡æ•°: ${contactId}`);\r\n        state.unreadMap[contactId] = 0;\r\n      }\r\n      state.unreadMap[contactId]++;\r\n      console.log(`[Vuex:message] ðŸ”´ æœªè¯»æ•° +1 (${contactId}):`, state.unreadMap[contactId]);\r\n    },\r\n\r\n    /**\r\n     * âœ… é‡ç½®æŒ‡å®šä¼šè¯æœªè¯»æ¶ˆæ¯æ•°ä¸º 0ï¼ˆå·²è¯»ï¼‰\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\r\n    RESET_UNREAD(state, contactId) {\r\n      console.log(`[Vuex:message] âœ… æ¸…é™¤æœªè¯»æ•°: ${contactId}`);\r\n      state.unreadMap[contactId] = 0;\r\n    },\r\n\r\n    /**\r\n     * âœ… æ¸…ç©ºæŒ‡å®šä¼šè¯æ‰€æœ‰æ¶ˆæ¯\r\n     * @param {String} contactId ä¼šè¯ ID\r\n     */\r\n    CLEAR_MESSAGES(state, contactId) {\r\n      console.warn(`[Vuex:message] âš ï¸ æ¸…ç©ºæ¶ˆæ¯: ${contactId}`);\r\n      state.messageMap[contactId] = [];\r\n    }\r\n  },\r\n\r\n  getters: {\r\n    /**\r\n     * ðŸŸ¢ èŽ·å–æŒ‡å®šä¼šè¯çš„æ¶ˆæ¯æ•°ç»„\r\n     */\r\n    getMessages: (state) => (contactId) => {\r\n      return state.messageMap[contactId] || [];\r\n    },\r\n\r\n    /**\r\n     * ðŸŸ¡ èŽ·å–æŒ‡å®šä¼šè¯çš„æœªè¯»æ•°\r\n     */\r\n    getUnread: (state) => (contactId) => {\r\n      return state.unreadMap[contactId] || 0;\r\n    },\r\n\r\n    /**\r\n     * ðŸ”´ èŽ·å–æ‰€æœ‰ä¼šè¯çš„æœªè¯»æ¶ˆæ¯æ€»å’Œ\r\n     */\r\n    getTotalUnread: (state) => {\r\n      const total = Object.values(state.unreadMap).reduce((a, b) => a + b, 0);\r\n      console.log(`[Vuex:message] ðŸ”¢ æ€»æœªè¯»æ•°: ${total}`);\r\n      return total;\r\n    }\r\n  }\r\n};\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAJA,IAAAA,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAMe;EACbC,UAAU,EAAE,IAAI;EAEhBC,KAAK,EAAE;IACLC,UAAU,EAAE,CAAC,CAAC;IAAI;IAClBC,SAAS,EAAE,CAAC,CAAC,CAAK;EACpB,CAAC;EAEDC,SAAS,EAAE;IACT;AACJ;AACA;AACA;AACA;IACIC,WAAWA,CAACJ,KAAK,EAAE;MAAEK,SAAS;MAAEC;IAAQ,CAAC,EAAE;MACzC,IAAI,CAACN,KAAK,CAACC,UAAU,CAACI,SAAS,CAAC,EAAE;QAChCE,OAAO,CAACC,GAAG,CAAC,6BAA6BH,SAAS,EAAE,CAAC;QACrDL,KAAK,CAACC,UAAU,CAACI,SAAS,CAAC,GAAG,EAAE;MAClC;MACAE,OAAO,CAACC,GAAG,CAAC,0BAA0BH,SAAS,GAAG,EAAEC,OAAO,CAAC;MAC5DN,KAAK,CAACC,UAAU,CAACI,SAAS,CAAC,CAACI,IAAI,CAACH,OAAO,CAAC;IAC3C,CAAC;IAED;AACJ;AACA;AACA;IACII,gBAAgBA,CAACV,KAAK,EAAEK,SAAS,EAAE;MACjC,IAAI,CAACL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,EAAE;QAC/BE,OAAO,CAACC,GAAG,CAAC,2BAA2BH,SAAS,EAAE,CAAC;QACnDL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,GAAG,CAAC;MAChC;MACAL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,EAAE;MAC5BE,OAAO,CAACC,GAAG,CAAC,6BAA6BH,SAAS,IAAI,EAAEL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,CAAC;IACrF,CAAC;IAED;AACJ;AACA;AACA;IACIM,YAAYA,CAACX,KAAK,EAAEK,SAAS,EAAE;MAC7BE,OAAO,CAACC,GAAG,CAAC,2BAA2BH,SAAS,EAAE,CAAC;MACnDL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,GAAG,CAAC;IAChC,CAAC;IAED;AACJ;AACA;AACA;IACIO,cAAcA,CAACZ,KAAK,EAAEK,SAAS,EAAE;MAC/BE,OAAO,CAACM,IAAI,CAAC,2BAA2BR,SAAS,EAAE,CAAC;MACpDL,KAAK,CAACC,UAAU,CAACI,SAAS,CAAC,GAAG,EAAE;IAClC;EACF,CAAC;EAEDS,OAAO,EAAE;IACP;AACJ;AACA;IACIC,WAAW,EAAGf,KAAK,IAAMK,SAAS,IAAK;MACrC,OAAOL,KAAK,CAACC,UAAU,CAACI,SAAS,CAAC,IAAI,EAAE;IAC1C,CAAC;IAED;AACJ;AACA;IACIW,SAAS,EAAGhB,KAAK,IAAMK,SAAS,IAAK;MACnC,OAAOL,KAAK,CAACE,SAAS,CAACG,SAAS,CAAC,IAAI,CAAC;IACxC,CAAC;IAED;AACJ;AACA;IACIY,cAAc,EAAGjB,KAAK,IAAK;MACzB,MAAMkB,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACpB,KAAK,CAACE,SAAS,CAAC,CAACmB,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC;MACvEhB,OAAO,CAACC,GAAG,CAAC,2BAA2BU,KAAK,EAAE,CAAC;MAC/C,OAAOA,KAAK;IACd;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}