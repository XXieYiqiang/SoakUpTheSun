{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/front/gim-chat/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _store = _interopRequireDefault(require(\"@/store\"));\nvar _auth = require(\"@/utils/auth\");\nconst service = _axios.default.create({\n  withCredentials: true,\n  timeout: 15000\n});\n\n// 请求拦截\nservice.interceptors.request.use(config => {\n  config.headers['Authorization'] = (0, _auth.getTokenType)() + ' ' + (0, _auth.getToken)();\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截\nservice.interceptors.response.use(response => {\n  if (response.data.code !== '200') {\n    if (response.data.code === '3002') {\n      // 回退到登录页\n    } else if (response.data.code === '3005' || response.data.code === '3007') {\n      // 登录过期 回退到登录页\n    } else {\n      // 错误提示\n      // Notify({ type: 'danger', message: response.data.message })\n      // return response\n    }\n    return response;\n    // return Promise.reject(new Error(response.data.message || 'Error'))\n  } else {\n    return response;\n  }\n}, error => {\n  // 错误提示\n  return Promise.reject(error);\n});\nvar _default = exports.default = service;","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_store","_auth","service","axios","create","withCredentials","timeout","interceptors","request","use","config","headers","getTokenType","getToken","error","Promise","reject","response","data","code","_default","exports","default"],"sources":["C:/Users/Administrator/Desktop/GimChat/front/gim-chat/src/utils/request.js"],"sourcesContent":["\r\nimport axios from 'axios'\r\nimport store from '@/store'\r\nimport { getToken, getTokenType } from '@/utils/auth'\r\n\r\nconst service = axios.create({\r\n  withCredentials: true,\r\n  timeout: 15000\r\n})\r\n\r\n// 请求拦截\r\nservice.interceptors.request.use(\r\n  config => {\r\n    config.headers['Authorization'] = getTokenType() + ' ' + getToken()\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 响应拦截\r\nservice.interceptors.response.use(\r\n  response => {\r\n    if (response.data.code !== '200') {\r\n      if (response.data.code === '3002') {\r\n        // 回退到登录页\r\n      } else if (\r\n        response.data.code === '3005' ||\r\n        response.data.code === '3007'\r\n      ) {\r\n        // 登录过期 回退到登录页\r\n      } else {\r\n        // 错误提示\r\n        // Notify({ type: 'danger', message: response.data.message })\r\n        // return response\r\n      }\r\n      return response\r\n      // return Promise.reject(new Error(response.data.message || 'Error'))\r\n    } else {\r\n      return response\r\n    }\r\n  },\r\n  error => {\r\n    // 错误提示\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";;;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAEA,MAAMG,OAAO,GAAGC,cAAK,CAACC,MAAM,CAAC;EAC3BC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE;AACX,CAAC,CAAC;;AAEF;AACAJ,OAAO,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAI;EACRA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,IAAAC,kBAAY,EAAC,CAAC,GAAG,GAAG,GAAG,IAAAC,cAAQ,EAAC,CAAC;EACnE,OAAOH,MAAM;AACf,CAAC,EACDI,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAZ,OAAO,CAACK,YAAY,CAACU,QAAQ,CAACR,GAAG,CAC/BQ,QAAQ,IAAI;EACV,IAAIA,QAAQ,CAACC,IAAI,CAACC,IAAI,KAAK,KAAK,EAAE;IAChC,IAAIF,QAAQ,CAACC,IAAI,CAACC,IAAI,KAAK,MAAM,EAAE;MACjC;IAAA,CACD,MAAM,IACLF,QAAQ,CAACC,IAAI,CAACC,IAAI,KAAK,MAAM,IAC7BF,QAAQ,CAACC,IAAI,CAACC,IAAI,KAAK,MAAM,EAC7B;MACA;IAAA,CACD,MAAM;MACL;MACA;MACA;IAAA;IAEF,OAAOF,QAAQ;IACf;EACF,CAAC,MAAM;IACL,OAAOA,QAAQ;EACjB;AACF,CAAC,EACDH,KAAK,IAAI;EACP;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAAA,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcpB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}