{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _RightBar = _interopRequireDefault(require(\"@/components/RightBar.vue\"));\nvar _user = require(\"@/api/user\");\nvar _default = exports.default = {\n  components: {\n    RightBar: _RightBar.default\n  },\n  data() {\n    return {\n      defaultAvatar: 'https://iknow-pic.cdn.bcebos.com/962bd40735fae6cd17bafbff1db30f2442a70f25',\n      isRightbarCollapsed: true,\n      loginDialogVisible: false,\n      /// ÁôªÂΩïÂØπËØùÊ°ÜÂèØËßÅÊÄß\n      loginForm: {\n        phone: \"\",\n        passWord: \"\"\n      },\n      loginRules: {\n        phone: [{\n          required: true,\n          message: \"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑\",\n          trigger: \"blur\"\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: \"ËØ∑ËæìÂÖ•ÂêàÊ≥ïÁöÑÊâãÊú∫Âè∑\",\n          trigger: \"blur\"\n        }],\n        passWord: [{\n          required: true,\n          message: \"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  computed: {\n    isLogin() {\n      return this.$store.getters['user/isLogin'];\n    },\n    userInfo() {\n      return this.$store.state.user.userInfo || {};\n    }\n  },\n  methods: {\n    async submitLogin() {\n      const that = this;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          // TODO: Êèê‰∫§ÁôªÂΩïÈÄªËæë\n          const param = {\n            ...this.loginForm\n          };\n          try {\n            (0, _user.handleLogin)(param).then(res => {\n              const data = res.data.data;\n              if (res.data.code === 200 && data.token) {\n                const token = data.token;\n                const user = data.userInfo;\n\n                // Â≠òÂÖ• Vuex\n                that.$store.dispatch('user/login', {\n                  token,\n                  userInfo: user\n                });\n                that.loginDialogVisible = false;\n                that.$message.success('ÁôªÂΩïÊàêÂäü');\n              } else {\n                that.loginDialogVisible = false;\n                that.$message.error(res.data.message || 'ÁôªÂΩïÂ§±Ë¥•');\n              }\n            });\n          } catch (e) {\n            console.error(e);\n            that.$message.error('ÁΩëÁªúÈîôËØØÊàñÊúçÂä°ÂºÇÂ∏∏');\n          }\n        }\n      });\n    },\n    /**\r\n     * Áî®Êà∑ÁôªÂΩï\r\n     */\n    async doLogin() {\n      // TODO: ÁôªÂΩïÈÄªËæë\n\n      this.loginDialogVisible = true;\n    },\n    /**\r\n     * Áî®Êà∑ÁôªÂá∫\r\n     */\n    async doLogout() {\n      // TODO: ÁôªÂá∫ÈÄªËæë\n\n      const res = await (0, _user.handleLogout)();\n      if (res && res.data && res.data.code === 200) {\n        this.$store.dispatch('user/logout');\n        this.$message.success('Â∑≤ÁôªÂá∫');\n      } else {\n        this.$message.error(res.data.message);\n      }\n    }\n  }\n};","map":{"version":3,"names":["_RightBar","_interopRequireDefault","require","_user","_default","exports","default","components","RightBar","data","defaultAvatar","isRightbarCollapsed","loginDialogVisible","loginForm","phone","passWord","loginRules","required","message","trigger","pattern","computed","isLogin","$store","getters","userInfo","state","user","methods","submitLogin","that","$refs","validate","valid","param","handleLogin","then","res","code","token","dispatch","$message","success","error","e","console","doLogin","doLogout","handleLogout"],"sources":["src/views/SettingView.vue"],"sourcesContent":["<template>\r\n    <div class=\"chat-view\">\r\n        <h1>üí¨ ËÅäÂ§©</h1>\r\n        <p>SettingView</p>\r\n\r\n        <h2>ÁôªÂΩïÁî®Êà∑‰ø°ÊÅØÔºö{{  }}</h2>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport RightBar from '@/components/RightBar.vue'\r\nimport { handleLogin, handleLogout } from '@/api/user'\r\nexport default {\r\n  components: { RightBar },\r\n  data() {\r\n    return {\r\n      defaultAvatar: 'https://iknow-pic.cdn.bcebos.com/962bd40735fae6cd17bafbff1db30f2442a70f25',\r\n      isRightbarCollapsed: true,\r\n      loginDialogVisible: false,/// ÁôªÂΩïÂØπËØùÊ°ÜÂèØËßÅÊÄß\r\n      loginForm: {\r\n        phone: \"\",\r\n        passWord: \"\",\r\n      },\r\n      loginRules: {\r\n        phone: [\r\n          { required: true, message: \"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑\", trigger: \"blur\" },\r\n          {\r\n            pattern: /^1[3-9]\\d{9}$/,\r\n            message: \"ËØ∑ËæìÂÖ•ÂêàÊ≥ïÁöÑÊâãÊú∫Âè∑\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        passWord: [{ required: true, message: \"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    isLogin() {\r\n      return this.$store.getters['user/isLogin'];\r\n    },\r\n    userInfo() {\r\n      return this.$store.state.user.userInfo || {}\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async submitLogin() {\r\n\r\n      const that = this\r\n      this.$refs.loginForm.validate((valid) => {\r\n        if (valid) {\r\n          // TODO: Êèê‰∫§ÁôªÂΩïÈÄªËæë\r\n          const param = { ...this.loginForm }\r\n          try {\r\n            handleLogin(param).then(res => {\r\n\r\n              const data = res.data.data;\r\n\r\n              if (res.data.code === 200 && data.token) {\r\n                const token = data.token;\r\n                const user = data.userInfo;\r\n\r\n                // Â≠òÂÖ• Vuex\r\n                that.$store.dispatch('user/login', {\r\n                  token,\r\n                  userInfo: user\r\n                });\r\n\r\n                that.loginDialogVisible = false;\r\n\r\n                that.$message.success('ÁôªÂΩïÊàêÂäü');\r\n\r\n\r\n              } else {\r\n                that.loginDialogVisible = false;\r\n                that.$message.error(res.data.message || 'ÁôªÂΩïÂ§±Ë¥•');\r\n              }\r\n\r\n            })\r\n\r\n          } catch (e) {\r\n            console.error(e);\r\n            that.$message.error('ÁΩëÁªúÈîôËØØÊàñÊúçÂä°ÂºÇÂ∏∏');\r\n          }\r\n\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * Áî®Êà∑ÁôªÂΩï\r\n     */\r\n    async doLogin() {\r\n      // TODO: ÁôªÂΩïÈÄªËæë\r\n\r\n      this.loginDialogVisible = true;\r\n\r\n    },\r\n    /**\r\n     * Áî®Êà∑ÁôªÂá∫\r\n     */\r\n    async doLogout() {\r\n      // TODO: ÁôªÂá∫ÈÄªËæë\r\n\r\n      const res = await handleLogout()\r\n\r\n      if (res && res.data && res.data.code === 200) {\r\n\r\n        this.$store.dispatch('user/logout')\r\n\r\n        this.$message.success('Â∑≤ÁôªÂá∫');\r\n\r\n      } else {\r\n        this.$message.error(res.data.message);\r\n      }\r\n\r\n    },\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>"],"mappings":";;;;;;;AAUA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAA,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACA;EACAC,UAAA;IAAAC,QAAA,EAAAA;EAAA;EACAC,KAAA;IACA;MACAC,aAAA;MACAC,mBAAA;MACAC,kBAAA;MAAA;MACAC,SAAA;QACAC,KAAA;QACAC,QAAA;MACA;MACAC,UAAA;QACAF,KAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,OAAA;UACAF,OAAA;UACAC,OAAA;QACA,EACA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAE,QAAA;IACAC,QAAA;MACA,YAAAC,MAAA,CAAAC,OAAA;IACA;IACAC,SAAA;MACA,YAAAF,MAAA,CAAAG,KAAA,CAAAC,IAAA,CAAAF,QAAA;IACA;EACA;EAEAG,OAAA;IACA,MAAAC,YAAA;MAEA,MAAAC,IAAA;MACA,KAAAC,KAAA,CAAAlB,SAAA,CAAAmB,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA,MAAAC,KAAA;YAAA,QAAArB;UAAA;UACA;YACA,IAAAsB,iBAAA,EAAAD,KAAA,EAAAE,IAAA,CAAAC,GAAA;cAEA,MAAA5B,IAAA,GAAA4B,GAAA,CAAA5B,IAAA,CAAAA,IAAA;cAEA,IAAA4B,GAAA,CAAA5B,IAAA,CAAA6B,IAAA,YAAA7B,IAAA,CAAA8B,KAAA;gBACA,MAAAA,KAAA,GAAA9B,IAAA,CAAA8B,KAAA;gBACA,MAAAZ,IAAA,GAAAlB,IAAA,CAAAgB,QAAA;;gBAEA;gBACAK,IAAA,CAAAP,MAAA,CAAAiB,QAAA;kBACAD,KAAA;kBACAd,QAAA,EAAAE;gBACA;gBAEAG,IAAA,CAAAlB,kBAAA;gBAEAkB,IAAA,CAAAW,QAAA,CAAAC,OAAA;cAGA;gBACAZ,IAAA,CAAAlB,kBAAA;gBACAkB,IAAA,CAAAW,QAAA,CAAAE,KAAA,CAAAN,GAAA,CAAA5B,IAAA,CAAAS,OAAA;cACA;YAEA;UAEA,SAAA0B,CAAA;YACAC,OAAA,CAAAF,KAAA,CAAAC,CAAA;YACAd,IAAA,CAAAW,QAAA,CAAAE,KAAA;UACA;QAEA;MACA;IACA;IACA;AACA;AACA;IACA,MAAAG,QAAA;MACA;;MAEA,KAAAlC,kBAAA;IAEA;IACA;AACA;AACA;IACA,MAAAmC,SAAA;MACA;;MAEA,MAAAV,GAAA,aAAAW,kBAAA;MAEA,IAAAX,GAAA,IAAAA,GAAA,CAAA5B,IAAA,IAAA4B,GAAA,CAAA5B,IAAA,CAAA6B,IAAA;QAEA,KAAAf,MAAA,CAAAiB,QAAA;QAEA,KAAAC,QAAA,CAAAC,OAAA;MAEA;QACA,KAAAD,QAAA,CAAAE,KAAA,CAAAN,GAAA,CAAA5B,IAAA,CAAAS,OAAA;MACA;IAEA;EAGA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}