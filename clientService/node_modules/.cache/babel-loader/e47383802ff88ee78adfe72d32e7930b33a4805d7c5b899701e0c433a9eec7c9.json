{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  data() {\n    return {\n      chatMessages: [],\n      userInput: '',\n      socket: null,\n      loading: false\n    };\n  },\n  mounted() {\n    this.initSocket();\n  },\n  methods: {\n    initSocket() {\n      this.socket = new WebSocket('ws://47.120.60.61:9876/chat-ws');\n      this.socket.addEventListener('open', () => {\n        console.log('WebSocket Â∑≤ËøûÊé•');\n      });\n      this.socket.addEventListener('message', event => {\n        if (event.data === '[DONE]') {\n          this.loading = false;\n          return;\n        }\n        this.appendCharByChar(event.data);\n      });\n      this.socket.addEventListener('close', () => {\n        console.log('WebSocket Â∑≤ÂÖ≥Èó≠');\n      });\n      this.socket.addEventListener('error', error => {\n        console.error('WebSocket ÈîôËØØ:', error);\n      });\n    },\n    handleSend() {\n      const msg = this.userInput.trim();\n      if (!msg || this.socket.readyState !== WebSocket.OPEN) return;\n      this.chatMessages.push({\n        role: 'user',\n        content: msg\n      });\n      this.userInput = '';\n      this.loading = true;\n      this.scrollToBottom();\n\n      // ÊûÑÈÄ†‰∏ä‰∏ãÊñáÂπ∂ÂèëÈÄÅ\n      const context = this.chatMessages.map(m => (m.role === 'user' ? 'Áî®Êà∑Ôºö' : 'AIÔºö') + m.content).join('\\n');\n      this.socket.send(context);\n    },\n    appendCharByChar(text) {\n      let last = this.chatMessages[this.chatMessages.length - 1];\n      if (!last || last.role !== 'ai') {\n        last = {\n          role: 'ai',\n          content: ''\n        };\n        this.chatMessages.push(last);\n      }\n      last.content += text;\n      this.$forceUpdate();\n      this.scrollToBottom();\n    },\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const el = this.$refs.chatList;\n        if (el) el.scrollTop = el.scrollHeight;\n      });\n    },\n    formatToHtml(text) {\n      // ÁÆÄÂçïÊç¢Ë°åËΩ¨ <p>\n      return text.split('\\n').map(line => `<p style=\"margin-bottom: 10px; line-height: 1.8;\">${line}</p>`).join('');\n    }\n  }\n};","map":{"version":3,"names":["data","chatMessages","userInput","socket","loading","mounted","initSocket","methods","WebSocket","addEventListener","console","log","event","appendCharByChar","error","handleSend","msg","trim","readyState","OPEN","push","role","content","scrollToBottom","context","map","m","join","send","text","last","length","$forceUpdate","$nextTick","el","$refs","chatList","scrollTop","scrollHeight","formatToHtml","split","line"],"sources":["src/views/ChatView.vue"],"sourcesContent":["<template>\r\n    <div class=\"chat-container\">\r\n        <!-- ËÅäÂ§©Ê∂àÊÅØÂå∫ -->\r\n        <div class=\"msg-list\" ref=\"chatList\">\r\n            <div v-for=\"(msg, index) in chatMessages\" :key=\"index\"\r\n                :class=\"['msg', msg.role === 'user' ? 'msg-user' : 'msg-ai']\">\r\n                <div class=\"avatar\" v-if=\"msg.role === 'ai'\">ü§ñ</div>\r\n                <div class=\"msg-content\" v-html=\"formatToHtml(msg.content)\"></div>\r\n                <div class=\"avatar\" v-if=\"msg.role === 'user'\">üßë</div>\r\n            </div>\r\n\r\n            <div class=\"ai-loading\" v-if=\"loading\">\r\n                <span style=\"margin-right: 10px;\">AI Ê≠£Âú®ËæìÂÖ•</span>\r\n                <div class=\"dot-flash\">\r\n                    <div class=\"dot\" v-for=\"i in 3\" :key=\"i\" :style=\"{ animationDelay: (i * 0.2) + 's' }\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Â∫ïÈÉ®ËæìÂÖ•Ê†è -->\r\n        <div class=\"input-bar\" :class=\"{ 'input-bottom': chatMessages.length > 0 }\">\r\n            <div class=\"input-wrapper\">\r\n                <input v-model=\"userInput\" @keyup.enter=\"handleSend\" placeholder=\"ËØ∑ËæìÂÖ•ÈóÆÈ¢ò...\" class=\"input-box\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            chatMessages: [],\r\n            userInput: '',\r\n            socket: null,\r\n            loading: false,\r\n        };\r\n    },\r\n    mounted() {\r\n        this.initSocket();\r\n    },\r\n    methods: {\r\n        initSocket() {\r\n            this.socket = new WebSocket('ws://47.120.60.61:9876/chat-ws');\r\n\r\n            this.socket.addEventListener('open', () => {\r\n                console.log('WebSocket Â∑≤ËøûÊé•');\r\n            });\r\n\r\n            this.socket.addEventListener('message', (event) => {\r\n                if (event.data === '[DONE]') {\r\n                    this.loading = false;\r\n                    return;\r\n                }\r\n                this.appendCharByChar(event.data);\r\n            });\r\n\r\n            this.socket.addEventListener('close', () => {\r\n                console.log('WebSocket Â∑≤ÂÖ≥Èó≠');\r\n            });\r\n\r\n            this.socket.addEventListener('error', (error) => {\r\n                console.error('WebSocket ÈîôËØØ:', error);\r\n            });\r\n        },\r\n\r\n        handleSend() {\r\n            const msg = this.userInput.trim();\r\n            if (!msg || this.socket.readyState !== WebSocket.OPEN) return;\r\n\r\n            this.chatMessages.push({ role: 'user', content: msg });\r\n            this.userInput = '';\r\n            this.loading = true;\r\n            this.scrollToBottom();\r\n\r\n            // ÊûÑÈÄ†‰∏ä‰∏ãÊñáÂπ∂ÂèëÈÄÅ\r\n            const context = this.chatMessages\r\n                .map((m) => (m.role === 'user' ? 'Áî®Êà∑Ôºö' : 'AIÔºö') + m.content)\r\n                .join('\\n');\r\n\r\n            this.socket.send(context);\r\n        },\r\n\r\n        appendCharByChar(text) {\r\n            let last = this.chatMessages[this.chatMessages.length - 1];\r\n            if (!last || last.role !== 'ai') {\r\n                last = { role: 'ai', content: '' };\r\n                this.chatMessages.push(last);\r\n            }\r\n            last.content += text;\r\n            this.$forceUpdate();\r\n            this.scrollToBottom();\r\n        },\r\n\r\n        scrollToBottom() {\r\n            this.$nextTick(() => {\r\n                const el = this.$refs.chatList;\r\n                if (el) el.scrollTop = el.scrollHeight;\r\n            });\r\n        },\r\n\r\n        formatToHtml(text) {\r\n            // ÁÆÄÂçïÊç¢Ë°åËΩ¨ <p>\r\n            return text\r\n                .split('\\n')\r\n                .map(\r\n                    (line) =>\r\n                        `<p style=\"margin-bottom: 10px; line-height: 1.8;\">${line}</p>`\r\n                )\r\n                .join('');\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background: #f4f6f8;\r\n  font-family: 'Helvetica Neue', Arial, sans-serif;\r\n  padding-bottom: 100px;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n}\r\n\r\n.msg-list {\r\n  flex: 1;\r\n  padding: 20px 12px 0;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n  scroll-behavior: smooth;\r\n}\r\n\r\n/************** ËÅäÂ§©Ê∞îÊ≥° **************/\r\n.msg {\r\n  display: flex;\r\n  align-items: flex-end;\r\n  margin-bottom: 18px;\r\n  max-width: 70%;\r\n  font-size: 14.5px;\r\n  line-height: 1.6;\r\n  position: relative;\r\n}\r\n\r\n/* Áî®Êà∑Ê∞îÊ≥°ÔºàÂè≥Ôºâ */\r\n.msg-user {\r\n  margin-left: auto;\r\n  justify-content: flex-end;\r\n}\r\n.msg-user .msg-content {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  border-radius: 18px 4px 18px 18px;\r\n  padding: 10px 14px;\r\n  box-shadow: 0 2px 10px rgba(102, 126, 234, 0.25);\r\n}\r\n.msg-user .avatar {\r\n  margin-left: 8px;\r\n  border: 2px solid #667eea;\r\n}\r\n\r\n/* AI Ê∞îÊ≥°ÔºàÂ∑¶Ôºâ */\r\n.msg-ai {\r\n  margin-right: auto;\r\n  justify-content: flex-start;\r\n}\r\n.msg-ai .msg-content {\r\n  background: #fff;\r\n  color: #333;\r\n  border-radius: 4px 18px 18px 18px;\r\n  padding: 10px 14px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);\r\n}\r\n.msg-ai .avatar {\r\n  margin-right: 8px;\r\n  border: 2px solid #f1f2f6;\r\n}\r\n\r\n/* Â§¥ÂÉèÁªü‰∏ÄÁæéÂåñ */\r\n.avatar {\r\n  width: 34px;\r\n  height: 34px;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 20px;\r\n  flex-shrink: 0;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);\r\n}\r\n/* ËæìÂÖ•Ê†èÊ†∑Âºè */\r\n.input-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 100%;\r\n  max-width: 720px;\r\n  display: flex;\r\n  gap: 12px;\r\n  padding: 12px 16px;\r\n  background-color: white;\r\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08);\r\n  box-sizing: border-box;\r\n  border-radius: 20px;\r\n}\r\n\r\n/* ËæìÂÖ•Ê°Ü */\r\n.input-wrapper {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.input-box {\r\n  flex: 1;\r\n  height: 40px;\r\n  resize: none;\r\n  border: none;\r\n  background: #f4f6f8;\r\n  min-height: 40px;\r\n  max-height: 120px;\r\n  border-radius: 20px;\r\n  padding: 10px 14px;\r\n  font-size: 15px;\r\n  line-height: 1.4;\r\n  outline: none;\r\n  overflow-y: auto;\r\n  transition: none;\r\n}\r\n\r\n/* ÂèëÈÄÅÊåâÈíÆ */\r\n.send-btn {\r\n  padding: 10px 18px;\r\n  background-color: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 18px;\r\n  cursor: pointer;\r\n  font-size: 15px;\r\n  transition: background 0.2s ease;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.send-btn:disabled {\r\n  background-color: #a0cfff;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* loading ÁÇπÂä®Áîª */\r\n.ai-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #888;\r\n  font-size: 14px;\r\n  margin-left: 12px;\r\n}\r\n\r\n.dot-flash {\r\n  display: flex;\r\n  margin-left: 10px;\r\n}\r\n\r\n.dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  background-color: #1890ff;\r\n  border-radius: 50%;\r\n  margin-left: 6px;\r\n  animation: flashDot 1.2s infinite;\r\n}\r\n\r\n@keyframes flashDot {\r\n  0% {\r\n    opacity: 0.2;\r\n    transform: scale(0.8);\r\n  }\r\n\r\n  50% {\r\n    opacity: 1;\r\n    transform: scale(1.2);\r\n  }\r\n\r\n  100% {\r\n    opacity: 0.2;\r\n    transform: scale(0.8);\r\n  }\r\n}\r\n\r\n/* ÁßªÂä®Á´ØÈÄÇÈÖç */\r\n@media (max-width: 768px) {\r\n  .input-bar {\r\n    padding: 10px 12px;\r\n  }\r\n\r\n  .input-box {\r\n    font-size: 14px;\r\n    padding: 8px 12px;\r\n  }\r\n\r\n  .send-btn {\r\n    padding: 8px 14px;\r\n    font-size: 14px;\r\n  }\r\n\r\n  .msg {\r\n    max-width: 85%;\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n</style>\r\n"],"mappings":";;;AA6BA;EACAA,KAAA;IACA;MACAC,YAAA;MACAC,SAAA;MACAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACAD,WAAA;MACA,KAAAH,MAAA,OAAAK,SAAA;MAEA,KAAAL,MAAA,CAAAM,gBAAA;QACAC,OAAA,CAAAC,GAAA;MACA;MAEA,KAAAR,MAAA,CAAAM,gBAAA,YAAAG,KAAA;QACA,IAAAA,KAAA,CAAAZ,IAAA;UACA,KAAAI,OAAA;UACA;QACA;QACA,KAAAS,gBAAA,CAAAD,KAAA,CAAAZ,IAAA;MACA;MAEA,KAAAG,MAAA,CAAAM,gBAAA;QACAC,OAAA,CAAAC,GAAA;MACA;MAEA,KAAAR,MAAA,CAAAM,gBAAA,UAAAK,KAAA;QACAJ,OAAA,CAAAI,KAAA,kBAAAA,KAAA;MACA;IACA;IAEAC,WAAA;MACA,MAAAC,GAAA,QAAAd,SAAA,CAAAe,IAAA;MACA,KAAAD,GAAA,SAAAb,MAAA,CAAAe,UAAA,KAAAV,SAAA,CAAAW,IAAA;MAEA,KAAAlB,YAAA,CAAAmB,IAAA;QAAAC,IAAA;QAAAC,OAAA,EAAAN;MAAA;MACA,KAAAd,SAAA;MACA,KAAAE,OAAA;MACA,KAAAmB,cAAA;;MAEA;MACA,MAAAC,OAAA,QAAAvB,YAAA,CACAwB,GAAA,CAAAC,CAAA,KAAAA,CAAA,CAAAL,IAAA,+BAAAK,CAAA,CAAAJ,OAAA,EACAK,IAAA;MAEA,KAAAxB,MAAA,CAAAyB,IAAA,CAAAJ,OAAA;IACA;IAEAX,iBAAAgB,IAAA;MACA,IAAAC,IAAA,QAAA7B,YAAA,MAAAA,YAAA,CAAA8B,MAAA;MACA,KAAAD,IAAA,IAAAA,IAAA,CAAAT,IAAA;QACAS,IAAA;UAAAT,IAAA;UAAAC,OAAA;QAAA;QACA,KAAArB,YAAA,CAAAmB,IAAA,CAAAU,IAAA;MACA;MACAA,IAAA,CAAAR,OAAA,IAAAO,IAAA;MACA,KAAAG,YAAA;MACA,KAAAT,cAAA;IACA;IAEAA,eAAA;MACA,KAAAU,SAAA;QACA,MAAAC,EAAA,QAAAC,KAAA,CAAAC,QAAA;QACA,IAAAF,EAAA,EAAAA,EAAA,CAAAG,SAAA,GAAAH,EAAA,CAAAI,YAAA;MACA;IACA;IAEAC,aAAAV,IAAA;MACA;MACA,OAAAA,IAAA,CACAW,KAAA,OACAf,GAAA,CACAgB,IAAA,IACA,qDAAAA,IAAA,MACA,EACAd,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}