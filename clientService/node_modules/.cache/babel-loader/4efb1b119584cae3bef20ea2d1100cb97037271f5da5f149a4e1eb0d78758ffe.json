{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _VideoPlayer = _interopRequireDefault(require(\"./VideoPlayer.vue\"));\nvar _index = _interopRequireDefault(require(\"@/store/index.js\"));\nvar _default = exports.default = {\n  name: 'VideoPreview',\n  components: {\n    VideoPlayer: _VideoPlayer.default\n  },\n  data() {\n    return {\n      visible: false,\n      //  视频预览组件是否可见\n      activeIndex: 0,\n      //  当前打开的视频索引\n      isFoldVideoList: false,\n      //  是否折叠右侧视频列表\n      customOptions: {\n        autoplay: true,\n        muted: true\n      }\n    };\n  },\n  computed: {\n    // 当前显示的文件信息\n    activeFileObj() {\n      const res = this.videoList.length ? this.videoList[this.activeIndex] : {};\n      return res;\n    },\n    // 当前播放的视频源信息\n    activeVideoSource() {\n      console.log('activeVideoSource==');\n      console.log('type=', `video/${this.videoList[this.activeIndex].extendName}`);\n      console.log('src=', this.videoList[this.activeIndex].fileUrl);\n      return {\n        type: `video/${this.videoList[this.activeIndex].extendName}`,\n        //  取值文件后缀；这里的种类支持很多种：基本视频格式、直播、流媒体等，具体可以参看 https://videojs.com/getting-started\n        src: this.videoList[this.activeIndex].fileUrl // url 地址\n      };\n    },\n    // 屏幕宽度\n    screenWidth() {\n      return _index.default.state.common.screenWidth;\n    }\n  },\n  watch: {\n    // 监听视频预览组件状态\n    visible(newValue) {\n      if (newValue) {\n        this.activeIndex = this.defaultIndex;\n      }\n    },\n    screenWidth(newValue) {\n      if (newValue <= 768) {\n        this.isFoldVideoList = true;\n      }\n    }\n  },\n  mounted() {\n    if (this.screenWidth <= 768) {\n      this.isFoldVideoList = true;\n    }\n  },\n  methods: {\n    // 关闭视频预览\n    handleClosePreview() {\n      this.visible = false;\n      this.callback('cancel');\n    }\n  }\n};","map":{"version":3,"names":["_VideoPlayer","_interopRequireDefault","require","_index","_default","exports","default","name","components","VideoPlayer","data","visible","activeIndex","isFoldVideoList","customOptions","autoplay","muted","computed","activeFileObj","res","videoList","length","activeVideoSource","console","log","extendName","fileUrl","type","src","screenWidth","store","state","common","watch","newValue","defaultIndex","mounted","methods","handleClosePreview","callback"],"sources":["src/components/file/box/videoPreview/BoxMask.vue"],"sourcesContent":["<template>\r\n\t<transition name=\"el-zoom-in-top\">\r\n\t\t<div class=\"video-preview-wrapper\" v-show=\"visible\">\r\n\t\t\t<div class=\"top\">\r\n\t\t\t\t<div class=\"video-name\">\r\n\t\t\t\t\t{{ activeFileObj.fileName }}.{{ activeFileObj.extendName }}\r\n\t\t\t\t\t<span class=\"size\">{{\r\n\t\t\t\t\t\t$file.calculateFileSize(activeFileObj.fileSize)\r\n\t\t\t\t\t}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a class=\"download-link\" :href=\"$file.getDownloadFilePath(activeFileObj)\" target=\"_blank\"><i\r\n\t\t\t\t\t\tclass=\"download-icon el-icon-download\" title=\"下载\"></i></a>\r\n\t\t\t\t<i class=\"fold-icon\" :class=\"isFoldVideoList ? 'el-icon-s-fold' : 'el-icon-s-unfold'\"\r\n\t\t\t\t\t:title=\"isFoldVideoList ? '展开播放列表' : '折叠播放列表'\" @click=\"isFoldVideoList = !isFoldVideoList\"></i>\r\n\t\t\t\t<i class=\"close-icon el-icon-close\" title=\"关闭\" @click=\"handleClosePreview\"></i>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"bottom\">\r\n\t\t\t\t<video-player class=\"video-player\" ref=\"VideoPlayer\" :source=\"activeVideoSource\"\r\n\t\t\t\t\t:options=\"customOptions\" v-if=\"visible\"></video-player>\r\n\t\t\t\t<el-collapse-transition>\r\n\t\t\t\t\t<div class=\"video-list-wrapper\" v-show=\"!isFoldVideoList\">\r\n\t\t\t\t\t\t<div class=\"list-title\">播放列表</div>\r\n\t\t\t\t\t\t<ul class=\"video-list\">\r\n\t\t\t\t\t\t\t<li class=\"video-item\" v-for=\"(item, index) in videoList\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t:class=\"[activeIndex === index ? 'active' : '']\" @click=\"activeIndex = index\">\r\n\t\t\t\t\t\t\t\t<span class=\"name\">{{ item.fileName }}.{{ item.extendName }}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"size\">{{\r\n\t\t\t\t\t\t\t\t\t$file.calculateFileSize(item.fileSize)\r\n\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-collapse-transition>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\nimport VideoPlayer from './VideoPlayer.vue'\r\nimport store from '@/store/index.js'\r\n\r\nexport default {\r\n\tname: 'VideoPreview',\r\n\tcomponents: {\r\n\t\tVideoPlayer\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvisible: false, //  视频预览组件是否可见\r\n\t\t\tactiveIndex: 0, //  当前打开的视频索引\r\n\t\t\tisFoldVideoList: false, //  是否折叠右侧视频列表\r\n\t\t\tcustomOptions: {\r\n\t\t\t\tautoplay: true,\r\n\t\t\t\tmuted: true\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 当前显示的文件信息\r\n\t\tactiveFileObj() {\r\n\t\t\tconst res = this.videoList.length ? this.videoList[this.activeIndex] : {}\r\n\t\t\treturn res\r\n\t\t},\r\n\t\t// 当前播放的视频源信息\r\n\t\tactiveVideoSource() {\r\n\t\t\tconsole.log('activeVideoSource==')\r\n\t\t\tconsole.log('type=', `video/${this.videoList[this.activeIndex].extendName}`)\r\n\t\t\tconsole.log('src=', this.videoList[this.activeIndex].fileUrl)\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttype: `video/${this.videoList[this.activeIndex].extendName}`, //  取值文件后缀；这里的种类支持很多种：基本视频格式、直播、流媒体等，具体可以参看 https://videojs.com/getting-started\r\n\t\t\t\tsrc: this.videoList[this.activeIndex].fileUrl // url 地址\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 屏幕宽度\r\n\t\tscreenWidth() {\r\n\t\t\treturn store.state.common.screenWidth\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\t// 监听视频预览组件状态\r\n\t\tvisible(newValue) {\r\n\t\t\tif (newValue) {\r\n\t\t\t\tthis.activeIndex = this.defaultIndex\r\n\t\t\t}\r\n\t\t},\r\n\t\tscreenWidth(newValue) {\r\n\t\t\tif (newValue <= 768) {\r\n\t\t\t\tthis.isFoldVideoList = true\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tif (this.screenWidth <= 768) {\r\n\t\t\tthis.isFoldVideoList = true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 关闭视频预览\r\n\t\thandleClosePreview() {\r\n\t\t\tthis.visible = false\r\n\t\t\tthis.callback('cancel')\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~_a/styles/varibles.styl';\r\n@import '~_a/styles/mixins.styl';\r\n\r\n.video-preview-wrapper {\r\n  background: rgba(0, 0, 0, 0.75);\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 99;\r\n\r\n  .top {\r\n    margin-bottom: 8px;\r\n    background: #000;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 48px;\r\n    line-height: 48px;\r\n    padding: 0 8px 0 16px;\r\n\r\n    .video-name {\r\n      flex: 1;\r\n      color: #fff;\r\n\r\n      .size {\r\n        margin-left: 16px;\r\n        color: $SecondaryText;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n\r\n    .download-link {\r\n      display: block;\r\n      height: 24px;\r\n      line-height: 24px;\r\n    }\r\n\r\n    .download-icon, .fold-icon, .close-icon {\r\n      margin-left: 8px;\r\n      width: 32px;\r\n      cursor: pointer;\r\n      font-size: 24px;\r\n      color: #fff;\r\n\r\n      &:hover {\r\n        opacity: 0.6;\r\n      }\r\n    }\r\n  }\r\n\r\n  .bottom {\r\n    height: calc(100vh - 60px);\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    .video-player {\r\n      flex: 1;\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: fill;\r\n    }\r\n\r\n    .video-list-wrapper {\r\n      margin-left: 8px;\r\n      background: #000;\r\n      width: 280px;\r\n      height: 100%;\r\n      color: #fff;\r\n\r\n      .list-title {\r\n        border-bottom: 2px solid $RegularText;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        padding: 0 16px;\r\n      }\r\n\r\n      .video-list {\r\n        padding: 8px 0;\r\n        font-size: 12px;\r\n        cursor: pointer;\r\n        height: calc(100% - 42px);\r\n        overflow: auto;\r\n        list-style: none;\r\n        setScrollbar(8px);\r\n\r\n        .video-item {\r\n          padding: 8px 16px;\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          &:hover {\r\n            color: $Primary;\r\n          }\r\n\r\n          .name {\r\n            flex: 1;\r\n            word-break: break-all;\r\n          }\r\n\r\n          .size {\r\n            margin-left: 8px;\r\n            width: 56px;\r\n            color: $SecondaryText;\r\n            text-align: right;\r\n          }\r\n        }\r\n\r\n        .video-item.active {\r\n          background: #000;\r\n          color: $Primary;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;AAuCA,IAAAA,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,UAAA;IACAC,WAAA,EAAAA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,WAAA;MAAA;MACAC,eAAA;MAAA;MACAC,aAAA;QACAC,QAAA;QACAC,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACA;IACAC,cAAA;MACA,MAAAC,GAAA,QAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,MAAAR,WAAA;MACA,OAAAO,GAAA;IACA;IACA;IACAG,kBAAA;MACAC,OAAA,CAAAC,GAAA;MACAD,OAAA,CAAAC,GAAA,wBAAAJ,SAAA,MAAAR,WAAA,EAAAa,UAAA;MACAF,OAAA,CAAAC,GAAA,cAAAJ,SAAA,MAAAR,WAAA,EAAAc,OAAA;MAEA;QACAC,IAAA,gBAAAP,SAAA,MAAAR,WAAA,EAAAa,UAAA;QAAA;QACAG,GAAA,OAAAR,SAAA,MAAAR,WAAA,EAAAc,OAAA;MACA;IACA;IACA;IACAG,YAAA;MACA,OAAAC,cAAA,CAAAC,KAAA,CAAAC,MAAA,CAAAH,WAAA;IACA;EACA;EACAI,KAAA;IACA;IACAtB,QAAAuB,QAAA;MACA,IAAAA,QAAA;QACA,KAAAtB,WAAA,QAAAuB,YAAA;MACA;IACA;IACAN,YAAAK,QAAA;MACA,IAAAA,QAAA;QACA,KAAArB,eAAA;MACA;IACA;EACA;EACAuB,QAAA;IACA,SAAAP,WAAA;MACA,KAAAhB,eAAA;IACA;EACA;EACAwB,OAAA;IACA;IACAC,mBAAA;MACA,KAAA3B,OAAA;MACA,KAAA4B,QAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}