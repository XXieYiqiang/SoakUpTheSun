{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/front/gim-chat/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.filter.js\");\nvar _file = require(\"@/api/file.js\");\nvar _Box = _interopRequireDefault(require(\"@/components/file/box/uploadFile/Box.vue\"));\nvar _index = _interopRequireDefault(require(\"@/components/file/box/uploadFile/index.js\"));\nvar _FileList = _interopRequireDefault(require(\"@/components/file/FileList.vue\"));\nvar _default = exports.default = {\n  name: \"Pan\",\n  components: {\n    FileUploader: _Box.default,\n    FileList: _FileList.default\n  },\n  data() {\n    return {\n      files: [],\n      currentPage: 1,\n      pageSize: 10,\n      filterType: \"all\"\n    };\n  },\n  computed: {\n    filteredFiles() {\n      let start = (this.currentPage - 1) * this.pageSize;\n      let end = start + this.pageSize;\n      const list = this.filterType === \"all\" ? this.files : this.files.filter(f => this.mapType(f.type) === this.filterType);\n      return list.slice(start, end);\n    }\n  },\n  methods: {\n    /**\r\n    * Ë°®Ê†ºÊï∞ÊçÆËé∑ÂèñÁõ∏ÂÖ≥‰∫ã‰ª∂ | Ëé∑ÂèñÂΩìÂâçË∑ØÂæÑ‰∏ãÁöÑÊñá‰ª∂ÂàóË°®\r\n    */\n    showFileList() {\n      console.log('showFileList==');\n      let data = {\n        fileType: this.fileType,\n        filePath: this.filePath,\n        currentPage: this.pageData.currentPage,\n        pageCount: this.pageData.pageCount\n      };\n      (0, _file.getFileListByPath)(data).then(res => {\n        if (res && res.data && res.data.code === 200) {\n          this.fileList = res.data.data.records;\n          this.pageData.total = Number(res.data.data.total);\n          this.loading = false;\n        } else {\n          this.$message.error(res.data.message);\n        }\n      });\n    },\n    async openUpload() {\n      const result = await (0, _index.default)({\n        params: {\n          headers: {\n            token: 'abc-123'\n          },\n          userId: 10001\n        },\n        uploadWay: 1,\n        // 1=‰∏ä‰º†Êñá‰ª∂\n        serviceEl: this,\n        callType: 1\n      });\n      if (result !== 'cancel') {\n        console.log('‰∏ä‰º†ÁªìÊûúÔºö', result);\n      }\n    },\n    handleSelect(key) {\n      this.filterType = key;\n      this.currentPage = 1;\n    },\n    mapType(type) {\n      if ([\"png\", \"jpg\", \"jpeg\"].includes(type)) return \"image\";\n      if ([\"docx\", \"xlsx\", \"txt\", \"pdf\"].includes(type)) return \"doc\";\n      if ([\"mp4\", \"avi\"].includes(type)) return \"video\";\n      if ([\"mp3\", \"wav\"].includes(type)) return \"audio\";\n      return \"other\";\n    },\n    getFileIcon(file) {\n      const ext = file.type.toLowerCase();\n      if (file.type === \"Êñá‰ª∂Â§π\") return \"üìÅ\";\n      if ([\"docx\", \"txt\", \"pdf\", \"xlsx\"].includes(ext)) return \"üìÑ\";\n      if ([\"mp4\", \"avi\"].includes(ext)) return \"üé¨\";\n      if ([\"mp3\", \"wav\"].includes(ext)) return \"üéµ\";\n      if ([\"png\", \"jpg\", \"jpeg\"].includes(ext)) return \"üñºÔ∏è\";\n      if ([\"zip\", \"rar\"].includes(ext)) return \"üóúÔ∏è\";\n      return \"üì¶\";\n    },\n    onSuccess(fileInfo) {\n      console.log('‰∏ä‰º†ÊàêÂäü', fileInfo);\n    },\n    onError(err) {\n      console.error('‰∏ä‰º†Â§±Ë¥•', err);\n    },\n    onCancel() {\n      console.warn('‰∏ä‰º†ÂèñÊ∂à');\n    }\n  }\n};","map":{"version":3,"names":["_file","require","_Box","_interopRequireDefault","_index","_FileList","_default","exports","default","name","components","FileUploader","FileList","data","files","currentPage","pageSize","filterType","computed","filteredFiles","start","end","list","filter","f","mapType","type","slice","methods","showFileList","console","log","fileType","filePath","pageData","pageCount","getFileListByPath","then","res","code","fileList","records","total","Number","loading","$message","error","message","openUpload","result","showUploadFileBox","params","headers","token","userId","uploadWay","serviceEl","callType","handleSelect","key","includes","getFileIcon","file","ext","toLowerCase","onSuccess","fileInfo","onError","err","onCancel","warn"],"sources":["src/views/DocsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"pan-container\">\r\n    <!-- Â∑¶‰æßÂØºËà™ -->\r\n    <el-menu default-active=\"all\" class=\"side-menu\" @select=\"handleSelect\">\r\n      <el-menu-item index=\"all\">üìÅ ÂÖ®ÈÉ®</el-menu-item>\r\n      <el-menu-item index=\"image\">üñºÔ∏è ÂõæÁâá</el-menu-item>\r\n      <el-menu-item index=\"doc\">üìÑ ÊñáÊ°£</el-menu-item>\r\n      <el-menu-item index=\"video\">üé¨ ËßÜÈ¢ë</el-menu-item>\r\n      <el-menu-item index=\"audio\">üéµ Èü≥‰πê</el-menu-item>\r\n      <el-menu-item index=\"other\">üì¶ ÂÖ∂‰ªñ</el-menu-item>\r\n      <el-menu-item index=\"trash\">üóëÔ∏è ÂõûÊî∂Á´ô</el-menu-item>\r\n    </el-menu>\r\n\r\n    <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->\r\n    <div class=\"content\">\r\n\r\n      <FileList :refresh-data=\"isRefreshData\"></FileList>\r\n      \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n\tgetFileListByPath,\r\n} from '@/api/file.js'\r\nimport FileUploader from '@/components/file/box/uploadFile/Box.vue';\r\nimport showUploadFileBox from '@/components/file/box/uploadFile/index.js'\r\nimport FileList from '@/components/file/FileList.vue'\r\nexport default {\r\n  name: \"Pan\",\r\n  components: { FileUploader,FileList },\r\n  data() {\r\n    return {\r\n      files: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      filterType: \"all\",\r\n    };\r\n  },\r\n  computed: {\r\n    filteredFiles() {\r\n      let start = (this.currentPage - 1) * this.pageSize;\r\n      let end = start + this.pageSize;\r\n      const list = this.filterType === \"all\"\r\n        ? this.files\r\n        : this.files.filter(f => this.mapType(f.type) === this.filterType);\r\n      return list.slice(start, end);\r\n    },\r\n  },\r\n  methods: {\r\n    \t\t/**\r\n\t\t * Ë°®Ê†ºÊï∞ÊçÆËé∑ÂèñÁõ∏ÂÖ≥‰∫ã‰ª∂ | Ëé∑ÂèñÂΩìÂâçË∑ØÂæÑ‰∏ãÁöÑÊñá‰ª∂ÂàóË°®\r\n\t\t */\r\n\t\tshowFileList() {\r\n\t\t\tconsole.log('showFileList==')\r\n\t\t\tlet data = {\r\n\t\t\t\tfileType: this.fileType,\r\n\t\t\t\tfilePath: this.filePath,\r\n\t\t\t\tcurrentPage: this.pageData.currentPage,\r\n\t\t\t\tpageCount: this.pageData.pageCount\r\n\t\t\t}\r\n\t\t\tgetFileListByPath(data).then((res) => {\r\n\t\t\t\tif (res && res.data && res.data.code === 200) {\r\n\t\t\t\t\tthis.fileList = res.data.data.records\r\n\t\t\t\t\tthis.pageData.total = Number(res.data.data.total)\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n    async openUpload() {\r\n      const result = await showUploadFileBox({\r\n        params: {\r\n          headers: { token: 'abc-123' },\r\n          userId: 10001\r\n        },\r\n        uploadWay: 1, // 1=‰∏ä‰º†Êñá‰ª∂\r\n        serviceEl: this,\r\n        callType: 1\r\n      })\r\n\r\n      if (result !== 'cancel') {\r\n        console.log('‰∏ä‰º†ÁªìÊûúÔºö', result)\r\n      }\r\n    },\r\n    handleSelect(key) {\r\n      this.filterType = key;\r\n      this.currentPage = 1;\r\n    },\r\n    mapType(type) {\r\n      if ([\"png\", \"jpg\", \"jpeg\"].includes(type)) return \"image\";\r\n      if ([\"docx\", \"xlsx\", \"txt\", \"pdf\"].includes(type)) return \"doc\";\r\n      if ([\"mp4\", \"avi\"].includes(type)) return \"video\";\r\n      if ([\"mp3\", \"wav\"].includes(type)) return \"audio\";\r\n      return \"other\";\r\n    },\r\n    getFileIcon(file) {\r\n      const ext = file.type.toLowerCase();\r\n      if (file.type === \"Êñá‰ª∂Â§π\") return \"üìÅ\";\r\n      if ([\"docx\", \"txt\", \"pdf\", \"xlsx\"].includes(ext)) return \"üìÑ\";\r\n      if ([\"mp4\", \"avi\"].includes(ext)) return \"üé¨\";\r\n      if ([\"mp3\", \"wav\"].includes(ext)) return \"üéµ\";\r\n      if ([\"png\", \"jpg\", \"jpeg\"].includes(ext)) return \"üñºÔ∏è\";\r\n      if ([\"zip\", \"rar\"].includes(ext)) return \"üóúÔ∏è\";\r\n      return \"üì¶\";\r\n    },\r\n    onSuccess(fileInfo) {\r\n      console.log('‰∏ä‰º†ÊàêÂäü', fileInfo);\r\n    },\r\n    onError(err) {\r\n      console.error('‰∏ä‰º†Â§±Ë¥•', err);\r\n    },\r\n    onCancel() {\r\n      console.warn('‰∏ä‰º†ÂèñÊ∂à');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.pan-container {\r\n  display: flex;\r\n  height: 100vh;\r\n}\r\n\r\n.side-menu {\r\n  width: 180px;\r\n  min-width: 150px;\r\n  border-right: 1px solid #eee;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.toolbar {\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;AAuBA,IAAAA,KAAA,GAAAC,OAAA;AAGA,IAAAC,IAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,SAAA,GAAAF,sBAAA,CAAAF,OAAA;AAAA,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACA;EACAC,IAAA;EACAC,UAAA;IAAAC,YAAA,EAAAA,YAAA;IAAAC,QAAA,EAAAA;EAAA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,WAAA;MACAC,QAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACAC,cAAA;MACA,IAAAC,KAAA,SAAAL,WAAA,aAAAC,QAAA;MACA,IAAAK,GAAA,GAAAD,KAAA,QAAAJ,QAAA;MACA,MAAAM,IAAA,QAAAL,UAAA,aACA,KAAAH,KAAA,GACA,KAAAA,KAAA,CAAAS,MAAA,CAAAC,CAAA,SAAAC,OAAA,CAAAD,CAAA,CAAAE,IAAA,WAAAT,UAAA;MACA,OAAAK,IAAA,CAAAK,KAAA,CAAAP,KAAA,EAAAC,GAAA;IACA;EACA;EACAO,OAAA;IACA;AACA;AACA;IACAC,aAAA;MACAC,OAAA,CAAAC,GAAA;MACA,IAAAlB,IAAA;QACAmB,QAAA,OAAAA,QAAA;QACAC,QAAA,OAAAA,QAAA;QACAlB,WAAA,OAAAmB,QAAA,CAAAnB,WAAA;QACAoB,SAAA,OAAAD,QAAA,CAAAC;MACA;MACA,IAAAC,uBAAA,EAAAvB,IAAA,EAAAwB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,IAAAA,GAAA,CAAAzB,IAAA,IAAAyB,GAAA,CAAAzB,IAAA,CAAA0B,IAAA;UACA,KAAAC,QAAA,GAAAF,GAAA,CAAAzB,IAAA,CAAAA,IAAA,CAAA4B,OAAA;UACA,KAAAP,QAAA,CAAAQ,KAAA,GAAAC,MAAA,CAAAL,GAAA,CAAAzB,IAAA,CAAAA,IAAA,CAAA6B,KAAA;UACA,KAAAE,OAAA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA,CAAAR,GAAA,CAAAzB,IAAA,CAAAkC,OAAA;QACA;MACA;IACA;IACA,MAAAC,WAAA;MACA,MAAAC,MAAA,aAAAC,cAAA;QACAC,MAAA;UACAC,OAAA;YAAAC,KAAA;UAAA;UACAC,MAAA;QACA;QACAC,SAAA;QAAA;QACAC,SAAA;QACAC,QAAA;MACA;MAEA,IAAAR,MAAA;QACAnB,OAAA,CAAAC,GAAA,UAAAkB,MAAA;MACA;IACA;IACAS,aAAAC,GAAA;MACA,KAAA1C,UAAA,GAAA0C,GAAA;MACA,KAAA5C,WAAA;IACA;IACAU,QAAAC,IAAA;MACA,2BAAAkC,QAAA,CAAAlC,IAAA;MACA,mCAAAkC,QAAA,CAAAlC,IAAA;MACA,mBAAAkC,QAAA,CAAAlC,IAAA;MACA,mBAAAkC,QAAA,CAAAlC,IAAA;MACA;IACA;IACAmC,YAAAC,IAAA;MACA,MAAAC,GAAA,GAAAD,IAAA,CAAApC,IAAA,CAAAsC,WAAA;MACA,IAAAF,IAAA,CAAApC,IAAA;MACA,mCAAAkC,QAAA,CAAAG,GAAA;MACA,mBAAAH,QAAA,CAAAG,GAAA;MACA,mBAAAH,QAAA,CAAAG,GAAA;MACA,2BAAAH,QAAA,CAAAG,GAAA;MACA,mBAAAH,QAAA,CAAAG,GAAA;MACA;IACA;IACAE,UAAAC,QAAA;MACApC,OAAA,CAAAC,GAAA,SAAAmC,QAAA;IACA;IACAC,QAAAC,GAAA;MACAtC,OAAA,CAAAgB,KAAA,SAAAsB,GAAA;IACA;IACAC,SAAA;MACAvC,OAAA,CAAAwC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}