{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"C:/Users/Administrator/Desktop/GimChat/gimChatVue/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\"));\n// import videojs from 'video.js'\n// import 'video.js/dist/video-js.css'\nvar _default = exports.default = {\n  name: 'VideoPlayer',\n  props: {\n    source: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    options: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      // video.js 播放器的配置项，具体查看 https://videojs.com/getting-started\n      defaultOptions: {\n        playbackRates: [0.5, 1.0, 1.5, 2.0],\n        // 播放速度\n        autoplay: false,\n        //  如果true,浏览器准备好时开始播放。\n        muted: false,\n        // 默认情况下将会消除任何音频。\n        loop: false,\n        // 导致视频一结束就重新开始。\n        preload: 'auto',\n        // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: 'zh-CN',\n        aspectRatio: '16:9',\n        // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        fluid: true,\n        // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n        sources: [this.source],\n        //  视频源信息\n        notSupportedMessage: '此视频暂无法播放，请稍后再试',\n        controls: true,\n        controlBar: {\n          timeDivider: true,\n          durationDisplay: true,\n          remainingTimeDisplay: false,\n          fullscreenToggle: true // 全屏按钮\n        }\n      },\n      player: null\n    };\n  },\n  computed: {\n    playerOptions() {\n      return {\n        ...this.defaultOptions,\n        ...this.options,\n        sources: [this.source]\n      };\n    }\n  },\n  watch: {\n    /**\r\n     * 监听视频源信息变化\r\n     * @param {object} newValue 变化后的值\r\n     */\n    source(newValue) {\n      if (this.player) {\n        this.player.pause(); //  暂停\n        this.player.currentTime(0); //  跳到 0 秒\n        this.player.src(newValue); //  动态设置视频源\n        this.player.play(); //  加载完毕后自动播放\n      }\n    }\n  },\n  mounted() {\n    const videoOptions = this.playerOptions;\n    console.log(\"this.$refs.videoPlayer=\", this.$refs.videoPlayer);\n    console.log(\"this.options=\", this.options);\n    this.player = videojs(this.$refs.videoPlayer, videoOptions);\n    // window.videojs = videojs\n    // require('video.js/dist/lang/zh-CN.js')\n    // 加载中文语言包\n    Promise.resolve().then(() => (0, _interopRequireWildcard2.default)(require('video.js/dist/lang/zh-CN.js'))).then(() => {\n      if (this.player) {\n        this.player.language('zh-CN');\n      }\n    });\n  },\n  beforeDestroy() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  }\n};","map":{"version":3,"names":["_default","exports","default","name","props","source","type","Object","options","data","defaultOptions","playbackRates","autoplay","muted","loop","preload","language","aspectRatio","fluid","sources","notSupportedMessage","controls","controlBar","timeDivider","durationDisplay","remainingTimeDisplay","fullscreenToggle","player","computed","playerOptions","watch","newValue","pause","currentTime","src","play","mounted","videoOptions","console","log","$refs","videoPlayer","videojs","Promise","resolve","then","_interopRequireWildcard2","require","beforeDestroy","dispose"],"sources":["src/components/file/box/videoPreview/VideoPlayer.vue"],"sourcesContent":["<template>\r\n\t<video ref=\"videoPlayer\" class=\"video-js\"></video>\r\n</template>\r\n\r\n<script>\r\n// import videojs from 'video.js'\r\n// import 'video.js/dist/video-js.css'\r\n\r\nexport default {\r\n\tname: 'VideoPlayer',\r\n\tprops: {\r\n\t\tsource: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t},\r\n\t\toptions: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// video.js 播放器的配置项，具体查看 https://videojs.com/getting-started\r\n\t\t\tdefaultOptions: {\r\n\t\t\t\tplaybackRates: [0.5, 1.0, 1.5, 2.0], // 播放速度\r\n\t\t\t\tautoplay: false, //  如果true,浏览器准备好时开始播放。\r\n\t\t\t\tmuted: false, // 默认情况下将会消除任何音频。\r\n\t\t\t\tloop: false, // 导致视频一结束就重新开始。\r\n\t\t\t\tpreload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\r\n\t\t\t\tlanguage: 'zh-CN',\r\n\t\t\t\taspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\r\n\t\t\t\tfluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\r\n\t\t\t\tsources: [this.source], //  视频源信息\r\n\t\t\t\tnotSupportedMessage: '此视频暂无法播放，请稍后再试',\r\n\t\t\t\tcontrols: true,\r\n\t\t\t\tcontrolBar: {\r\n\t\t\t\t\ttimeDivider: true,\r\n\t\t\t\t\tdurationDisplay: true,\r\n\t\t\t\t\tremainingTimeDisplay: false,\r\n\t\t\t\t\tfullscreenToggle: true // 全屏按钮\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tplayer: null\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tplayerOptions() {\r\n\t\t\treturn {\r\n\t\t\t\t...this.defaultOptions,\r\n\t\t\t\t...this.options,\r\n\t\t\t\tsources: [this.source]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\t/**\r\n\t\t * 监听视频源信息变化\r\n\t\t * @param {object} newValue 变化后的值\r\n\t\t */\r\n\t\tsource(newValue) {\r\n\t\t\tif (this.player) {\r\n\t\t\t\tthis.player.pause() //  暂停\r\n\t\t\t\tthis.player.currentTime(0) //  跳到 0 秒\r\n\t\t\t\tthis.player.src(newValue) //  动态设置视频源\r\n\t\t\t\tthis.player.play() //  加载完毕后自动播放\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tconst videoOptions = this.playerOptions\r\n\t\tconsole.log(\"this.$refs.videoPlayer=\", this.$refs.videoPlayer)\r\n\t\tconsole.log(\"this.options=\", this.options)\r\n\t\tthis.player = videojs(this.$refs.videoPlayer, videoOptions)\r\n\t\t// window.videojs = videojs\r\n\t\t// require('video.js/dist/lang/zh-CN.js')\r\n\t\t// 加载中文语言包\r\n\t\timport('video.js/dist/lang/zh-CN.js').then(() => {\r\n\t\t\tif (this.player) {\r\n\t\t\t\tthis.player.language('zh-CN')\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.dispose()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~_a/styles/varibles.styl';\r\n\r\n\r\n.video-js {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 0;\r\n  color: $Primary;\r\n\r\n  // 播放按钮\r\n  >>> .vjs-big-play-button {\r\n    border-radius: 50%;\r\n    border: 6px solid $Primary;\r\n    left: calc(50% - 1em);\r\n    top: calc(50% - 1em);\r\n    width: 2.5em;\r\n    height: 2.5em;\r\n    line-height: 2.5em;\r\n    background: transparent;\r\n    box-sizing: content-box;\r\n    .vjs-icon-placeholder:before {\r\n      font-size: 48px;\r\n    }\r\n    &:hover {\r\n      opacity: 0.6;\r\n    }\r\n  }\r\n  // 改变各种“条”的颜色\r\n  >>> .vjs-volume-level,\r\n  >>> .vjs-play-progress,\r\n  >>> .vjs-slider-bar {\r\n    background: $Primary;\r\n  }\r\n\r\n  // 控制条按钮的大小\r\n  >>> .vjs-control-bar {\r\n    font-size: 14px;\r\n  }\r\n\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;AAKA;AACA;AAAA,IAAAA,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACAC,MAAA;MACAC,IAAA,EAAAC,MAAA;MACAL,OAAA,EAAAA,CAAA;QACA;MACA;IACA;IACAM,OAAA;MACAF,IAAA,EAAAC,MAAA;MACAL,OAAA,EAAAA,CAAA;QACA;MACA;IACA;EACA;EACAO,KAAA;IACA;MACA;MACAC,cAAA;QACAC,aAAA;QAAA;QACAC,QAAA;QAAA;QACAC,KAAA;QAAA;QACAC,IAAA;QAAA;QACAC,OAAA;QAAA;QACAC,QAAA;QACAC,WAAA;QAAA;QACAC,KAAA;QAAA;QACAC,OAAA,QAAAd,MAAA;QAAA;QACAe,mBAAA;QACAC,QAAA;QACAC,UAAA;UACAC,WAAA;UACAC,eAAA;UACAC,oBAAA;UACAC,gBAAA;QACA;MACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACAC,cAAA;MACA;QACA,QAAAnB,cAAA;QACA,QAAAF,OAAA;QACAW,OAAA,QAAAd,MAAA;MACA;IACA;EACA;EACAyB,KAAA;IACA;AACA;AACA;AACA;IACAzB,OAAA0B,QAAA;MACA,SAAAJ,MAAA;QACA,KAAAA,MAAA,CAAAK,KAAA;QACA,KAAAL,MAAA,CAAAM,WAAA;QACA,KAAAN,MAAA,CAAAO,GAAA,CAAAH,QAAA;QACA,KAAAJ,MAAA,CAAAQ,IAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,MAAAC,YAAA,QAAAR,aAAA;IACAS,OAAA,CAAAC,GAAA,iCAAAC,KAAA,CAAAC,WAAA;IACAH,OAAA,CAAAC,GAAA,uBAAA/B,OAAA;IACA,KAAAmB,MAAA,GAAAe,OAAA,MAAAF,KAAA,CAAAC,WAAA,EAAAJ,YAAA;IACA;IACA;IACA;IACAM,OAAA,CAAAC,OAAA,GAAAC,IAAA,WAAAC,wBAAA,CAAA5C,OAAA,EAAA6C,OAAA,kCAAAF,IAAA;MACA,SAAAlB,MAAA;QACA,KAAAA,MAAA,CAAAX,QAAA;MACA;IACA;EACA;EACAgC,cAAA;IACA,SAAArB,MAAA;MACA,KAAAA,MAAA,CAAAsB,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}