{"ast":null,"code":"import { deleteKnowledge, handleEditKnowledge } from '@/api/knowledge';\nimport KnowledgeEditModal from './KnowledgeEditModal.vue';\nexport default {\n  name: 'KnowledgeCard',\n  components: {\n    KnowledgeEditModal\n  },\n  props: {\n    card: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showEdit: false,\n      // 控制编辑弹窗显示\n      dataInfo: {}\n    };\n  },\n  methods: {\n    /**\r\n     * 打开编辑弹窗\r\n     */\n    handleEdit() {\n      this.dataInfo = JSON.parse(JSON.stringify(this.card));\n      this.showEdit = true;\n    },\n    /**\r\n     * 知识库重命名\r\n     */\n    async handleEditKnowledge(data) {\n      console.log('编辑知识库:');\n      console.log(data);\n      const param = {\n        ...data\n      };\n      const res = await handleEditKnowledge(param);\n      if (res && res.data.code === 200) {\n        this.$message.success('知识库编辑成功');\n        this.showEdit = false; // 关闭编辑弹窗\n        this.$emit('loadding'); // 通知父组件刷新列表\n      } else {\n        this.$message.error(res.data.message || '知识库编辑失败，请稍后重试');\n      }\n    },\n    /**\r\n     * 删除知识库\r\n     */\n    handleDelete() {\n      const that = this;\n      this.$confirm('此操作将永久删除该知识库, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const param = {\n          knowledgeCode: that.card.knowledgeCode\n        };\n        deleteKnowledge(param).then(res => {\n          if (res.data.code === 200) {\n            that.$message.success('知识库删除成功');\n            that.$emit('loadding'); // 通知父组件刷新列表\n          } else {\n            that.$message.error('知识库删除失败，请稍后重试');\n          }\n        }).catch(err => {\n          console.error('删除知识库失败:', err);\n          that.$message.error('网络错误，请稍后重试');\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}