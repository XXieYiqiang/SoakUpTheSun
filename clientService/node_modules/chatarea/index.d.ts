interface UserInfo {
    id: string,
    name: string,
    avatar?: String | URL,
    pinyin?: string
}

interface UploadImage {
    (file: File): Promise<String | URL>
}

interface UserProps {
    id: string,
    name: string,
    avatar: string,
    pinyin: string
}

interface UpdateOption {
    userList?: UserInfo[],
    placeholder?: string,
    copyType?: string[],
    uploadImage?: UploadImage,
    needCallEvery?: boolean,
    needCallSpace?: boolean,
    userProps?: UserProps,
    wrapKeyFun?: { (event: KeyboardEvent): boolean },
    sendKeyFun?: { (event: KeyboardEvent): boolean }
}

interface Option extends UpdateOption {
    elm: HTMLElement,
    needDialog?: Boolean
}

declare class ChatArea {
    richText: HTMLElement // 文本输入元素
    needCallEvery: Boolean // 是否需要@所有人
    userProps: UserProps // 人员列表数据结构
    chat: Record<string, any> // 光标事件实例
    dialogElm: HTMLElement // 弹窗元素
    userList: UserInfo[]  // @人员列表
    copyType: string[] // 支持的粘贴类型
    dialogActiveItemElm?: HTMLElement // 被选中的弹窗子元素
    itemShowList: HTMLElement[] // 当前显示的弹窗子元素集合

    constructor(option: Option)

    // 修改多个配置项
    updateConfig (updateOption: UpdateOption): void

    // 获取精简后的文本框dom
    getReduceNode(): HTMLElement

    // 获取发送文本
    getText (): string

    // 获取发送的html内容
    getHtml (): string

    // 回车发送事件
    enterSend (): void

    // 光标处插入html代码
    insertHtml (html: string): void

    // 插入自定义文本
    insertText (text: string): void

    // 获取@人员列表
    getCallUserList (): UserInfo[]

    // 置空输入框
    clear (defaultText?: string): void

    // 更新@人员
    updateUserList (newList: UserInfo[]): void

    // 文本框是否为空
    isEmpty (): boolean

    // 卸载元素，并释放实例
    dispose (): void

    // 在光标处插入传入的@人员
    setUserTag(user: UserInfo): void

    // 唤起PC人员多选弹窗
    showPCCheckDialog (): void

    // 唤起H5@人员弹窗
    showH5Dialog (): void

    // 私有api-单向插入
    onceSetTag (user: UserInfo): Promise<void>

    // 私有api-多项插入
    batchSetTag (users: UserInfo[]): Promise<void>
}

export default ChatArea
